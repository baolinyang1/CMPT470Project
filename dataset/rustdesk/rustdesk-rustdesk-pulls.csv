PR ID,Title,Description,State,Created At,Closed At,Merged At,Labels,Base Branch,Head Branch,Files Changed,Lines Added,Lines Deleted,Commits,Comments,Review Comments,Reviewers,Review States,Draft Status,Linked Issues
10813,NL lang further improvements,"enhanced a few more unclear texts, corrected one change made in a27fa43 (translated literally: Windows service -> Background service)",open,2025-02-17T14:06:59Z,,,,master,to-upstream,1,5,5,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10813
10812,Update nl.rs,,open,2025-02-17T13:54:14Z,,,,master,patch-8,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10812
10809,"fix, accessible peers filter considering device group name","1. Fix, accessible peers filter considering device group name
2. Consider sources of accessible peers when searching

Device's user and group
![1739783861734](https://github.com/user-attachments/assets/7ca28018-0be2-476c-8faa-560be695b516)
Without filter
![1739783957737](https://github.com/user-attachments/assets/fc8593d3-131e-4dec-ba6f-a4616999cc7e)


**Before fix:**

![1739783919970](https://github.com/user-attachments/assets/43339b4a-95a2-46e0-b84e-1a6db55e2062)

![1739783940723](https://github.com/user-attachments/assets/a6596c4d-29f6-49b9-a2b8-b97e532a9beb)

**After fix:**

ID ""1227624460"" is from user `user1`, althrough its device group is `device_group2`, it is still filtered out because `device_group2` is not in the list
![1739784054691](https://github.com/user-attachments/assets/703b9695-dec4-49a6-91ab-317abc75c8f0)

ID ""a123456"" is from device group `same_name`, althrough its username is `user2`, it is still filtered out because `user2` is not in the list
![1739784078042](https://github.com/user-attachments/assets/28bcb38e-b19a-4613-b6a2-9a8999542102)
![1739784745492](https://github.com/user-attachments/assets/8b35a336-2bdf-4718-907b-b7dbd40ce698)


",closed,2025-02-17T09:28:07Z,2025-02-17T09:36:47Z,2025-02-17T09:36:47Z,,master,device_group,1,12,9,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10809
10806,"refact: android, handle right click","1. Mouse -> Android, right click. `Long press` instead of `Back`. 
2. Replace long press timeout from `200 * 4` to `ViewConfiguration.getTapTimeout().toLong() + ViewConfiguration.getLongPressTimeout().toLong()` (`100 + 400`).",closed,2025-02-16T12:43:24Z,2025-02-16T12:45:09Z,2025-02-16T12:45:09Z,,master,refact/android_handle_right_click,1,30,7,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10806
10805,rustdeskUOWM,,closed,2025-02-16T10:09:53Z,2025-02-16T10:11:23Z,,,master,master,4,1,1,24,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10805
10804,Update hu.rs,"Translate new strings.
Clarification of some translations.",open,2025-02-16T09:44:15Z,,,,master,patch-4,1,14,14,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10804
10799,Update tw.rs,,open,2025-02-15T15:37:40Z,,,,master,patch-3,1,4,4,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10799
10798,Conflict,,closed,2025-02-15T12:34:53Z,2025-02-15T12:35:50Z,,,master,master,30,130,70,5,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10798
10796,Italian language update,"@rustdesk 

Please check and merge. Thanks.

Note: it seems that there is a serious issue regarding use RD in pc with double video board (ex. Intel + Nvidia) because in this context the main windows of RD is always light gray and you cannot setup nothing. I didn't find any open ticket about it (I tested on several computer with smilar hardware with two video boards).",open,2025-02-15T09:06:27Z,,,,master,master,1,1,1,1,2,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10796
10794,Update ru.rs,,open,2025-02-15T07:43:04Z,,,,master,master,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10794
10793,Ht,,closed,2025-02-15T06:26:12Z,2025-02-15T09:43:07Z,,,master,Ht,2,25,25,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10793
10792,"fix: android, controlled side, gesture","1. Fix RustDesk -> Android. Mouse events are only dispatched after actions are done.
2. Fix `mouse`(Desktop) -> Android. Long press and move.
3. Fix `touch` -> Android. Long press and move.

## Preview

### Issue

https://github.com/user-attachments/assets/5efb70c7-79bd-4019-bfe0-1f1b01cdf32b

### Fixed

https://github.com/user-attachments/assets/9b4d56c0-4520-4c9c-9af4-0cf6f8294a11

## Tests

- [x] `mouse`(Desktop)/`touch` -> Android. Long press and move/select.
- [x] Swipe and click.",closed,2025-02-15T02:33:01Z,2025-02-15T10:33:27Z,2025-02-15T10:33:26Z,,master,fix/android_gesture,3,85,38,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10792
10790,1,,closed,2025-02-15T01:07:04Z,2025-02-15T01:17:54Z,,,master,master,3,4,4,8,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10790
10782,Main,,closed,2025-02-14T11:47:03Z,2025-02-14T12:18:52Z,,,master,main,5,9,9,8,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10782
10781,device group,"1. Rename `Group` tab to `Accessible devices`
2. Add accessible device groups at the top of search list
3. option `preset-device-group-name` and command line `--assign --device_group_name`
4. Tested old hbbs server, preset option and --assign

![image](https://github.com/user-attachments/assets/8102225b-b880-4090-a126-d3a9e256211d)


https://github.com/user-attachments/assets/80e4c6f1-a4c9-4803-a03d-d862c4c59336



",closed,2025-02-14T08:24:37Z,2025-02-15T04:13:12Z,2025-02-15T04:13:12Z,,master,device_group,30,242,33,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10781
10758,test,,closed,2025-02-11T09:54:54Z,2025-02-11T09:55:53Z,,,master,master,3,40,2,30,1,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10758
10754,Pull request test,,closed,2025-02-10T14:30:50Z,2025-02-10T14:56:44Z,,,master,master,1,2,1,5,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10754
10753,"fix: win10, border","## Preview

### Issue

1. Border on the top edge.

<img width=""933"" alt=""58a003e9a1924b7d3cc3b4adcb8d85f"" src=""https://github.com/user-attachments/assets/5ad3478a-2ec4-4c97-a904-ccc5704cabfe"" />

2. The gap between the canvas and the edge.

![image](https://github.com/user-attachments/assets/9715e08a-a3cf-451a-8134-96c3906c2067)


### Fixed

![9a16e4a219cd4e1735c96104ad74c3a](https://github.com/user-attachments/assets/42a5ccb4-e046-4d85-adbe-05ba8059c680)

![09ed2049b1114af1652bdc507f17a24](https://github.com/user-attachments/assets/aa580df3-465d-488d-8351-89d8df926e07)

![931c8574c08b7e69e9b43dbc145dac7](https://github.com/user-attachments/assets/1fa2d532-be36-4ba9-934e-80cde90bc147)



",closed,2025-02-10T05:17:48Z,2025-02-10T05:50:28Z,2025-02-10T05:50:28Z,,master,fix/win10_border,7,94,27,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10753
10749,"fix: macos, main window, dark theme, border","## Preview

### Border issue

The border color seems black when using the dark theme. It should be white or gray.

<img width=""512"" alt=""3a0fc0837109ea9edcdd4fa2a26880b"" src=""https://github.com/user-attachments/assets/e34a83d1-e4f5-479b-8024-1cbbe3d46e29"" />

### Fixed

https://github.com/user-attachments/assets/565f7d02-11b4-4b8a-8302-16e98b8857a3

## Note

No idea why set `backgroundColor` to `Colors.transparent` here. This issue is introduced since `1.2.0`.

The main window works fine after unsetting `backgroundColor`.
",closed,2025-02-09T16:14:40Z,2025-02-09T16:25:11Z,2025-02-09T16:25:11Z,,master,fix/macos_main_window_border,1,7,3,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10749
10745,1.3.7 1,,closed,2025-02-09T13:19:31Z,2025-02-09T15:12:26Z,,,master,1.3.7-1,2,2,2,20,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10745
10744,1.3.77,,closed,2025-02-09T12:37:20Z,2025-02-09T12:51:35Z,,,master,1.3.77,2,2,1,3,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10744
10743,136002,,closed,2025-02-09T07:05:15Z,2025-02-09T07:07:19Z,,,master,rustdesk136003,1,5,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10743
10741,hbb_common,,closed,2025-02-09T05:45:39Z,2025-02-09T05:46:21Z,,,master,master,11,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10741
10724,My r,,closed,2025-02-08T10:12:40Z,2025-02-08T10:14:17Z,,,master,MyR,13,35,33,19,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10724
10719,1.3.7-fixed,,closed,2025-02-08T01:27:03Z,2025-02-08T02:13:17Z,,,master,1.3.7-fixed,1,1,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10719
10705,add detailed steps for compiling on macOS,"I think this update would help macOS users avoid the following similar problems when compiling rustdesk, the point is you must add `--x-install-root=""$VCPKG_ROOT/installed""`, or errors like `fatal error: 'vpx/vp8.h' file not found` will occur.

[https://github.com/rustdesk/rustdesk/discussions/3700](https://github.com/rustdesk/rustdesk/discussions/3700)  

[https://github.com/rustdesk/rustdesk/issues/2189](https://github.com/rustdesk/rustdesk/issues/2189)",closed,2025-02-06T18:12:30Z,2025-02-09T07:22:56Z,,,master,master,1,23,0,1,0,0,,,True,https://api.github.com/repos/rustdesk/rustdesk/issues/10705
10697,1,,closed,2025-02-06T14:16:50Z,2025-02-06T14:17:26Z,,,master,master,2,3,3,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10697
10693,Revoke BuildSecret Deletion,,closed,2025-02-06T12:13:06Z,2025-02-06T12:15:12Z,,,master,BuildSecrets,1,4,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10693
10688,Guokaihua1983 patch 1,,closed,2025-02-06T06:27:49Z,2025-02-06T06:29:50Z,,,master,guokaihua1983-patch-1,25,8404,1,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10688
10677,refact: update path to git url about hbb_common,hbb_common is not in local.update path to git url about hbb_common in Cargo.toml.,closed,2025-02-05T08:03:10Z,2025-02-05T08:04:57Z,,,master,hbb_common_update,7,9,8,1,3,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10677
10671,"refact: file copy&paste, cross platform (no macOS) ","Support files ""Ctrl+C/V"" for `RustDesk`(Desktop) -> `Windows/Linux`.

## Preview

https://github.com/user-attachments/assets/55d74142-57c0-4314-8f35-cda786f968ab

https://github.com/user-attachments/assets/79c52bc1-f105-4398-8ed3-89fa30039b53


## Desc

1. Use `https://github.com/rustdesk-org/arboard` to listen and set files.
2. Use `https://github.com/cberner/fuser` to handle paste operations.
3. Version `1.3.8` is required to support Linux/MacOS copy&paste.

Remove `ContextSend` for linux and macos. Because `arboard` is used to handle clipboard operations.

1. AppImage works fine.
2. Paste to flatpak is supported while copying from flatpak is not supported.
3. Paste to macOS is not supported while copying from macOS is supported.

## Tests

- [x] Windows -> Windows
  - [x] flutter
    - [x] 1 -> 1
      - [x] base. text, file
      - [x] big files (10MB)
      - [x] perm. remote window, cm window
    - [x] 1 -> n
      - [x] base. text, file
      - [x] perm. remote window, cm window
    - [x] n -> 1
      - [x] base. text, file
      - [x] perm. remote window, cm window
  - [x] sciter
    - [x] 1 -> 1
      - [x] base. text, file
      - [x] files & dirs
      - [x] big files (10MB)
      - [x] perm. remote window, cm window
    - [x] 1 -> n
      - [x] base. text, file
      - [x] perm. remote window, cm window
    - [x] n -> 1
      - [x] base. text, file
      - [x] perm. remote window, cm window
- [x] Linux -> Linux (X11 -> X11, Wayland -> Wayland, Gnome -> KDE, KDE -> Gnome)
  - [x] flutter
    - [x] 1 -> 1
      - [x] base. text, file
      - [x] big files (10MB)
      - [x] perm. remote window, cm window
    - [x] 1 -> n
      - [x] base. text, file
      - [x] perm. remote window, cm window
    - [x] n -> 1
      - [x] base. text, file
      - [x] perm. remote window, cm window
  - [x] sciter
    - [x] 1 -> 1
      - [x] base. text, file
      - [x] files & dirs
      - [x] big files (10MB)
      - [x] perm. remote window, cm window
    - [x] n -> 1
      - [x] base. text, file
      - [x] perm. remote window, cm window
- [x] Windows -> Linux(X11, Wayland, Gnome, KDE)
    - [x] flutter
      - [x] 1 -> 1
        - [x] base. text, file
        - [x] perm. remote window, cm window
    - [x] sciter
      - [x] 1 -> 1
        - [x] base. text, file
        - [x] perm. remote window, cm window
- [x] Linux(X11, Wayland, Gnome, KDE) -> Windows
    - [x] flutter
      - [x] 1 -> 1
        - [x] base. text, file
        - [x] big files (10MB)
        - [x] perm. remote window, cm window
    - [x] sciter
      - [x] 1 -> 1
        - [x] base. text, file
        - [x] perm. remote window, cm window
- [x] macOS <-> Linux, Windows (copy from macOS to Linux or Windows)
    - [x] 1 -> 1
      - [x] file
      - [x] big files (10MB)
      - [x] perm. remote window, cm window

## TODOs

1. Paste files to macOS.
",closed,2025-02-04T12:12:50Z,2025-02-04T12:33:02Z,2025-02-04T12:33:02Z,,master,refact/unix_file_clipboard_3,30,1642,1622,3,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10671
10667,New Version,,closed,2025-02-04T02:59:39Z,2025-02-04T03:06:25Z,,,master,master,3,4,4,7,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10667
10661,"Update NL translation: spelling, capitalization, missing entries","The Dutch translation was missing a few entries (2FA, mouse), quite a few poor translation, and a mix of honorifics: both formal and informal (this commit changed all to formal pronouns).",closed,2025-02-03T13:22:56Z,2025-02-03T14:18:20Z,2025-02-03T14:18:20Z,,master,master,1,120,120,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10661
10641,.gitmodules,,closed,2025-01-31T15:32:50Z,2025-01-31T15:35:57Z,,,master,master,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10641
10635,Update README.md,,closed,2025-01-30T04:56:13Z,2025-01-30T05:16:57Z,,,master,patch-1,1,110,57,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10635
10634,Update build_android.sh,,closed,2025-01-30T01:07:48Z,2025-01-30T01:09:30Z,,,master,patch-1,1,2,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10634
10614,misused by bad guys,,closed,2025-01-28T08:15:52Z,2025-01-28T08:16:00Z,2025-01-28T08:16:00Z,,master,rustdesk-patch-1,1,0,4,1,1,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10614
10610,Git submodule: Bump libs/hbb_common from `49c6b24` to `79f8ac2`,"Bumps [libs/hbb_common](https://github.com/rustdesk/hbb_common) from `49c6b24` to `79f8ac2`.
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/rustdesk/hbb_common/commit/79f8ac2d68e7b3304773c553f91f1de825bacdf5""><code>79f8ac2</code></a> Merge pull request <a href=""https://redirect.github.com/rustdesk/hbb_common/issues/4"">#4</a> from fufesou/feat/file_clipboard_try_empty</li>
<li><a href=""https://github.com/rustdesk/hbb_common/commit/e646eb9f4de014894280b81699cc94c76e11a164""><code>e646eb9</code></a> feat: file clipboard, try empty message</li>
<li>See full diff in <a href=""https://github.com/rustdesk/hbb_common/compare/49c6b24a7a8c39d4448e07b743007ef1a3febd43...79f8ac2d68e7b3304773c553f91f1de825bacdf5"">compare view</a></li>
</ul>
</details>
<br />


Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
- `@dependabot show <dependency name> ignore conditions` will show all of the ignore conditions of the specified dependency
- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)


</details>",closed,2025-01-27T00:49:32Z,2025-01-27T02:22:34Z,,dependencies,master,dependabot/submodules/master/libs/hbb_common-79f8ac2,1,1,1,1,1,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10610
10609,"fix: win, file clipboard, try empty","Fix some special cases for file copy&paste.

## cases

### Case 1

1. `A` -> `B`, `C`
2. Copy in `A`
3. Copy in `B`. `C` should empty the clipboard.
4. Paste in `C`

#### Before

Right click menu shows ""Paste"" is available

Win -> Win: Clicking ""Paste"" does nothing.
Win -> Linux (in dev): Clicking ""Paste"" causes dead lock.

#### After

Right click menu shows ""Paste"" is not available

### Case 2

1. `A`, `B` -> `C`
2. Copy in `C`
3. Copy in `A`. `B` should empty the clipboard.
4. Paste in `B`

#### Before

Right click menu shows ""Paste"" is available

Win -> Win: Clicking ""Paste"" does nothing.
Win -> Linux (in dev): Clicking ""Paste"" causes dead lock.

#### After

Right click menu shows ""Paste"" is not available

### Case 3

1. `A` -> `B` -> `C`
2. Copy in `B`
3. Copy in `A`. `C` should empty the clipboard.
4. Paste in `C`

#### Before

Right click menu shows ""Paste"" is available

Win -> Win: Clicking ""Paste"" does nothing.
Win -> Linux (in dev): Clicking ""Paste"" causes wrong files to be pasted.

#### After

Right click menu shows ""Paste"" is available

Win -> Win: Clicking ""Paste"" does nothing.
Win -> Linux (in dev): Clicking ""Paste"" does nothing.

## Note

1. Case 1. The change does not affect the sciter version, because the connection is a seperate process for the sciter version.
2. Case 3. `C` does not empty the clipboard, because `A` -> `B` and `B` -> `C` may be in different process. Sending this message between processes is a bit complicated, and this is a rarely case. The current fix will not cause an error.
3. Copy&paste with older version is tested.",closed,2025-01-26T13:53:39Z,2025-01-27T08:16:44Z,2025-01-27T08:16:44Z,,master,fix/win_file_clipboard_try_empty,5,72,7,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10609
10608,"fix: windows, dll, pre-loading attack","Fix, Windows, dll, pre-loading attack  https://learn.microsoft.com/en-us/windows/win32/dlls/dynamic-link-library-security

1. Prevent loading DLLs from the application directory. Load DLLs from `LOAD_LIBRARY_SEARCH_SYSTEM32` and `LOAD_LIBRARY_SEARCH_USER_DIRS`.
2. Use `SetDefaultDllDirectories()` and `SetDllDirectoryW()` to set the default DLL loading directories.
3. Update `hwcodec` https://github.com/rustdesk-org/hwcodec/pull/37.
4. Comment out code block of loading DLL from the application directory in `0010.disable-loading-DLLs-from-app-dir.patch`.
5. Terminate the process if failed to `bootstrap()` -> `set_safe_load_dll()`.



",closed,2025-01-26T11:30:08Z,2025-01-26T11:39:39Z,2025-01-26T11:39:39Z,,master,fix/windows_dll_injection_3,7,138,17,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10608
10607,sync,,closed,2025-01-26T10:06:08Z,2025-01-26T10:08:16Z,,,master,master,3,4,4,6,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10607
10606,Z cuojue patch 1,,closed,2025-01-26T06:47:44Z,2025-01-26T06:49:10Z,,,master,z-cuojue-patch-1,1,1,1,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10606
10604,"Translation of new strings.",Clarification of the translation of some strings.,closed,2025-01-25T13:46:45Z,2025-01-26T06:17:25Z,,,master,patch-3,1,661,659,1,1,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10604
10600,Update and fixes el.rs,,closed,2025-01-24T17:19:47Z,2025-01-25T08:39:16Z,2025-01-25T08:39:16Z,,master,master,1,37,37,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10600
10595,333,333,closed,2025-01-24T04:17:56Z,2025-01-24T04:22:02Z,,,master,master,3,5,4,5,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10595
10594,Update he.rs,Update Hebrew.,closed,2025-01-23T23:39:47Z,2025-01-24T07:09:37Z,2025-01-24T07:09:37Z,,master,master,1,98,98,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10594
10593,Add dependabot for submodule,,closed,2025-01-23T18:35:20Z,2025-01-26T06:18:26Z,2025-01-26T06:18:26Z,,master,dependabot,1,11,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10593
10587,Update README.md,,closed,2025-01-23T05:24:07Z,2025-01-23T05:24:14Z,2025-01-23T05:24:14Z,,master,rustdesk-patch-2,1,0,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10587
10586,Update README.md,,closed,2025-01-23T05:23:14Z,2025-01-23T05:23:20Z,2025-01-23T05:23:20Z,,master,rustdesk-patch-1,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10586
10583,Master dev,,closed,2025-01-23T03:55:19Z,2025-01-23T04:00:21Z,,,master,master-dev,2,4,4,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10583
10579,Norwegian Translation,"I have added and translated README, CONTRIBUTING, CODE OF CONDUCT, DEVCONTAINER and SECURITY.",closed,2025-01-22T20:51:01Z,2025-01-23T05:22:25Z,2025-01-23T05:22:25Z,,master,norwegian,6,372,1,1,1,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10579
10578,common.rs,,closed,2025-01-22T17:25:59Z,2025-01-22T17:31:11Z,,,master,master,1,1,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10578
10577,137,137,closed,2025-01-22T15:34:19Z,2025-01-22T15:35:34Z,,,master,master,0,0,0,0,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10577
10576,Reduce the possibility of vaapi being created twice,"vaapi does not support dynamically changing the bitrate. If the bitrate changes at the beginning, it will be created twice, so not do bitrate adjustment when the first TestDelay message is received on linux.

in `user_network_delay`, `adjust_ratio = user.delay.fps.is_none();`

before:
![e91f02a11e40a4ba2d6d09e8395e5d1](https://github.com/user-attachments/assets/8da064a8-7350-4292-92a7-d4025f2974f0)

after:
![b149fd0f6102f699d81747987538206](https://github.com/user-attachments/assets/9eb61bdf-42e9-4ccf-95ce-dcfe8918a306)
",closed,2025-01-22T11:23:36Z,2025-01-22T12:27:01Z,2025-01-22T12:27:00Z,,master,fix,2,7,3,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10576
10574,fix passwd,,closed,2025-01-22T10:12:28Z,2025-01-22T10:14:42Z,,,master,test,1,8,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10574
10570,Fix issues spotted during 1.3.7 fdroid build,"- **bridge.yml: Explicitly install cargo-expand of certain version**
- **flutter-build.yml: drop workarounds for flutter 3.13**
- **Bump vcpkg baseline to 2025.01.13**
",closed,2025-01-21T15:58:39Z,2025-01-22T01:26:04Z,2025-01-22T01:26:04Z,,master,vcpkg-deps,3,9,22,3,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10570
10569,1,,closed,2025-01-21T15:31:38Z,2025-01-21T15:32:45Z,,,master,master,2,3,3,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10569
10566,RustDesk2,,closed,2025-01-21T13:37:49Z,2025-01-21T13:38:44Z,,,master,master,3,4,4,13,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10566
10562,fix windows crash,"https://github.com/rustdesk/rustdesk/issues/10557
https://github.com/rustdesk/rustdesk/issues/10559
",closed,2025-01-21T08:54:17Z,2025-01-21T08:57:07Z,2025-01-21T08:57:07Z,,master,fix_windows_crash,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10562
10560,"refact: file copy&paste, cross platform (no macOS)","Support files ""Ctrl+C/V"" for `RustDesk` -> `Windows/Linux`.

## Preview


## Desc

1. Use `https://github.com/rustdesk-org/arboard` to listen and set files.
2. Use `https://github.com/cberner/fuser` to handle paste operations.

Remove `ContextSend` for linux and macos. Because `arboard` is used to handle clipboard operations.

## Tests

- [ ] Windows -> Windows
  - [ ] flutter
    - [x] 1 -> 1
      - [x] base. text, file
      - [x] big files (10MB)
      - [x] perm. remote window, cm window
    - [x] 1 -> n
      - [x] base. text, file
      - [x] perm. remote window, cm window
    - [x] n -> 1
      - [x] base. text, file
      - [x] perm. remote window, cm window
  - [ ] sciter
    - [ ] 1 -> 1
      - [ ] base. text, file
      - [ ] files & dirs
      - [ ] big files (10MB)
      - [ ] perm. remote window, cm window
    - [ ] 1 -> n
      - [ ] base. text, file
      - [ ] perm. remote window, cm window
    - [ ] n -> 1
      - [ ] base. text, file
      - [ ] perm. remote window, cm window
- [ ] Linux -> Linux (X11 -> X11, Wayland -> Wayland, Gnome -> KDE, KDE -> Gnome)
  - [x] flutter
    - [x] 1 -> 1
      - [x] base. text, file
      - [x] big files (10MB)
      - [x] perm. remote window, cm window
    - [x] 1 -> n
      - [x] base. text, file
      - [x] perm. remote window, cm window
    - [x] n -> 1
      - [x] base. text, file
      - [x] perm. remote window, cm window
  - [x] AppImage
  - [ ] flatpak
  - [ ] sciter
    - [ ] 1 -> 1
      - [ ] base. text, file
      - [ ] files & dirs
      - [ ] big files (10MB)
      - [ ] perm. remote window, cm window
    - [ ] 1 -> n
      - [ ] base. text, file
      - [ ] perm. remote window, cm window
    - [ ] n -> 1
      - [ ] base. text, file
      - [ ] perm. remote window, cm window
- [ ] Windows -> Linux(X11, Wayland, Gnome, KDE)
    - [x] flutter
      - [x] 1 -> 1
        - [x] base. text, file
        - [x] perm. remote window, cm window
    - [ ] sciter
      - [ ] 1 -> 1
        - [ ] base. text, file
        - [ ] perm. remote window, cm window
- [ ] Linux(X11, Wayland, Gnome, KDE) -> Windows
    - [x] flutter
      - [x] 1 -> 1
        - [x] base. text, file
        - [x] big files (10MB)
        - [x] perm. remote window, cm window
    - [ ] sciter
      - [ ] 1 -> 1
        - [ ] base. text, file
        - [ ] perm. remote window, cm window
- [ ] macOS <-> Linux, Windows (copy from macOS to Linux or Windows)
    - [ ] 1 -> 1
      - [ ] file
      - [ ] big files (10MB)
      - [ ] perm. remote window, cm window
- [ ] macOS -> macOS, Linux, Windows, Android
    - [ ] 1 -> 1
      - [ ] base. text
      - [ ] perm. remote window, cm window
- [ ] Android -> RustDesk. No need to test. Android as the controlling side is not changed.

### Special cases

#### Case 1

1. `A` -> `B`, `C`
2. Copy in `A`
3. Copy in `B`. `C` should empty the clipboard.
4. Paste in `C`

#### Case 2

1. `A`, `B` -> `C`
2. Copy in `C`
3. Copy in `A`. `B` should empty the clipboard.
4. Paste in `B`

#### Case 3

1. `A` -> `B` -> `C`
2. Copy in `B`
3. Copy in `A`. `C` should empty the clipboard.
4. Paste in `C`

## TODOs

1. Copying multiple files to Linux may partially fail.
6. Paste files to the macOS side.
",closed,2025-01-21T08:14:46Z,2025-01-21T12:31:40Z,,,master,refact/unix_file_clipboard_3,30,1782,1628,1,0,0,,,True,https://api.github.com/repos/rustdesk/rustdesk/issues/10560
10558,"Revert ""bump to 1.3.7""",Reverts rustdesk/rustdesk#10548,closed,2025-01-21T06:14:58Z,2025-01-21T06:16:48Z,,,master,revert-10548-bump_1.3.7,12,13,13,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10558
10555,replace self-hosted arm64 linux with ubuntu-22.04-arm,"https://github.blog/changelog/2025-01-16-linux-arm64-hosted-runners-now-available-for-free-in-public-repositories-public-preview/

https://github.com/21pages/rustdesk/actions/runs/12878096935",closed,2025-01-21T02:07:24Z,2025-01-21T09:09:24Z,2025-01-21T09:09:24Z,,master,public_arm_runner,1,7,6,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10555
10549,11,,closed,2025-01-20T12:48:28Z,2025-01-20T15:12:54Z,,,master,master,3,11,9,30,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10549
10548,bump to 1.3.7,https://github.com/rustdesk/rustdesk/commit/03999d900e325d81c7bb11da1ad60bf43c31a8cf#diff-0033b8e843d8f1faab4260b6c1066ea80306016943635dfc52f86475dd404c9f,closed,2025-01-20T11:30:28Z,2025-01-20T15:12:00Z,2025-01-20T15:12:00Z,,master,bump_1.3.7,12,13,13,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10548
10547,merfg,,closed,2025-01-20T10:48:23Z,2025-01-20T15:14:19Z,,,master,master,8,59,100,8,1,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10547
10543,replace hbb_common with submodule,,closed,2025-01-20T02:55:02Z,2025-01-20T09:33:42Z,2025-01-20T09:33:42Z,,master,hbb_common,30,56,7170,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10543
10541,fix(debian): makes postinst/prerm scripts idempotent,,closed,2025-01-19T15:21:42Z,2025-01-19T23:59:40Z,2025-01-19T23:59:40Z,,master,master,2,2,2,2,4,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10541
10532,Fix incomplete display of text,"![2025-01-18_19-54-59](https://github.com/user-attachments/assets/d6fc3f23-2484-4495-8861-a1f1fcbb26b6)
",closed,2025-01-18T12:05:18Z,2025-01-18T15:53:29Z,,,master,fix_sever_page_display_text,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10532
10531,Fix incomplete display of text,"![2025-01-18_19-54-59](https://github.com/user-attachments/assets/fb114869-5ba8-49b8-a9f1-f7c74ce3aa2d)
",closed,2025-01-18T11:56:16Z,2025-01-18T11:56:49Z,,,master,fix_incomplete_display_of_text,2,4,4,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10531
10528,Update config.rs,,closed,2025-01-18T03:12:14Z,2025-01-19T08:09:14Z,,,master,master,1,8,3,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10528
10527,config,,closed,2025-01-18T02:46:29Z,2025-01-18T02:57:32Z,,,master,master,2,7,1,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10527
10526,1.3.6,,closed,2025-01-18T02:44:49Z,2025-01-18T02:45:10Z,,,master,1.3.6,2,8,1,3,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10526
10513,⚠️ Disclaimer,,closed,2025-01-16T06:34:59Z,2025-01-16T06:42:07Z,,,master,master,2,51,3,4,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10513
10512,common.rs,,closed,2025-01-16T04:50:00Z,2025-01-16T06:40:27Z,,,master,patch-3,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10512
10511,config.rs,,closed,2025-01-16T04:29:13Z,2025-01-16T18:27:59Z,,,master,patch-1,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10511
10501,config.rs,,closed,2025-01-14T15:15:46Z,2025-01-14T15:23:27Z,,,master,patch-1,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10501
10500,Fix a translation error,,closed,2025-01-14T13:42:28Z,2025-01-14T14:16:17Z,2025-01-14T14:16:17Z,,master,master,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10500
10498,"Nowa wersja, synchro zmian",,closed,2025-01-14T07:27:38Z,2025-01-14T08:51:13Z,,,master,master,14,3370,2253,16,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10498
10474,pull,,closed,2025-01-10T08:27:33Z,2025-01-10T08:39:05Z,,,master,master,2,3,3,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10474
10473,cn.rs,,closed,2025-01-10T07:15:46Z,2025-01-10T08:57:32Z,,,master,patch-1,1,1,1,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10473
10468,Update es.rs,,closed,2025-01-09T15:02:47Z,2025-01-10T13:14:59Z,2025-01-10T13:14:59Z,,master,master,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10468
10467,Update es.rs,New term added,closed,2025-01-09T14:59:41Z,2025-01-09T15:00:36Z,,,master,master,0,0,0,0,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10467
10464,"fix: clipboard, client side, update is required on conn","Update `is required` for text clipboard on the client side for desktop.

If update is not called, the client clipboard will not work if last connection disabled the clipboard until the option is toggled agian.
The flat is not reset after ending the connection.
",closed,2025-01-09T09:39:13Z,2025-01-16T18:27:20Z,2025-01-16T18:27:20Z,,master,fix/client_clipboard_reset_is_required_on_stop,1,2,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10464
10463,"fix: mobile, don't reset canvas on metrics changed","https://github.com/rustdesk/rustdesk/issues/10426

Call `_resetCanvasOffset()` instead of `updateViewStyle()` on metrics changed.

## Preview


https://github.com/user-attachments/assets/1a5ba8a8-b4a2-4226-a1c4-8c36a93af407

",closed,2025-01-09T08:35:58Z,2025-01-15T10:24:50Z,2025-01-15T10:24:50Z,,master,fix/mobile_no_reset_canvas_on_metrics_changed,1,6,3,1,1,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10463
10459,opt qos,"* Adjust bitrate and fps based on TestDelay messages.
* Bitrate is adjusted every 3 seconds, fps is adjusted every second and when receiving test lag.
* Latency optimized at high resolutions. However, when the network is poor, the delay when just connecting or sliding static pages is still obvious.",closed,2025-01-08T16:41:14Z,2025-01-20T09:59:36Z,2025-01-20T09:59:36Z,,master,qos,10,719,532,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10459
10458,Update language | ro.rs,All the missing parts of the Romanian language have been completed,closed,2025-01-08T16:27:09Z,2025-01-11T06:48:56Z,,,master,patch-1,1,658,658,1,1,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10458
10452,fix: [translations] Add the translation in tw.rs,"Add the translation in tw.rs

Log: Add the translation in tw.rs",closed,2025-01-08T03:32:47Z,2025-01-08T06:16:16Z,2025-01-08T06:16:16Z,,master,master,1,1,1,1,1,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10452
10449,111,1111,closed,2025-01-07T09:36:57Z,2025-01-07T09:40:32Z,,,master,master,30,973,534,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10449
10448,scrap: implement gxdi Display::primary(),,closed,2025-01-07T08:19:16Z,2025-01-07T08:37:09Z,,,master,master,1,5,2,1,1,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10448
10445,scrap: style,,closed,2025-01-07T03:16:05Z,2025-01-07T03:21:43Z,2025-01-07T03:21:43Z,,master,style,1,6,6,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10445
10442,scrap: fixed build warnning,"```shell
warning: elided lifetime has a name
   --> src/common/mod.rs:192:21
    |
187 |     pub fn to<'a>(
    |               -- lifetime `'a` declared here
...
192 |     ) -> ResultType<EncodeInput> {
    |                     ^^^^^^^^^^^ this elided lifetime gets resolved as `'a`
    |
    = note: `#[warn(elided_named_lifetimes)]` on by default
```",closed,2025-01-07T02:18:50Z,2025-01-07T03:14:21Z,2025-01-07T03:14:21Z,,master,master,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10442
10436,hbb_common: simplify is_compressed_file,"Simplifying the `is_compressed_file` function, use the `containts` function instead of each  `|| x == y` operation",closed,2025-01-06T09:57:50Z,2025-01-06T10:20:18Z,2025-01-06T10:20:18Z,,master,master,1,2,9,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10436
10435,Update config.rs,,closed,2025-01-06T08:47:12Z,2025-01-06T09:07:50Z,,,master,patch-1,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10435
10433,Patch 1,,closed,2025-01-06T06:01:00Z,2025-01-06T06:19:41Z,,,master,patch-1,2,3,3,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10433
10429,Update,,closed,2025-01-05T14:26:52Z,2025-01-05T14:27:11Z,,,master,master,0,0,0,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10429
10420,Fm955 cargo.toml,,closed,2025-01-03T11:42:39Z,2025-01-03T11:44:53Z,,,master,FM955-Cargo.toml,2,8,2,6,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10420
10413,fix ffmpeg videotoolbox wrong log,"* Fix ffmpeg videotoolbox wrong log when changing bitrate. Clear cache needed.
https://github.com/FFmpeg/FFmpeg/blob/0457aaf0d3a05331dc599bea573809fd0317c624/libavcodec/videotoolboxenc.c#L1342
* Let qsv support abr, it's safe for qsv to change bitrate frequently.

",closed,2025-01-02T14:17:09Z,2025-01-02T14:19:30Z,2025-01-02T14:19:30Z,,master,fix_videotoolbox_log,2,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10413
10412,Update custom_server.rs,,closed,2025-01-02T10:51:54Z,2025-01-02T11:39:34Z,,,master,master,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10412
10410,update,,closed,2025-01-01T22:08:37Z,2025-01-02T02:24:05Z,,,master,master,2,3,3,4,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10410
10408,fix online status indicator,"#10005 

The original online status query simply checked whether the rendezvous_server contained the given ID. After the modification, the server address is obtained from the original set of IDs, and then a socket connection is established with that server in order to query the online status.

By using a HashMap, the same server address only needs one socket connection to send a batch of IDs at once. In the HashMap’s key, “rendezvous_server” is used to store cases where there is no “@” in the ID (i.e., the original situation where IDs only have an ID). “public” is used when the string after “@” is “public”. In other scenarios, the string after “@” is treated as a domain name or IP address (which can be IPv4 or IPv6, with optional ports; if a port is provided with an IPv6 address, it should be enclosed in brackets; no brackets are needed if there is no port). The value in the HashMap contains all IDs that need to be queried on the server corresponding to that key.

Originally, config.rs’s get_rendezvous_server function simply checked for the presence of “:” to determine if there was a port, ignoring IPv6. Therefore, IPv6 detection has been added by counting the number of “:” to handle IPv6 addresses.

I’ve tested the scenario between two Windows 10 machines myself, covering ID, ID@public, ID@IPv4 , ID@IPv4 :port, ID@IPv6, and ID@[IPv6]:port. The “online indicator” lights up as expected in all cases, but turning it off responds a bit slowly

![PixPin_2025-01-01_06-54-39](https://github.com/user-attachments/assets/97ef2a53-df23-44ee-9e1b-7fd3fbd2f785)
",closed,2024-12-31T22:56:26Z,2025-01-11T11:28:20Z,,,master,my_work,3,216,14,3,2,0,"rustdesk, Lumiphare, rustdesk","CHANGES_REQUESTED, COMMENTED, CHANGES_REQUESTED",True,https://api.github.com/repos/rustdesk/rustdesk/issues/10408
10407,fix: fix crate vulnerabilities,"https://rustsec.org/advisories/RUSTSEC-2024-0357

Also update yanked crates `bytemuck`, `bytes` and `futures-util`.",closed,2024-12-31T19:52:42Z,2025-01-01T02:15:57Z,2025-01-01T02:15:57Z,,master,vuln,1,22,22,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10407
10404,Dishuo183 patch 1,,closed,2024-12-31T08:00:32Z,2024-12-31T08:00:49Z,,,master,dishuo183-patch-1,1,1,1,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10404
10399,Fix image blur occurring at the moment of changing quality,"https://github.com/rustdesk-org/hwcodec/pull/33

Fix this issue occurs on FFmepg qsv, FFmpeg nvenc and SDK mfx, other codecs don't have this problem. 
Clear cache is needed.


https://github.com/user-attachments/assets/08145e62-2945-4f2a-b121-dedcdfbe1784


https://github.com/user-attachments/assets/cbdd99ea-0496-4337-a92c-9a6a16948332


https://github.com/user-attachments/assets/29a6fa4d-1734-4b36-b73b-b32073bac02a

",closed,2024-12-30T03:46:17Z,2024-12-30T03:51:37Z,2024-12-30T03:51:37Z,,master,fix_image_blur_on_changing_quality,3,30,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10399
10398,refact: unix file copy&paste,"Support files ""Ctrl+C/V"" for linux -> linux.

## Preview

https://github.com/user-attachments/assets/c97ce01d-3286-4aa7-8b91-54d4fbb281c8

## Desc

1. Use `https://github.com/rustdesk-org/arboard` to listen and set files.
2. Use `https://github.com/cberner/fuser` to handle paste operations.

Remove `ContextSend` for linux and macos. Because `arboard` is used to handle clipboard operations.

## Tests

- [ ] Windows -> Windows
  - [ ] flutter
    - [x] 1 -> 1
      - [x] base. text, file
      - [x] perm. remote window, cm window
    - [x] 1 -> n
      - [x] base. text, file
      - [x] perm. remote window, cm window
    - [x] n -> 1
      - [x] base. text, file
      - [x] perm. remote window, cm window
  - [ ] sciter
    - [ ] 1 -> 1
      - [ ] base. text, file
      - [ ] perm. remote window, cm window
    - [ ] 1 -> n
      - [ ] base. text, file
      - [ ] perm. remote window, cm window
    - [ ] n -> 1
      - [ ] base. text, file
      - [ ] perm. remote window, cm window
- [ ] Linux -> Linux (X11 -> X11, Wayland -> Wayland, Gnome -> KDE, KDE -> Gnome)
  - [ ] flutter
    - [x] 1 -> 1
      - [x] base. text, file
      - [x] perm. remote window, cm window
    - [x] 1 -> n
      - [x] base. text, file
      - [x] perm. remote window, cm window
    - [x] n -> 1
      - [x] base. text, file
      - [x] perm. remote window, cm window
  - [ ] sciter
    - [ ] 1 -> 1
      - [ ] base. text, file
      - [ ] perm. remote window, cm window
    - [ ] 1 -> n
      - [ ] base. text, file
      - [ ] perm. remote window, cm window
    - [ ] n -> 1
      - [ ] base. text, file
      - [ ] perm. remote window, cm window
- [x] macOS -> macOS, Linux, Windows, Android
    - [x] 1 -> 1
      - [x] base
      - [x] perm. remote window, cm window
- [x] Android -> RustDesk. No need to test. Android as the controlling side is not changed.


## TODOs

Linux <-> Windows copy&paste.
",closed,2024-12-30T02:44:45Z,2025-01-21T08:16:18Z,,,master,refact/unix_file_clipboard,29,1384,1277,1,0,0,,,True,https://api.github.com/repos/rustdesk/rustdesk/issues/10398
10394,fix andriod update button cannot be clicked,"https://github.com/rustdesk/rustdesk/discussions/9407#discussioncomment-11690318

1. Remove `canLaunchUrl`, which fix the issue
2. Remove `unregisterEventHandler` of `kCheckSoftwareUpdateFinish` when connection page dispose, it's registered on main.
https://github.com/rustdesk/rustdesk/blob/39a430f96f9600a2ef19a7191d3f323c7ba4b8b5/flutter/lib/main.dart#L160
https://github.com/rustdesk/rustdesk/blob/39a430f96f9600a2ef19a7191d3f323c7ba4b8b5/flutter/lib/main.dart#L123
https://github.com/rustdesk/rustdesk/blob/39a430f96f9600a2ef19a7191d3f323c7ba4b8b5/flutter/lib/common.dart#L3616",closed,2024-12-29T13:51:42Z,2024-12-29T15:37:53Z,2024-12-29T15:37:52Z,,master,fix_android_update_unclickable,2,2,12,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10394
10381,Update lv.rs,,closed,2024-12-26T09:48:41Z,2024-12-27T06:47:01Z,2024-12-27T06:47:01Z,,master,patch-1,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10381
10377,0,,closed,2024-12-26T09:10:56Z,2024-12-26T09:14:54Z,,,master,master,3,7,7,6,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10377
10375,Uzcool 去除隐藏连接 1,,closed,2024-12-26T07:51:43Z,2024-12-26T07:52:26Z,,,master,uzcool-去除隐藏连接-1,1,12,10,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10375
10374,Fix missing locked arg in cargo install,"Spotted by @linsui
",closed,2024-12-26T07:33:09Z,2024-12-26T07:54:46Z,2024-12-26T07:54:46Z,,master,fdroid-buildscript,1,3,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10374
10364,fix: build,Fix build and move scattered calls `clipboard::ContextSend::enable()` into one place.,closed,2024-12-25T08:04:32Z,2024-12-25T08:36:14Z,2024-12-25T08:36:14Z,,master,fix/build,2,22,18,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10364
10361,"fix: file clipboard, init disabled","
Don't call `check_clipboard_file_context()` for flutter version. Because it may disable the file clipboard context.

The clients of sciter version are seperated processes. It's ok to change the `clipboard::ContextSend` for each option.
While the clients of the flutter version are one process. We need always enable the context for simple.

If `check_clipboard_file_context()` disables the file clipboard context:
1. It affects other connections.
2. A toggle option on the local side cannot enable the context again. Because https://github.com/rustdesk/rustdesk/blob/06bc554216922edbcd262426613f4b84003b1f65/src/ui_session_interface.rs#L327
",closed,2024-12-25T06:42:48Z,2024-12-25T07:18:06Z,2024-12-25T07:18:06Z,,master,fix/file_clipboard_option_check_context,1,8,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10361
10356,Fix: DEBIAN Control md5sums,"Fix: https://github.com/rustdesk/rustdesk/discussions/10354

### First, checking current `/var/lib/dpkg/info/rustdesk.md5sums`

```
b810fb09ba4f1b55c095f83d1077ab8b usr/share/rustdesk/files/systemd/rustdesk.service
```
1. The `/` on the path is missing
2. The checksum and the path of the file should separated by **two** spaces (By checking others like `wget.md5sums`) 

```diff
def md5_file(fn):
    md5 = hashlib.md5(open('tmpdeb/' + fn, 'rb').read()).hexdigest()
-   system2('echo ""%s %s"" >> tmpdeb/DEBIAN/md5sums' % (md5, fn))
+   system2('echo ""%s  /%s"" >> tmpdeb/DEBIAN/md5sums' % (md5, fn))
```

### Second
The checksums should be generated by ***file list***, not just specify single file, otherwise the integrity can't be guaranteed.
* Create a new def `md5_file_folder` that will generate file list and send to `md5_file` to generate md5 checksum",closed,2024-12-24T15:30:52Z,2024-12-24T16:04:35Z,2024-12-24T16:04:35Z,,master,deb-md5,1,12,8,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10356
10355,Update flutter-build.yml,,closed,2024-12-24T14:29:41Z,2024-12-24T14:30:07Z,,,master,master,1,1,9,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10355
10352,1.3.6,,closed,2024-12-24T10:30:11Z,2024-12-24T10:32:02Z,,,master,master,2,2,2,3,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10352
10350,config.rs,,closed,2024-12-24T08:34:53Z,2024-12-24T08:44:32Z,,,master,patch-1,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10350
10346,Update sl.rs,,closed,2024-12-23T13:24:31Z,2024-12-24T06:15:23Z,2024-12-24T06:15:23Z,,master,patch-2,1,13,13,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10346
10343,Ppp,,closed,2024-12-23T00:01:14Z,2024-12-23T00:06:39Z,,,sciterjs,ppp,30,9949,3304,30,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10343
10337,Update flutter-build.yml,,closed,2024-12-22T03:35:50Z,2024-12-22T03:35:56Z,2024-12-22T03:35:56Z,,master,rustdesk-patch-1,1,6,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10337
10335,update,t,closed,2024-12-21T17:04:51Z,2024-12-22T01:59:22Z,,,master,master,2,2,1,4,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10335
10332,refactor: replace &PathBuf with &Path to enhance generality,- `&Path` provides better generality than `&PathBuf` in function parameters.,closed,2024-12-21T11:50:18Z,2024-12-23T12:28:04Z,2024-12-23T12:28:04Z,,master,pathbuf-refactor,13,44,40,1,2,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10332
10330,"fix: android, mouse mode, right menu, unexpected click","https://github.com/rustdesk/rustdesk/discussions/5345#discussioncomment-11595216


## Desc

mobile -> Windows, mouse mode.

After the right menu is displayed, `onOneFingerPanEnd()` triggers `await inputModel.sendMouse('up', MouseButtons.left);`.

Some applications (such as chrome and vscode) can handle the Up event, which behaves the same as a click.

Although Windows system does not handle this event.

vscode on linux and macOS do no have this issue.

## Tests

- [x] Android -> Windows, mouse mode. Mouse movement. `onOneFingerPanStart()`, `onOneFingerPanUpdate()`, `onOneFingerPanEnd()`
- [x] Android -> Windows, mouse mode. Hod and drag. `onHoldDragStart()`, `onHoldDragUpdate()`, `onHoldDragEnd()`

",closed,2024-12-21T07:03:37Z,2024-12-21T07:09:03Z,2024-12-21T07:09:03Z,,master,fix/android_mouse_mode_right_menu_unexpected_click,1,3,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10330
10327,"refact: linux, move rustdesk into /usr/share","https://github.com/rustdesk/rustdesk/pull/10293#issuecomment-2548609489

Fix SELinux limits on Fedora.

https://github.com/rustdesk/rustdesk/issues/6116
https://github.com/rustdesk/rustdesk/issues/4267
https://github.com/rustdesk/rustdesk/issues/7107
https://github.com/rustdesk/rustdesk/issues/5458
https://github.com/rustdesk/rustdesk/issues/5098
https://github.com/rustdesk/rustdesk/issues/7164
https://github.com/rustdesk/rustdesk/issues/6301

## Desc

Change the install path from `/usr/lib/rustdesk` to `/usr/share/rustdesk`.

```
$ ls -lZ /usr/share/rustdesk/rustdesk
-rwxr-xr-x. 1 root root system_u:object_r:usr_t:s0 30608 Dec 20 21:49 /usr/share/rustdesk/rustdesk

$ ps -eZ | grep rustdesk
system_u:system_r:unconfined_service_t:s0 964 ?  00:00:04 rustdesk
```

## Tests

- [x] Flutter build. Install and upgrade on Ubuntu, Archlinux, OpenSUSE, Fedora.
- [x] Sciter build. Install and upgrade on Ubuntu.
- [x] AppImage on Ubuntu.
- [ ] Flatpak, flutter and sciter. The flutter version is tested. Sciter version is not tested, it's a little hard to build this package. But the only file need to be changed is `src/ui.rs`.
- [ ] Rpm package directly downgrade is broken. Since the older spec file uses `ln -s /usr/lib/rustdesk/rustdesk /usr/bin/rustdesk`. This command always fails. Previous versions worked because the location was consistent. No fix idea, the only way is to uninstall before installing the older version.


",closed,2024-12-20T15:16:16Z,2024-12-21T06:53:29Z,2024-12-21T06:53:29Z,,master,refact/linux_install_path_usr_share,12,45,35,2,1,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10327
10326,"Revert ""Revert ""revert linux use cpal """"",Fix https://github.com/rustdesk/rustdesk/discussions/10197,closed,2024-12-20T14:42:52Z,2024-12-20T14:46:43Z,2024-12-20T14:46:43Z,,master,linux_use_psimple,3,62,2,2,1,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10326
10324,"fix: linux, flutter, workaround freeze","https://github.com/rustdesk/rustdesk/discussions/10301

https://github.com/flutter/flutter/issues/153560#issuecomment-2497160535

May not fix https://github.com/rustdesk/rustdesk/issues/10322#issuecomment-2554517791

## Desc

> Settings > Accessibility > Keyboard.

This issue can be reproduced by enabling the ""on-screen keyboard"".

![image](https://github.com/user-attachments/assets/cf6521ed-51f5-4829-87ab-44e2d49bcb3e)


",closed,2024-12-19T16:29:01Z,2024-12-20T01:24:09Z,2024-12-20T01:24:09Z,,master,fix/workaround_freeze_linux_mint22,18,95,79,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10324
10320,Update ko.rs,,closed,2024-12-19T06:20:29Z,2024-12-20T07:09:33Z,2024-12-20T07:09:33Z,,master,master,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10320
10316,"refact: linux, install path","https://github.com/rustdesk/rustdesk/pull/10293#issuecomment-2548609489

Fix SELinux limits on Fedora.

https://github.com/rustdesk/rustdesk/issues/6116
https://github.com/rustdesk/rustdesk/issues/4267
https://github.com/rustdesk/rustdesk/issues/7107
https://github.com/rustdesk/rustdesk/issues/5458
https://github.com/rustdesk/rustdesk/issues/5098
https://github.com/rustdesk/rustdesk/issues/7164
https://github.com/rustdesk/rustdesk/issues/6301

## Desc

Change the install path from `/usr/lib/rustdesk` to `/usr/local/rustdesk`.

```
$ ls -lZ /usr/local/rustdesk/rustdesk
-rwxr-xr-x. 1 root root system_u:object_r:usr_t:s0 30608 Dec 18 18:18 /usr/local/rustdesk/rustdesk

$ ps -eZ | grep rustdesk
system_u:system_r:unconfined_service_t:s0 2116 ? 00:00:00 rustdesk
```

## Tests

- [x] Flutter build. Install and upgrade on Ubuntu, Archlinux, OpenSUSE, Fedora.
- [x] Sciter build. Install and upgrade on Ubuntu.
- [x] AppImage on Ubuntu.
- [x] Flatpak, flutter and sciter.


",closed,2024-12-19T04:43:49Z,2024-12-19T07:05:24Z,2024-12-19T07:05:24Z,,master,refact/linux_install_path,11,36,50,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10316
10314,"fix: macos, show remote cursor","https://github.com/rustdesk/rustdesk/discussions/10267

https://github.com/rustdesk-org/cpal/pull/3",closed,2024-12-18T13:14:46Z,2024-12-18T13:17:04Z,2024-12-18T13:17:04Z,,master,fix/macos_remote_cursor,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10314
10312,Fix translation issues in Italian language file,Corrected multiple translation errors and typos in the Italian language resource file.,closed,2024-12-18T10:47:24Z,2024-12-18T13:02:53Z,2024-12-18T13:02:53Z,,master,master,1,7,7,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10312
10310,Mirror to upstream patches,,closed,2024-12-18T05:39:55Z,2024-12-18T05:40:11Z,,,master,mirror,11,188,10,6,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10310
10306,update hwcodec,https://github.com/rustdesk-org/hwcodec/pull/32,closed,2024-12-17T13:50:11Z,2024-12-17T13:52:17Z,2024-12-17T13:52:17Z,,master,update,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10306
10305,fix ci,,closed,2024-12-17T06:39:40Z,2024-12-17T07:01:01Z,2024-12-17T07:01:01Z,,master,fix_ci,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10305
10304,update hwcodec,,closed,2024-12-17T04:01:40Z,2024-12-17T04:07:34Z,2024-12-17T04:07:34Z,,master,update,2,3,3,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10304
10297,Fix for Docker Build failure  due to minimum  Cmake version update and arm based compilation of vcpkg,"two fixes are here with Dockerfile

1. Minimum Cmake version requirement for rustdesk is now 3.21, However default cmake given by base image debian bullseye-slim is 3.18 https://packages.debian.org/source/bullseye/cmake, so docker build used to fail earlier, now using cmake built from source 3.30 for long term purpose.
2. Second fix, for ARM based system environment variable  should be VCPKG_FORCE_SYSTEM_BINARIES=1, otherwise docker build will fail on arm based system like macos m1,m2 m3 etc.


wget is needed to fetch cmake from source.
libssl-dev is dependency for cmake3.30.

with this change Docker build gets succesful on macos 
",closed,2024-12-16T13:02:04Z,2024-12-17T02:37:57Z,2024-12-17T02:37:57Z,,master,master,1,10,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10297
10294,fix auto record outgoing sessions ignore record permission,"1. Fix auto record outgoing sessions ignore record permission
2. Stop record if record permission changed
3. Update hwcodec
4. Make video thread finish faster when connection closed

Video: not auto record if no permission and stop record if permission changed

https://github.com/user-attachments/assets/29328643-a8ac-433d-9a0b-dff7faa6c7a1

https://doc.rust-lang.org/std/sync/mpsc/struct.Receiver.html#method.recv

![image](https://github.com/user-attachments/assets/2c5cd731-5169-4ca7-b620-3e501dfaf246)


![channel](https://github.com/user-attachments/assets/ef90efb1-4d6e-4ad9-93f4-7856a75083d9)
",closed,2024-12-16T09:11:20Z,2024-12-16T09:13:49Z,2024-12-16T09:13:49Z,,master,record_permission,5,57,31,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10294
10293,"refact: linux, chcon, bin_t","Fix SELinux limits on Fedora.

https://github.com/rustdesk/rustdesk/issues/6116
https://github.com/rustdesk/rustdesk/issues/4267
https://github.com/rustdesk/rustdesk/issues/7107
https://github.com/rustdesk/rustdesk/issues/5458
https://github.com/rustdesk/rustdesk/issues/5098
https://github.com/rustdesk/rustdesk/issues/7164
https://github.com/rustdesk/rustdesk/issues/6301


## Desc

Change the security context of `/usr/lib/rustdesk/rustdesk` from `lib_t` to `bin_t`.

Then the process security context will be `system_u:system_r:unconfined_service_t:s0`.

Although the service spec uses `/usr/bin/rustdesk` and the security context of the soft symlink is `bin_t`. The process actually uses the security context of `/usr/lib/rustdesk/rustdesk`.

All distros can apply the following changes. But we only do it for `rpm` packages for now.
Because the other distros dose not support `chcon` well (or maybe SELinux) for now.

```bash
# Change the security context of /usr/lib/rustdesk/rustdesk from `lib_t` to `bin_t`.
if command -v getenforce >/dev/null 2>&1; then
  if [ ""$(getenforce)"" == ""Enforcing"" ]; then
    file_security_context=$(ls -lZ /usr/lib/rustdesk/rustdesk 2>/dev/null | awk -F':' '{print $3}')
    if [ ""${file_security_context}"" == ""lib_t"" ]; then
      chcon -t bin_t /usr/lib/rustdesk/rustdesk || true
    fi
  fi
fi
```

The above code can also be applied to Ubuntu, openSUSE, Archlinux. But it takes no effect.
1. SELinux is not enabled by default, even command `getenforce` is not included.
2. `ls -lZ /usr/lib/rustdesk/rustdesk` results no security context
  `-rwxr-xr-x 1 root root ? 19184 Sep 20 14:10 /usr/lib/rustdesk//rustdesk`
3. `chcon -t bin_t /usr/lib/rustdesk/rustdesk` results errors.
  `chcon: can't apply partial context to unlabeled file '/usr/lib/rustdesk/rustdesk'`
  `chcon: failed to get security context of '/usr/lib/rustdesk/rustdesk': Operation not supported`


This documentation may no longer be needed https://rustdesk.com/docs/en/client/linux/selinux/.

## Tests

1. debian 12.7.0, Ubuntu 24.04, openSUSE Leap 15.6.

```
# ps -eZ | grep rustdesk
unconfined                          587 ?        00:00:01 rustdesk
# ls -lZ | /usr/lib/rustdesk/rustdesk
-rwxr-xr-x 1 root root ? 26096 Nov 26 08:31 /usr/lib/rustdesk/rustdesk
# chcon -t bin_t /usr/lib/rustdesk/rustdesk
chcon: can't apply partial context to unlabeled file '/usr/lib/rustdesk/rustdesk'
```

2. Fedora 37, Fedora 40, Fedora 41, CentOS-8-5-2111 (before)

```
# ps -eZ | grep rustdesk
system_u:system_r:init_t:s0         965 ?        00:00:00 rustdesk
# ls -lZ | /usr/lib/rustdesk/rustdesk
-rwxr-xr-x. 1 root root system_u:object_r:lib_t:s0 30608 Dec  5 19:01 /usr/lib/rustdesk/rustdesk
```

3. Fedora 37, Fedora 40, Fedora 41, CentOS-8-5-2111 (after)

```
# ps -eZ | grep rustdesk
system_u:system_r:unconfined_service_t:s0 3442 ? 00:00:00 rustdesk
# ls -lZ | /usr/lib/rustdesk/rustdesk
-rwxr-xr-x. 1 root root system_u:object_r:bin_t:s0 30608 Dec 16 10:26 /usr/lib/rustdesk/rustdesk
```

5. `deb` package with the adding code in `postinst`. Installation is done, nothing changes.


## Refs

1. https://documentation.suse.com/en-us/sle-micro/5.5/html/SLE-Micro-all/cha-selinux-slemicro.html#id-1.7.3.10.5:~:text=ls%20%2DZ,PATH
2. https://www.dbi-services.com/blog/selinux-setup-and-configuration-for-linux/#:~:text=Here%20is%20a%20list%20of%20the%20most%20used%20SELinux%20security%20context%20types%3A",closed,2024-12-16T04:03:44Z,2024-12-16T11:01:12Z,2024-12-16T11:01:12Z,,master,refact/linux_chcon_bin_t,2,18,0,1,19,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10293
10288,Flathub badge in the README,"Hello @rustdesk,

Your Flathub package is now verified and the builds are consistent. I think it would be beneficial to add a Flathub badge to your README file to reflect this. You can find the badge source at [Flathub Badges](https://flathub.org/badges).

This addition would provide a clear visual indicator of your package's status and make it easier for users to verify its authenticity.

I have also checked the [source of the F-Droid badge](https://gitlab.com/fdroid/artwork/tree/master/badge) and updated it too.",closed,2024-12-15T11:28:08Z,2024-12-16T08:04:54Z,2024-12-16T08:04:54Z,,master,flathub-badge,1,4,1,2,1,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10288
10287,Update hu.rs,Fixes and corrections,closed,2024-12-15T10:53:49Z,2024-12-16T07:48:17Z,2024-12-16T07:48:17Z,,master,master,1,162,162,4,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10287
10285,Compare across forks,,closed,2024-12-14T20:29:29Z,2024-12-14T20:32:18Z,,,master,master,6,15,8,9,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10285
10284,f,,closed,2024-12-14T15:36:45Z,2024-12-15T02:16:24Z,,,master,master,2,3,3,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10284
10283,try fix FFmpeg amf encode hang,"https://github.com/rustdesk/rustdesk/issues/5609#issuecomment-2536362667

## Possible Causes
 
* GPU API Call Hangs: This could occur, though it's less likely.
* Infinite Loop: If `QueryOutput` always fails and `hwsurfaces_in_queue_max` is zero (because we set `initial_pool_size` to 1,https://github.com/FFmpeg/FFmpeg/blob/b08d7969c550a804a59511c7b83f2dd8cc0499b8/libavcodec/amfenc.c#L332), the loop will continue indefinitely. https://github.com/FFmpeg/FFmpeg/blob/b08d7969c550a804a59511c7b83f2dd8cc0499b8/libavcodec/amfenc.c#L865. This pr fix this condition.

![hwsurfaces_in_queue_max](https://github.com/user-attachments/assets/b52b78ec-4493-49a0-8976-fd72680f3749)


## Fix
  * A query_timeout [patch ](https://github.com/rustdesk/rustdesk/blob/master/res/vcpkg/ffmpeg/patch/0001-avcodec-amfenc-add-query_timeout-option-for-h264-hev.patch)has been added to FFmpeg with a value of 1000ms, which exceeds the time required to encode a single frame. This allows us to remove the loop.

![6e5f560796c3b5a0512d14b62b80db6](https://github.com/user-attachments/assets/be67c24c-f508-4e06-92e8-fe2074044322)


## Test
  * After removing the loop, no frame encoding failures were encountered during testing. A single call to QueryOutput is sufficient, as it typically consumes about 12ms on a 2K screen.
 

![QueryOutput](https://github.com/user-attachments/assets/f2c86157-d4cc-463e-a360-b4cab03d0e45)
",closed,2024-12-14T14:20:02Z,2024-12-16T11:40:48Z,2024-12-16T11:40:48Z,,master,try_fix_amf_stuck,2,27,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10283
10277,Peng loop patch 1 11111,,closed,2024-12-13T16:59:44Z,2024-12-13T23:24:55Z,,,master,peng-loop-patch-1-11111,2,2,1,3,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10277
10275,1.3.1 20241213,,closed,2024-12-13T16:14:21Z,2024-12-13T16:14:40Z,,,master,1.3.1-20241213,3,3,2,3,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10275
10274,add Camera Display,add camera to display for remote view camera,open,2024-12-13T09:59:36Z,,,,master,master,6,539,118,11,22,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10274
10273,Flatpak manifest updates,"Hello @rustdesk,

This is a follow-up pull request to [PR #9581](https://github.com/rustdesk/rustdesk/pull/9581). After investigating the error in the ""Flutter Nightly Build"" workflow, I discovered that the issue was caused by the line including flatpak's metainfo in the build. To resolve this, I have removed the problematic line, and the GitHub workflow is now functioning correctly. You can verify this by checking the workflow run at https://github.com/besdar/rustdesk/actions/runs/12300041131, where I have disabled all other jobs except those for flatpak and removed the build for the aarch64 architecture (which initially used a custom external environment). You can also check the final build here: https://github.com/besdar/rustdesk/releases/download/nightly/rustdesk-1.3.5-x86_64.flatpak

As a result, the manifest is now aligned with the one in the Flathub repository, except for the removed line and one permission.

In addition to fixing the error, I have also optimized the job's build to make it more efficient and similar to the one recommended by Flathub in their [submission guidelines](https://docs.flathub.org/docs/for-app-authors/submission/#build-and-install). If you feel that these changes are excessive, I can revert the job to its previous state.

I apologize for the delay in submitting this follow-up request. It took some time to research the issue and try different approaches to resolve it. Thank you for considering this updated pull request.",closed,2024-12-13T09:08:15Z,2024-12-15T08:55:44Z,2024-12-15T08:55:44Z,,master,flatpak-build-updates,4,87,59,1,4,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10273
10272,update vcpkg to 2024.11.16,"1. version changes:
* vcpkg: 2024.07.12 -> 2024.11.16
* aom (except linux sciter): 3.9.1 -> 3.11.0
* libvpx: 1.14.1 -> 1.15.0
* libyuv: not update because compiled failed on arm64, and didn't apply different version on different archs
* opus: already the latest version
* ffmpeg: 7.0.2 -> 7.1, vcpkg has been officially updated to 7.1, most of the changes are copied from vcpkg official.

2. other changes:
* android 5.0 required, otherwise crash when start, because FFmpeg 7.1 link to mediandk directly

3. Tests:
* Except arm, arm64, linux amf, ios, all the other codecs are tested
* Compile on arm32 linux is not tested, ci is failed before vcpkg install
* Tested windows FFmpeg qsv, still no memory leak",closed,2024-12-13T02:11:26Z,2024-12-13T05:28:49Z,2024-12-13T05:28:49Z,,master,update_vcpkg,29,601,594,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10272
10271,131fix,,closed,2024-12-12T10:56:03Z,2024-12-12T10:57:16Z,,,master,131fix,3,3,2,3,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10271
10265,Update uk.rs,,closed,2024-12-11T19:38:57Z,2024-12-12T03:13:50Z,2024-12-12T03:13:50Z,,master,ukrainian,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10265
10262,"Revert ""revert linux use cpal""",Reverts rustdesk/rustdesk#10260,closed,2024-12-11T05:42:18Z,2024-12-11T05:42:25Z,2024-12-11T05:42:25Z,,master,revert-10260-revert_linux_use_cpal,2,0,60,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10262
10260,revert linux use cpal,Fix https://github.com/rustdesk/rustdesk/discussions/10197,closed,2024-12-11T03:23:42Z,2024-12-11T05:35:50Z,2024-12-11T05:35:50Z,,master,revert_linux_use_cpal,2,60,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10260
10253,Feat change icon,,closed,2024-12-10T15:07:12Z,2024-12-10T15:34:48Z,,,master,feat-change-icon,23,174,336,13,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10253
10248,"fix: macos, keyboard, translate mode, capslock and deadkeys","fix: macOS -> RustDesk, translate mode

1. CapsLock
2. Dead keys
3. Forward delete

https://github.com/rustdesk-org/rdev/pull/9

https://github.com/rustdesk-org/rdev/pull/10

https://github.com/rustdesk-org/rdev/pull/11

## Tests

- [x] MacOS -> Windows
  - [x] Input Source 1 - Translate mode
    - [x] Character keys
        - [x] en-US -> en-US
        - [x] en-US -> fr-FR
          - [x] Normal keys
          - [x] AltGr keys
        - [x] fr-FR -> en-US
          - [x] Dead keys
        - [x] fr-FR -> fr-FR
          - [x] Normal keys
          - [x] AltGr keys
          - [x] Dead keys
    - [x] Shortcuts. Shift + Arrows/Home/End/Insert
    - [x] System keys
    - [x] Navigation keys
    - [x] Function keys
    - [x] Lock keys
    - [x] Long press. https://github.com/rustdesk/rustdesk/issues/6793
  - [x] Input Source 1 - Map mode
    - [x] Character keys
        - [x] en-US -> en-US
        - [x] en-US -> fr-FR
          - [x] Normal keys
          - [x] AltGr keys
          - [x] Dead keys
        - [x] fr-FR -> en-US
        - [x] fr-FR -> fr-FR
          - [x] Normal keys
          - [x] AltGr keys
          - [x] Dead keys
    - [x] Shortcuts
    - [x] System keys
    - [x] Navigation keys
    - [x] Function keys
    - [x] Numeric keypad
    - [x] Lock keys
    - [x] Long press. https://github.com/rustdesk/rustdesk/issues/6793
",closed,2024-12-10T04:44:01Z,2024-12-10T05:03:01Z,2024-12-10T05:03:01Z,,master,fix/macos_translate_mode_capslock_deadkeys,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10248
10246,Feat customer mode,,closed,2024-12-09T21:11:51Z,2024-12-09T21:12:33Z,,,master,feat-customer-mode,20,161,153,5,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10246
10245,Italian language update,"@rustdesk 

Please merge. Thanks.",closed,2024-12-09T18:28:25Z,2024-12-10T02:48:38Z,2024-12-10T02:48:38Z,,master,master,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10245
10243,Update nl.rs,,closed,2024-12-09T14:57:40Z,2024-12-10T02:48:29Z,2024-12-10T02:48:29Z,,master,patch-7,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10243
10242,Fix/windows empty file clipboard on disconn,"## Empty clipboard

https://github.com/rustdesk/rustdesk/issues/10220

### Preview

https://github.com/user-attachments/assets/99455ad4-10c1-4f74-9f47-fecd58f039bb


### Test `copied`

Without `EmptyClipboard()` on disconnect, only use `copied` flag.

https://github.com/user-attachments/assets/4d486546-aef6-46e1-9f80-1e006fdce40d



### Desc

1. Only empty clipboard if current clipboard data is ""copying files from the remote"". 

```
!IsClipboardFormatAvailable(CF_HDROP) && (Clipboard formats contains `CFSTR_FILEDESCRIPTORW`)
```

![image](https://github.com/user-attachments/assets/bc2f7052-7ac0-419a-b8bc-effa7d578363)

2. Use `copied` to double confirm files are not pasted before pressing `Ctrl+C`.

## Do not paste files copied before the connection

### Preview


https://github.com/user-attachments/assets/00e9fd43-2a44-4fb9-b1d5-696fb7c50706



https://github.com/user-attachments/assets/95b8a357-b284-4da4-a3e9-336ae7b7b197


### Desc

Remove `return cliprdr_send_format_list(clipboard, monitorReady->connID);` in `wf_cliprdr_monitor_ready()` to avoid paste files copied before the connection.
",closed,2024-12-09T14:56:12Z,2024-12-10T03:01:34Z,2024-12-10T03:01:34Z,,master,fix/windows_empty_file_clipboard_on_disconn,1,59,6,3,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10242
10237,Update config.rs,,closed,2024-12-09T12:00:42Z,2024-12-09T12:05:19Z,,,master,patch-1,1,5,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10237
10236,yong,,closed,2024-12-09T09:53:23Z,2024-12-09T10:01:59Z,,,master,master,12,4,3,14,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10236
10235,fix ios audio output,https://github.com/rustdesk/rustdesk/issues/10230,closed,2024-12-09T07:39:51Z,2024-12-09T07:41:49Z,2024-12-09T07:41:49Z,,master,fix_ios_audio,1,6,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10235
10233,Update ru.rs,,closed,2024-12-09T06:20:32Z,2024-12-09T07:11:09Z,2024-12-09T07:11:09Z,,master,master,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10233
10231,Update tw.rs,,closed,2024-12-08T18:54:44Z,2024-12-09T04:30:50Z,2024-12-09T04:30:50Z,,master,patch-2,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10231
10229,Monthly,,closed,2024-12-08T14:04:41Z,2024-12-08T14:25:37Z,,,master,master,1,5,5,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10229
10228,Update de.rs,,closed,2024-12-08T14:02:31Z,2024-12-09T04:30:32Z,2024-12-09T04:30:32Z,,master,patch-38,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10228
10227,fix typo,"newer version -> new version

![3264a7a89a7074036b4218878242a38](https://github.com/user-attachments/assets/3937781d-f607-4fbb-951e-47fd688168a8)
",closed,2024-12-08T11:26:40Z,2024-12-08T12:09:10Z,2024-12-08T12:09:10Z,,master,fix_typo,30,30,30,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10227
10225,add version update translation,"https://github.com/rustdesk/rustdesk/issues/10198

Add a app name placeholder for possible custom client update in the future.

![e239c491d20a0a6391f4c918c52270b](https://github.com/user-attachments/assets/3d9ad49c-4fbf-4622-ac8f-f7dd6f8f54f8)

![af118ad44a7d83dcd5dfdcd02fdd707](https://github.com/user-attachments/assets/7a23dd31-8788-4e0f-8994-2eeff375e5e7)
",closed,2024-12-08T06:54:33Z,2024-12-08T10:27:45Z,2024-12-08T10:27:45Z,,master,new_version_translate,30,30,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10225
10224,always block desktop settings page if video connection exists,"https://github.com/rustdesk/rustdesk/issues/2680#issuecomment-2520569869

1. Always block desktop settings page if video connection exists, both mouse event and key event are blocked, video connection count is obtained from ui status loop.
2. Settings page uses video connection count and mouse move time, home page and server page use mouse move time.
3. Server control page always block key event.
4. Move `buildRemoteBlock` to seperate pages(home, settings, server) to avoid 2 masks in settings page.

## Videos

https://github.com/user-attachments/assets/1c729c8b-09b1-431b-bdba-0c9a6a9da7bb

https://github.com/user-attachments/assets/5c91b4c8-879a-4de5-911f-16931c6f88db

https://github.com/user-attachments/assets/ecae3952-3b1c-4670-8a2d-72c5d33a344d

### Tests

`AbsorbPointer` block mouse event, `ExcludeFocus` block key event.


https://github.com/user-attachments/assets/01781802-efd5-464f-a2b1-40632faaf510



https://github.com/user-attachments/assets/738b5d8e-517d-4165-869b-e891cb3c3510


https://github.com/user-attachments/assets/b95c9899-2942-49cf-bac2-1fba3034f1a9



",closed,2024-12-08T06:04:10Z,2024-12-08T10:26:56Z,2024-12-08T10:26:56Z,,master,block_desktop_setting_page,11,126,53,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10224
10223,fix: android clipboard permission,"## Preview

https://github.com/user-attachments/assets/83acc332-3f73-4495-a64a-c92ea9569b7d



https://github.com/user-attachments/assets/15590102-ad43-4a01-bf0f-0e406b053c15



## Desc

Add option ""Enable clipboard"" for Android. It only controls the permission as the controlled side.

",closed,2024-12-07T10:51:46Z,2024-12-07T14:34:54Z,2024-12-07T14:34:54Z,,master,fix/clipboard_permission,10,80,36,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10223
10218,"fix: Android, try sync clipboard on connecting","Fix unexpected android clipboard reading.


## Preview

https://github.com/user-attachments/assets/6caf4c34-9e17-411c-bf0c-e00d2c0f1539


https://github.com/user-attachments/assets/60488309-9881-4f23-b05b-1410e143ab74



## Desc


1. Client side. Don't trigger clipboard `client -> host` in `onWindowFocusChanged()`. Use `try_sync_clipboard` message from the remote page instead.
2. Host side. Only enable clipboard sharing when there's a connection.
3. Remove option ""Enable clipboard"" in the ""Share screen"" page.
4. Remove clipboard listener.

",closed,2024-12-06T19:20:51Z,2024-12-07T07:12:15Z,2024-12-07T07:12:15Z,,master,fix/android_clipboard_sync,12,41,118,5,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10218
10217,Update README-KR.md,,closed,2024-12-06T19:09:07Z,2024-12-07T02:24:32Z,2024-12-07T02:24:32Z,,master,patch-1,1,16,16,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10217
10213,"block remote modification, replace mouse move time with video connection count","https://github.com/rustdesk/rustdesk/issues/2680#issuecomment-2520569869

If this option is set to Disable remote modification, it is disabled when an authenticated video connection exists. After this change, the controlled end cannot operate the rustdesk ui during a video connection.
CM still use click check.


https://github.com/user-attachments/assets/e37c0c53-0419-4432-a9ab-dc6ea4110d79

https://github.com/user-attachments/assets/4a4f826d-f243-4bc4-90f2-d4bd8f81394d

",closed,2024-12-06T12:33:10Z,2024-12-06T12:43:14Z,,,master,block_modification_if_remote_connection_exist,8,16,84,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10213
10211,"fix: repeated keys, linux as controlled side","https://github.com/rustdesk/rustdesk/issues/6793
https://github.com/rustdesk/rustdesk/issues/10052

Remove workaround on the controlling side. Use ""press"" as the click flag, like ""Legacy mode"".

## Tests

https://github.com/rustdesk/rustdesk/pull/10086

- [ ] Windows, flutter keyboard, `AltGr` is wrong.
- [ ] Web js listener, `AltGr` key generates `ControlLeft` + `AltGraph` events. Then `AltGr` + `E` cannot generate `€` on the controlled side. No proper workaround for now.

## TODOs

- [ ] macOS -> RustDesk, ""Translate mode"", ""CapsLock"" and ""Dead keys"", will submit another two separate PRs.

## Note

There's also an issue of flutter(3.24.5) key event on macOS.
RustDesk cannot listen the key events when meeting the following logs.
The app must be restarted to work again.

But it's hard to reproduce.

```
Another exception was thrown: A KeyUpEvent is dispatched, but the state shows that the physical key is pressed on a different logical key. If this
occurs in real application, please report this bug to Flutter. If this occurs in unit tests, please ensure that simulated events follow Flutter's event
model as documented in `HardwareKeyboard`. This was the event: KeyUpEvent#5ce17(physicalKey: PhysicalKeyboardKey#7b545(usbHidUsage: ""0x00070004"",
debugName: ""Key A""), logicalKey: LogicalKeyboardKey#43f11(keyId: ""0x1400070004"", keyLabel: """", debugName: ""Key with ID 0x01400070004""), character:
null, timeStamp: 5:23:37.145293) and the recorded logical key LogicalKeyboardKey#12bb1(keyId: ""0x00000061"", keyLabel: ""A"", debugName: ""Key A"")
```

",closed,2024-12-06T10:39:53Z,2024-12-06T12:01:11Z,2024-12-06T12:01:11Z,,master,fix/linux_repeated_keys,4,35,38,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10211
10209,Test,,closed,2024-12-06T08:14:06Z,2024-12-06T08:14:25Z,,,master,Test,14,302,77,6,2,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10209
10192,"fix: linux, transparent window","https://github.com/rustdesk/rustdesk/issues/10180

## Tests

- [x] opensuse leap 15.6, kde
- [x] Linuxmint22 mate
- [x] UbuntuMate 22.04
- [x] Ubuntu 22.04 gnome",closed,2024-12-05T09:20:31Z,2024-12-05T09:26:34Z,2024-12-05T09:26:34Z,,master,fix/linux_transparent_window,1,30,17,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10192
10191,"Revert ""Revert ""fix: workaround, linux window, transparent rounded corner""""",Reverts rustdesk/rustdesk#10186,closed,2024-12-05T09:07:11Z,2024-12-05T09:07:23Z,2024-12-05T09:07:23Z,,master,revert-10186-revert-10128-fix/linux_rounded_corner,2,44,3,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10191
10187,Rustdesk133 patch,,closed,2024-12-05T06:09:37Z,2024-12-05T06:42:32Z,,,master,rustdesk133-patch,2,7,1,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10187
10186,"Revert ""fix: workaround, linux window, transparent rounded corner""",Reverts rustdesk/rustdesk#10128,closed,2024-12-05T03:08:52Z,2024-12-05T03:08:59Z,2024-12-05T03:08:59Z,,master,revert-10128-fix/linux_rounded_corner,2,3,44,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10186
10185,"revert: linux, main window, transparent, 10128","Revert transparent main window.

Remote window keeps changes.
",closed,2024-12-05T03:06:25Z,2024-12-05T03:09:17Z,,,master,revert/linux_main_window_transparent_10128,1,0,40,1,1,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10185
10184,"Revert ""fix: linux, window, workaround, mint, mate""",Reverts rustdesk/rustdesk#10146,closed,2024-12-05T02:44:30Z,2024-12-05T02:44:37Z,2024-12-05T02:44:37Z,,master,revert-10146-refact/linux_workaround_mint_mate,6,17,161,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10184
10183,"fix: macos, aarch64, try fix running on 12.3","Try fix https://github.com/rustdesk/rustdesk/discussions/10178

https://github.com/yury/cidre/blob/3b7744defb7c21dcbdba8e54279381de748010cb/cidre/src/objc.rs#L105

## Test

- [x] Windows -> macOS(15.1.1), system sound",closed,2024-12-05T02:36:00Z,2024-12-05T02:38:22Z,2024-12-05T02:38:22Z,,master,fix/macos_arrch64_target_12.3,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10183
10182,Update config.rs,,closed,2024-12-05T01:11:48Z,2024-12-05T01:16:16Z,,,master,cst-1.3.4,1,5,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10182
10174,Update uk.rs,,closed,2024-12-04T13:52:03Z,2024-12-05T03:04:10Z,2024-12-05T03:04:10Z,,master,patch-1,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10174
10171,linux dynamic load libva,"1. Linux dynamic load libva, which can fix lack of libva dependency for appimage or flatpak, also fix libva version mismatch between build and run.
2. Remove libvdpau, it's not used, and add libva2 explicitly for deb and appimage
3. Print FFmpeg configure log to know the actual codecs.
4. Remove unused ndk load symbol in mediacodec patch

Pass test
* ubuntu 22.04 x64: deb, flatpak, appimage
* ubuntu 18.04: appimage, flatpak
* ubuntu 22.04 x64 hwcodec example: combination of lacking any of libva2, libva-x11-2, libva-drm2, intel-media-va-driver
* fedora 38: 1.3.3 and pr, but its libva can't be uninstalled because gnome shell depends on it.
* ubuntu 22.04 x64: remove all libva lib, install intel-media-va-driver, run appimage
* ubuntu arm64: deb, appimage

Not pass test:
* ubuntu 18.04: can't load librustdesk.so because fcntl64 not found

Other tests:
* Comparing libva function proto with cursor generated.
* Test with a  loading ""notExistedFunction"" symbol.

## Screenshots

* ubuntu 18 appimage

![ubuntu18 04-appimage](https://github.com/user-attachments/assets/a813ca94-3112-4f7c-b187-27ebbf652549)

* ubuntu 18 deb fcntl64 error:

![ubuntu18 04deb-fcntl64](https://github.com/user-attachments/assets/2e1948ee-ff87-4af7-8bf9-e289ccae4a99)

* lack library:

![hwcodec_no_any_libva](https://github.com/user-attachments/assets/330b3547-39da-41d5-bfcf-be0ffc6c5fa2)

![hwcodec_only_libva2](https://github.com/user-attachments/assets/530ec314-0acf-483f-96e2-059bdbe371b1)

![hwcodec_lack_libva-drm2](https://github.com/user-attachments/assets/0f46d1d8-9589-4e41-b5cf-5718170c657b)

* lack driver:

![lack_driver](https://github.com/user-attachments/assets/7dae06c7-c2b6-416d-bec7-06d4b5e742f1)


",closed,2024-12-04T08:52:32Z,2024-12-04T09:10:11Z,2024-12-04T09:10:11Z,,master,va,14,2038,49,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10171
10167,Update config.rs,,closed,2024-12-04T06:41:18Z,2024-12-04T06:45:36Z,,,master,patch-1,1,5,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10167
10165,"feat: Android, opt, check update on startup","## Preview

### Android API-34

https://github.com/user-attachments/assets/cb7782c2-1250-4eb8-9c59-371ea44def23

### Android API 29

https://github.com/user-attachments/assets/884b8e44-c846-4c90-8fce-5a12f4d06c0a

### Windows

https://github.com/user-attachments/assets/dc5c89c4-d609-4a4e-87f8-2e9ec83af4bb


## Desc

1. Feat. Android add option to enable checking update on startup.
2. Refactor. Only query update once on startup, both desktop and mobile.
  For previous version:
  a. Android. Check is called every time on switching to the connection page.
  b. Desktop. Check is called every time on minimized and restore.
3. Fix. Android ""Download new version"". https://github.com/rustdesk/rustdesk/discussions/9407

## Tests

- [x] Windows, Linux, MacOS. Check and uncheck the option, click the button.
- [x] Android. Check and uncheck the option, click the button.
",closed,2024-12-04T05:23:07Z,2024-12-04T09:10:32Z,2024-12-04T09:10:32Z,,master,feat/Android_opt_check_update_on_startup,9,74,40,3,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10165
10162,Update uk.rs,,closed,2024-12-03T20:46:47Z,2024-12-04T02:31:14Z,2024-12-04T02:31:13Z,,master,ukrainian-translation,1,19,19,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10162
10161,Hard config,,closed,2024-12-03T15:13:03Z,2024-12-03T15:13:42Z,,,master,hard_config,1,7,0,4,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10161
10157,Update hu.rs,"Inserting a new line as line 60 -> ""(""Key:"", ""Kulcs:"")"". In six translations, corrections were made due to correctness of the language. Translation of two lines at the end.

Thanks!",closed,2024-12-03T10:48:59Z,2024-12-07T17:35:22Z,,,master,patch-2,1,9,8,1,1,0,,,True,https://api.github.com/repos/rustdesk/rustdesk/issues/10157
10156,1.3.3-fixed,,closed,2024-12-03T10:33:52Z,2024-12-03T10:36:02Z,,,master,1.3.3-fixed,1,1,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10156
10151,fix: support emptry folder transfer for web,See the web PR.,closed,2024-12-03T06:19:11Z,2024-12-03T06:22:20Z,2024-12-03T06:22:20Z,,master,fix/missing_funcs_for_web_bridge,3,54,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10151
10150,set id/relay server with a dialog,"https://github.com/rustdesk/rustdesk/issues/10145
https://github.com/rustdesk/rustdesk/discussions/7766

It is likely that refreshing TextFields during unlock triggers a Flutter bug, so it's best to place server configurations in a dialog.

https://github.com/flutter/flutter/issues/154072
https://github.com/flutter/flutter/issues/143047

## Video or screenshot

[desktop.webm](https://github.com/user-attachments/assets/a4d907cb-7e07-43c0-bdba-156645f7d2de)

![mobile](https://github.com/user-attachments/assets/3c6a4af2-4c73-4547-bc83-fa5fe629b0f5)
",closed,2024-12-03T06:02:36Z,2024-12-03T06:14:30Z,2024-12-03T06:14:29Z,,master,set_server_with_dialog,3,140,142,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10150
10149,move server settings to security settings,"https://github.com/rustdesk/rustdesk/issues/10145
https://github.com/rustdesk/rustdesk/discussions/7766

It is likely that refreshing TextFields during unlock triggers a Flutter bug, so it's best to place server configurations in a dialog.

https://github.com/flutter/flutter/issues/154072
https://github.com/flutter/flutter/issues/143047

## Video or screenshot

[desktop.webm](https://github.com/user-attachments/assets/994877cd-1591-43ae-bb3d-6881883642a5)

![mobile](https://github.com/user-attachments/assets/3c6a4af2-4c73-4547-bc83-fa5fe629b0f5)
",closed,2024-12-03T05:21:31Z,2024-12-03T05:51:02Z,,,master,move_server_settings_to_security_settings,3,140,141,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10149
10146,"fix: linux, window, workaround, mint, mate","https://github.com/rustdesk/rustdesk/issues/10134

## Preview

<img width=""559"" alt=""4f0664976feafad1f1d62b4c3195fe0"" src=""https://github.com/user-attachments/assets/13984f51-3498-49df-8703-b00be9a2e34d"">


<img width=""641"" alt=""356f3d0f2a24865406405e7975cbe88"" src=""https://github.com/user-attachments/assets/110e51d7-352d-4edf-b753-c38536851c1d"">


<img width=""632"" alt=""fc6a9b13dd8ed339b2733f600b0192f"" src=""https://github.com/user-attachments/assets/bc3b9f72-1e72-4a61-b49a-8ad75087b7ce"">


<img width=""629"" alt=""1767f33efb14cabc2c401f7cff7e85a"" src=""https://github.com/user-attachments/assets/66a9a2dc-5a27-40f3-a7fb-46209bfb057c"">


<img width=""549"" alt=""f59a85aa1ad7095e638fe4ebb3aaed6"" src=""https://github.com/user-attachments/assets/d10524b5-cee5-4fb4-a40d-8925c4a187ed"">


## Desc

Check if is Linuxmint(`Linuxmint 22` & `Linuxmint 21`) or Mate desktop(`Ubuntu Mate 22.04` & `Ubuntu 24.04`)

1. Add workaround to skip setting transparent for main window.
2. Do not set rounded corner for those distros.

## Note

The weird thing is that the remote window shows up without problems.

But finding a workaround to make the main window behave like a remote window was a bit difficult.


",closed,2024-12-02T14:57:59Z,2024-12-02T17:02:42Z,2024-12-02T17:02:41Z,,master,refact/linux_workaround_mint_mate,6,161,17,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10146
10144,同步,同步主分支,closed,2024-12-02T11:36:21Z,2024-12-02T11:45:08Z,,,master,master,12,6,6,6,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10144
10143,Update ru.rs,,closed,2024-12-02T10:23:32Z,2024-12-02T10:30:24Z,2024-12-02T10:30:24Z,,master,master,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10143
10142,Test,,closed,2024-12-02T09:56:57Z,2024-12-02T09:59:24Z,,,master,test,3,24,3,7,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10142
10139,win7 uses soft rendering by default,"win7 vm got black screen on remote window with texture rendering. 

## Test:
Tested  `IsWindows10OrGreater` on win7/win10/win11/windows server 2019, it's false only on win7. This function requires windows manifest, so only works on github build.",closed,2024-12-02T08:41:48Z,2024-12-02T09:10:34Z,2024-12-02T09:10:34Z,,master,win7_default_soft_render,3,38,12,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10139
10138,Update ko.rs,Update ko.rs,closed,2024-12-02T07:45:51Z,2024-12-02T07:47:23Z,2024-12-02T07:47:23Z,,master,master,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10138
10135,try fix mac textedit of server config,"https://github.com/rustdesk/rustdesk/discussions/7766

There is no basis; it simply involves placing the controller outside of the build and using a Table to replace the original layout. The UI has not changed. Submit this for the user to try.",closed,2024-12-02T04:22:12Z,2024-12-02T04:35:44Z,2024-12-02T04:35:44Z,,master,try_fix_mac_server_textedit,1,46,23,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10135
10133,"fix: macos, input, workaround sticky `Fn`","https://github.com/rustdesk/rustdesk/issues/10126

https://github.com/rustdesk-org/rdev/pull/7

https://github.com/rustdesk-org/rdev/pull/8

## Desc

1. Workaround sticky `Fn` for more keys.
2. Workaround sticky `Help`. Windows/Linux/MacOS -> MacOS, Input source 1, map mode, `Insert` -> `Help`, will cause sticky `Help`, the controlling side cannot input any key, util the controlled side click any key or click the mouse.

## Tests

- [x] Windows -> macOS (x64)
- [x] Windows -> macOS (aarch64)

## Key simulation sample code

https://stackoverflow.com/questions/74938870/sticky-fn-after-home-is-simulated-programmatically-macos

```C
#include <stdio.h>
#include <Carbon/Carbon.h>

void simulate_key(CGEventSourceRef source, CGKeyCode key, bool key_down)
{
    CGEventRef event = CGEventCreateKeyboardEvent(source, key, key_down);
    // CGEventSetFlags(event, 0);
    CGEventFlags flags = CGEventGetFlags(event);
    printf(""event flags: %llX\n"", (int64_t)flags);
    CGEventPost(kCGSessionEventTap, event);
    CFRelease(event);
    sleep(1);
}

void print33(int code) {
    CGEventSourceRef source = CGEventSourceCreate(kCGEventSourceStatePrivate);
    
    printf(""kCGEventFlagMaskAlphaShift: %llX\n"", (int64_t)kCGEventFlagMaskAlphaShift);
    printf(""kCGEventFlagMaskShift: %llX\n"", (int64_t)kCGEventFlagMaskShift);
    printf(""kCGEventFlagMaskControl: %llX\n"", (int64_t)kCGEventFlagMaskControl);
    printf(""kCGEventFlagMaskAlternate: %llX\n"", (int64_t)kCGEventFlagMaskAlternate);
    printf(""kCGEventFlagMaskCommand: %llX\n"", (int64_t)kCGEventFlagMaskCommand);
    printf(""kCGEventFlagMaskHelp: %llX\n"", (int64_t)kCGEventFlagMaskHelp);
    printf(""kCGEventFlagMaskSecondaryFn: %llX\n"", (int64_t)kCGEventFlagMaskSecondaryFn);
    printf(""kCGEventFlagMaskNumericPad: %llX\n"", (int64_t)kCGEventFlagMaskNumericPad);
    printf(""kCGEventFlagMaskNonCoalesced: %llX\n"", (int64_t)kCGEventFlagMaskNonCoalesced);
    
    // sticky Fn, after clicking Home.
    simulate_key(source, code, true);
    simulate_key(source, code, false);
    
    printf(""\n\nSimulate h after Home.\n"");
    fflush(stdout);
    
    // Simulate h. The behavior seems Fn + h.
    simulate_key(source, kVK_ANSI_H, true);
    simulate_key(source, kVK_ANSI_H, false);
    
    // So as simulating e and d...
    
    CFRelease(source);
}

int main(int argc, const char * argv[]) {
    print33(atoi(argv[1]));
    return 0;
}
```

Test with the codes: 

https://github.com/fufesou/rdev/blob/8d7cd68cea7f765428a185f2f4b9e6ce752838dc/src/macos/simulate.rs#L26

```
64,71,79,80,96,97,98,99,100,101,103,105,106,107,109,111,113,114,115,116,117,118,119,120,121,122
129,130,131,144,145
123,124,125,126(arraw keys)
```",closed,2024-12-01T14:34:16Z,2024-12-01T16:09:03Z,2024-12-01T16:09:03Z,,master,fix/macos_input_workaround_sticky_fn,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10133
10132,nothing,,closed,2024-12-01T13:11:06Z,2024-12-01T13:36:11Z,,,master,1.3.3-fixed,1,1,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10132
10128,"fix: workaround, linux window, transparent rounded corner","https://github.com/rustdesk/rustdesk/issues/10121

https://github.com/rustdesk/rustdesk/pull/7946#issuecomment-2184614815

https://github.com/flutter/flutter/issues/152154

## Preview

https://github.com/user-attachments/assets/b48c22da-f213-4f0e-bf4a-5e44650e8389

## Note

> Note GL transparency is broken in GTK 3.24.41, which is the version in Ubuntu 24.04 - see [issue](https://bugs.launchpad.net/ubuntu/+source/gtk+3.0/+bug/2077290) for when this will be fixed.

https://github.com/flutter/flutter/issues/152154#issuecomment-2297680897
",closed,2024-12-01T09:10:45Z,2024-12-01T09:19:22Z,2024-12-01T09:19:22Z,,master,fix/linux_rounded_corner,2,44,3,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10128
10124,Update lv.rs,,closed,2024-11-30T16:26:38Z,2024-11-30T16:27:39Z,2024-11-30T16:27:39Z,,master,patch-1,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10124
10120,refact: remove flutter_improved_scrolling,"## Preview

### Windows


https://github.com/user-attachments/assets/9e1c74aa-2801-46cd-abd7-eaae5dd1f64e


https://github.com/user-attachments/assets/fbe00c20-299d-4a93-ac6d-c8dcdad6016f



### Linux


https://github.com/user-attachments/assets/8bc0aacd-457f-4c4e-862d-a58433d30c3e



https://github.com/user-attachments/assets/7dbca34a-0d41-4e2d-bf02-86e61676b633



### MacOS


https://github.com/user-attachments/assets/1a731c3a-7c1e-4d5d-a9c2-0354e9322faf

https://github.com/user-attachments/assets/69344b8c-864f-4f35-ab7d-c45e930b4316



### Web

https://github.com/user-attachments/assets/9523263a-41fb-409b-91c5-03f4e59bd48c

### Mobile

Not affected.

Physical mouse scroll works as before.

## Drawback

Touchpad scroll on Windows, MacOS do not work, Linux not sure.  https://github.com/flutter/flutter/issues/159627

Touchpad scroll on Web works.
Mouse wheel scroll works.

",closed,2024-11-30T06:18:41Z,2024-11-30T07:01:44Z,2024-11-30T07:01:44Z,,master,refact/remove_flutter_improved_scrolling,9,213,348,1,1,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10120
10119,fix mediacodec patch,ensure `set_parameters_id` is not null,closed,2024-11-30T05:26:42Z,2024-11-30T05:29:03Z,2024-11-30T05:29:03Z,,master,fix,1,18,13,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10119
10117,videotoolbox/mediacodec support changing bitrate dynamically,"1. FFmpeg currently does not support dynamic bitrate adjustment for VideoToolbox and MediaCodec. Add patches to implement this feature.
2. The VideoToolbox implementation is copied from the VideoToolbox initialization function located at https://github.com/FFmpeg/FFmpeg/blob/4de67e874697271e189022b03cd619329d54603c/libavcodec/videotoolboxenc.c#L1246.
3. The JNI MediaCodec implementation is referenced from GStreamer, https://github.com/GStreamer/gstreamer/blob/f2c08099fdd10f4559449f89d172df8de7ea54e2/subprojects/gst-plugins-bad/sys/androidmedia/jni/gstamc-codec-jni.c#L757. In fact, we are using JNI codec instead of NDK codec after passing the JVM to the hardware codec, so the NDK codec bitrate change is not implemented.  Requires API 19, android 4.4, https://developer.android.com/reference/android/media/MediaCodec#PARAMETER_KEY_VIDEO_BITRATE
4. Since MediaCodec uses VBR, changes in traffic can only be observed when the bitrate change is significant.
5. Clear cache may be needed,  the ""--locked"" in CI is  because cargo-platform version 0.1.9 requires Rust version 1.78 or newer.

https://github.com/user-attachments/assets/60ce5dbb-7e9d-41e0-8662-289a402a136c


https://github.com/user-attachments/assets/838a3417-7597-4708-a600-8b9bc1bff1cf

",closed,2024-11-30T03:07:52Z,2024-11-30T03:44:52Z,2024-11-30T03:44:52Z,,master,videotoolbox_mediacodec_bitrate,7,352,11,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10117
10112,update,pull the 1.3.3,closed,2024-11-30T01:57:19Z,2024-11-30T02:02:23Z,,,master,master,2,3,3,2,1,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10112
10111,"""Untagged"" tag uses the theme accent color","
https://github.com/user-attachments/assets/0a4e48d6-dc79-46b0-8889-a42bf6413ce9

",closed,2024-11-30T00:22:58Z,2024-11-30T01:24:05Z,2024-11-30T01:24:05Z,,master,untagged,1,3,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10111
10105,Fix F-Droid build and bump Android NDK to r27c,"- **Fix fdroid build**
- **Bump Android NDK to r27c**
",closed,2024-11-29T15:35:43Z,2024-11-30T01:24:45Z,2024-11-30T01:24:45Z,,master,fdroid-buildscript,2,97,46,2,0,0,"linsui, basilgello","COMMENTED, COMMENTED",False,https://api.github.com/repos/rustdesk/rustdesk/issues/10105
10103,"fix: android, pan, canvas, remove `toInt()`","https://github.com/rustdesk/rustdesk/issues/10084

## Preview


https://github.com/user-attachments/assets/d2089d8f-5277-4e88-a96a-3d75ce379cf2

## Desc

Use double to compare the positions, to avoid `toInt()` ro `toRound()` errors.

Pan delta may be much less than `1.0`, the max scale is `1.5`, then `(dx,dy) = delta/scale`, `(_x + dx).toInt()` will be wrong.

## Tests

- [x] Android -> Windows
- [x] Windows -> Windows. Some `int`s are changed to `double`s.
",closed,2024-11-29T14:34:58Z,2024-11-29T14:39:07Z,2024-11-29T14:39:07Z,,master,fix/android_pan_canvas,2,23,27,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10103
10101,all video modify,,open,2024-11-29T10:04:50Z,,,,master,a,10,827,698,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10101
10100,video adjust,all the code for video,closed,2024-11-29T09:48:02Z,2024-11-29T10:06:51Z,,,master,zylthinking,10,827,698,23,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10100
10094,Self,,closed,2024-11-29T02:30:25Z,2024-11-29T02:31:40Z,,,master,self,1,27,4,4,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10094
10086,"fix: repeated keys, linux as controlled side","https://github.com/rustdesk/rustdesk/issues/6793
https://github.com/rustdesk/rustdesk/issues/10052

Remove workaround on the controlling side. Use ""press"" as the click flag, like ""Legacy mode"".

**This PR breaks web version**. The PR of the web version must be merged first. Or there will generate double letters on the controlled side when connecting from web.

## Tests

- [ ] Windows, flutter keyboard, `AltGr` is wrong.
- [ ] Web js listener, `AltGr` key generates `ControlLeft` + `AltGraph` events. Then `AltGr` + `E` cannot generate `€` on the controlled side. No proper workaround for now.

- [x] Windows -> 
  - [x] Linux x11
    - [x] Input Source 1 - Map mode
      - [x] Character keys
          - [x] en-US -> en-US
          - [x] en-US -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
          - [x] fr-FR -> en-US
          - [x] fr-FR -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
      - [x] Shortcuts
      - [x] System keys
      - [x] Navigation keys
      - [x] Function keys
      - [x] Numeric keypad
      - [x] Lock keys
      - [x] Long press. https://github.com/rustdesk/rustdesk/issues/6793
    - [x] Input Source 1 - Translate mode
      - [x] Character keys
          - [x] en-US -> en-US
          - [x] en-US -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
          - [x] fr-FR -> en-US
          - [x] fr-FR -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
      - [x] Shortcuts
      - [x] System keys
      - [x] Navigation keys
      - [x] Function keys
      - [x] Numeric keypad
      - [x] Lock keys
      - [x] Long press. https://github.com/rustdesk/rustdesk/issues/6793
    - [x] Input Source 2 - Map mode
      - [x] Character keys
          - [x] en-US -> en-US
          - [x] en-US -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
          - [x] fr-FR -> en-US
          - [x] fr-FR -> fr-FR
            - [x] Normal keys
            - [x] Dead keys
      - [x] Shortcuts
      - [x] Navigation keys
      - [x] Function keys
      - [x] Numeric keypad
      - [x] Lock keys
      - [x] Long press. https://github.com/rustdesk/rustdesk/issues/6793
  - [x] Linux Wayland(rdp)
    - [x] Input Source 1 - Map mode
      - [x] Character keys
          - [x] en-US -> en-US
          - [x] en-US -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
          - [x] fr-FR -> en-US
          - [x] fr-FR -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
      - [x] Shortcuts
      - [x] Navigation keys
      - [x] Function keys
      - [x] Numeric keypad
      - [x] Long press. https://github.com/rustdesk/rustdesk/issues/6793
    - [x] Input Source 2 - Map mode
      - [x] Character keys
          - [x] en-US -> en-US
          - [x] en-US -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
          - [x] fr-FR -> en-US
          - [x] fr-FR -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
      - [x] Shortcuts
      - [x] Navigation keys
      - [x] Function keys
      - [x] Numeric keypad
      - [x] Long press. https://github.com/rustdesk/rustdesk/issues/6793
  - [x] Linux Wayland(uinput)
    - [x] Input Source 1 - Map mode
      - [x] Character keys
          - [x] en-US -> en-US
          - [x] en-US -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
          - [x] fr-FR -> en-US
          - [x] fr-FR -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
      - [x] Shortcuts
      - [x] Navigation keys
      - [x] Function keys
      - [x] Numeric keypad
      - [x] Lock keys
      - [x] Long press. https://github.com/rustdesk/rustdesk/issues/6793
    - [x] Input Source 2 - Map mode
      - [x] Character keys
          - [x] en-US -> en-US
          - [x] en-US -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
          - [x] fr-FR -> en-US
          - [ ] fr-FR -> fr-FR
            - [x] Normal keys
            - [x] Dead keys
      - [x] Shortcuts
      - [x] Navigation keys
      - [x] Function keys
      - [x] Numeric keypad
      - [x] Lock keys
      - [x] Long press. https://github.com/rustdesk/rustdesk/issues/6793
- [x] Linux x11
  - [x] Linux x11
    - [x] Input Source 1 - Map mode
      - [x] Character keys
          - [x] en-US -> en-US
          - [x] en-US -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
          - [x] fr-FR -> en-US
          - [x] fr-FR -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
      - [x] Shortcuts
      - [x] System keys
      - [x] Navigation keys
      - [x] Function keys
      - [x] Numeric keypad
      - [x] Lock keys
      - [x] Long press. https://github.com/rustdesk/rustdesk/issues/6793
    - [x] Input Source 1 - Translate mode
      - [x] Character keys
          - [x] en-US -> en-US
          - [x] en-US -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
          - [x] fr-FR -> en-US
          - [x] fr-FR -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
      - [x] Shortcuts
      - [x] System keys
      - [x] Navigation keys
      - [x] Function keys
      - [x] Numeric keypad
      - [x] Lock keys
      - [x] Long press. https://github.com/rustdesk/rustdesk/issues/6793
    - [x] Input Source 2 - Map mode
      - [x] Character keys
          - [x] en-US -> en-US
          - [x] en-US -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
          - [x] fr-FR -> en-US
          - [x] fr-FR -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
      - [x] Shortcuts
      - [x] Navigation keys
      - [x] Function keys
      - [x] Numeric keypad
      - [x] Lock keys
      - [x] Long press. https://github.com/rustdesk/rustdesk/issues/6793
  - [x] Linux Wayland(rdp)
    - [x] Input Source 1 - Map mode
      - [x] Character keys
          - [x] en-US -> en-US
          - [x] en-US -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
          - [x] fr-FR -> en-US
          - [x] fr-FR -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
      - [x] Shortcuts
      - [x] Navigation keys
      - [x] Function keys
      - [x] Numeric keypad
      - [x] Long press. https://github.com/rustdesk/rustdesk/issues/6793
    - [x] Input Source 2 - Map mode
      - [x] Character keys
          - [x] en-US -> en-US
          - [x] en-US -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
          - [x] fr-FR -> en-US
          - [x] fr-FR -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
      - [x] Shortcuts
      - [x] Navigation keys
      - [x] Function keys
      - [x] Numeric keypad
      - [x] Long press. https://github.com/rustdesk/rustdesk/issues/6793
  - [x] Linux Wayland(uinput)
    - [x] Input Source 1 - Map mode
      - [x] Character keys
          - [x] en-US -> en-US
          - [x] en-US -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
          - [x] fr-FR -> en-US
          - [x] fr-FR -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
      - [x] Shortcuts
      - [x] Navigation keys
      - [x] Function keys
      - [x] Numeric keypad
      - [x] Lock keys
      - [x] Long press. https://github.com/rustdesk/rustdesk/issues/6793
    - [x] Input Source 2 - Map mode
      - [x] Character keys
          - [x] en-US -> en-US
          - [x] en-US -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
          - [x] fr-FR -> en-US
          - [x] fr-FR -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
      - [x] Shortcuts
      - [x] Navigation keys
      - [x] Function keys
      - [x] Numeric keypad
      - [x] Lock keys
      - [x] Long press. https://github.com/rustdesk/rustdesk/issues/6793
- [ ] MacOS
  - [x] Linux x11
    - [x] Input Source 1 - Map mode
      - [x] Character keys
          - [x] en-US -> en-US
          - [x] en-US -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
          - [x] fr-FR -> en-US
          - [x] fr-FR -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
      - [x] Shortcuts
      - [x] System keys
      - [x] Navigation keys
      - [x] Function keys
      - [x] Numeric keypad
      - [x] Lock keys
      - [x] Long press. https://github.com/rustdesk/rustdesk/issues/6793
    - [ ] Input Source 1 - Translate mode
      - [ ] Character keys
          - [x] en-US -> en-US
          - [x] en-US -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
          - [x] fr-FR -> en-US
            - [ ] Dead keys
          - [x] fr-FR -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [ ] Dead keys
      - [x] Shortcuts
      - [x] System keys
      - [x] Navigation keys
      - [x] Function keys
      - [ ] Lock keys
      - [x] Long press. https://github.com/rustdesk/rustdesk/issues/6793
    - [x] Input Source 2 - Map mode
      - [x] Character keys
          - [x] en-US -> en-US
          - [x] en-US -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
          - [x] fr-FR -> en-US
          - [x] fr-FR -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
      - [x] Shortcuts
      - [x] Navigation keys
      - [x] Function keys
      - [x] Lock keys
      - [x] Long press. https://github.com/rustdesk/rustdesk/issues/6793
  - [x] Linux Wayland(rdp)
    - [x] Input Source 2 - Map mode
      - [x] Character keys
          - [x] en-US -> en-US
          - [x] en-US -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
          - [x] fr-FR -> en-US
          - [x] fr-FR -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
      - [x] Shortcuts
      - [x] Navigation keys
      - [x] Function keys
      - [x] Long press. https://github.com/rustdesk/rustdesk/issues/6793
  - [x] Linux Wayland(uinput)
    - [x] Input Source 1 - Map mode
      - [x] Character keys
          - [x] en-US -> en-US
          - [x] en-US -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
          - [x] fr-FR -> en-US
          - [x] fr-FR -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
      - [x] Shortcuts
      - [x] Navigation keys
      - [x] Function keys
      - [x] Lock keys
      - [x] Long press. https://github.com/rustdesk/rustdesk/issues/6793
    - [x] Input Source 2 - Map mode
      - [x] Character keys
          - [x] en-US -> en-US
          - [x] en-US -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
          - [x] fr-FR -> en-US
          - [x] fr-FR -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
      - [x] Shortcuts
      - [x] Navigation keys
      - [x] Function keys
      - [x] Lock keys
      - [x] Long press. https://github.com/rustdesk/rustdesk/issues/6793
- [x] Web -> 
  - [x] Linux x11
    - [x] Input Source 1 - Map mode
      - [x] Character keys
          - [x] en-US -> en-US
          - [x] en-US -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
          - [x] fr-FR -> en-US
          - [x] fr-FR -> fr-FR
            - [x] Normal keys
            - [x] Dead keys
      - [x] Shortcuts
      - [x] Navigation keys
      - [x] Function keys
      - [x] Numeric keypad
      - [x] Lock keys
      - [x] Long press. https://github.com/rustdesk/rustdesk/issues/6793
    - [x] Input Source 1 - Translate mode
      - [x] Character keys
          - [x] en-US -> en-US
          - [x] en-US -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
          - [x] fr-FR -> en-US
          - [x] fr-FR -> fr-FR
            - [x] Normal keys
            - [x] Dead keys
      - [x] Shortcuts
      - [x] Navigation keys
      - [x] Function keys
      - [x] Numeric keypad
      - [x] Lock keys
      - [x] Long press. https://github.com/rustdesk/rustdesk/issues/6793
    - [x] Input Source 2 - Map mode
      - [x] Character keys
          - [x] en-US -> en-US
          - [x] en-US -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
          - [x] fr-FR -> en-US
          - [x] fr-FR -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
      - [x] Shortcuts
      - [x] Navigation keys
      - [x] Function keys
      - [x] Numeric keypad
      - [x] Lock keys
      - [x] Long press. https://github.com/rustdesk/rustdesk/issues/6793
  - [x] Linux Wayland(rdp)
    - [x] Input Source 1 - Map mode
      - [x] Character keys
          - [x] en-US -> en-US
          - [x] en-US -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
          - [x] fr-FR -> en-US
          - [x] fr-FR -> fr-FR
            - [x] Normal keys
            - [x] Dead keys
      - [x] Shortcuts
      - [x] Navigation keys
      - [x] Function keys
      - [x] Numeric keypad
      - [x] Long press. https://github.com/rustdesk/rustdesk/issues/6793
    - [x] Input Source 2 - Map mode
      - [x] Character keys
          - [x] en-US -> en-US
          - [x] en-US -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
          - [x] fr-FR -> en-US
          - [x] fr-FR -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
      - [x] Shortcuts
      - [x] Navigation keys
      - [x] Function keys
      - [x] Numeric keypad
      - [x] Long press. https://github.com/rustdesk/rustdesk/issues/6793
  - [x] Linux Wayland(uinput)
    - [x] Input Source 1 - Map mode
      - [x] Character keys
          - [x] en-US -> en-US
          - [x] en-US -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
          - [x] fr-FR -> en-US
          - [x] fr-FR -> fr-FR
            - [x] Normal keys
            - [x] Dead keys
      - [x] Shortcuts
      - [x] Navigation keys
      - [x] Function keys
      - [x] Numeric keypad
      - [x] Lock keys
      - [x] Long press. https://github.com/rustdesk/rustdesk/issues/6793
    - [x] Input Source 2 - Map mode
      - [x] Character keys
          - [x] en-US -> en-US
          - [x] en-US -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
          - [x] fr-FR -> en-US
          - [x] fr-FR -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
      - [x] Shortcuts
      - [x] Navigation keys
      - [x] Function keys
      - [x] Numeric keypad
      - [x] Lock keys
      - [x] Long press. https://github.com/rustdesk/rustdesk/issues/6793
- [x] Android -> 
  - [ ] System keys (Alt + Tab, Meta)
  - [x] Linux x11
    - [x] Map mode
      - [x] Character keys
          - [x] -> en-US
          - [x] -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
      - [x] Shortcuts
      - [x] Navigation keys
      - [x] Function keys
      - [x] Numeric keypad
      - [x] Lock keys
      - [x] Long press. https://github.com/rustdesk/rustdesk/issues/6793
  - [x] Linux Wayland(rdp)
    - [x] Map mode
      - [x] Character keys
          - [x] -> en-US
          - [x] -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
      - [x] Shortcuts
      - [x] Navigation keys
      - [x] Function keys
      - [x] Numeric keypad (**NumLock does not work**)
      - [x] Long press. https://github.com/rustdesk/rustdesk/issues/6793
  - [x] Linux Wayland(uinput)
    - [x] Map mode
      - [x] Character keys
          - [x] -> en-US
          - [x] -> fr-FR
            - [x] Normal keys
            - [x] AltGr keys
            - [x] Dead keys
      - [x] Shortcuts
      - [x] Navigation keys
      - [x] Function keys
      - [x] Numeric keypad
      - [x] Lock keys
      - [x] Long press. https://github.com/rustdesk/rustdesk/issues/6793


## Note

There's also an issue of flutter(3.24.5) key event on macOS.
RustDesk cannot listen the key events when meeting the following logs.
The app must be restarted to work again.

But it's hard to reproduce.

```
Another exception was thrown: A KeyUpEvent is dispatched, but the state shows that the physical key is pressed on a different logical key. If this
occurs in real application, please report this bug to Flutter. If this occurs in unit tests, please ensure that simulated events follow Flutter's event
model as documented in `HardwareKeyboard`. This was the event: KeyUpEvent#5ce17(physicalKey: PhysicalKeyboardKey#7b545(usbHidUsage: ""0x00070004"",
debugName: ""Key A""), logicalKey: LogicalKeyboardKey#43f11(keyId: ""0x1400070004"", keyLabel: """", debugName: ""Key with ID 0x01400070004""), character:
null, timeStamp: 5:23:37.145293) and the recorded logical key LogicalKeyboardKey#12bb1(keyId: ""0x00000061"", keyLabel: ""A"", debugName: ""Key A"")
```

## TODOs

macOS -> RustDesk, ""Translate mode"", ""CapsLock"" and ""Dead keys"", will file another two separate PRs.",closed,2024-11-28T13:12:34Z,2024-12-06T10:22:13Z,,,master,fix/linux_repeated_keys,5,55,38,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10086
10076,Update tw.rs,,closed,2024-11-27T16:07:01Z,2024-11-27T16:10:47Z,2024-11-27T16:10:47Z,,master,patch-1,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10076
10075,Update fr.rs to fix the install tip wall of text,"Discussed in https://github.com/rustdesk/rustdesk/discussions/10074

Changed it to
`RustDesk n'est pas installé, ce qui peut limiter son utilisation à cause de l'UAC. Cliquez ci-dessous pour l'installer.`

Literally:
`RustDesk is not installed, which may limit its use due to UAC. Click below to install it.`",closed,2024-11-27T14:58:51Z,2024-11-27T15:00:41Z,2024-11-27T15:00:41Z,,master,patch-2,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10075
10070,"update flutter texture rgba renderer plugin, remove switch rgba","https://github.com/rustdesk-org/flutter_texture_rgba_renderer/pull/1
To render RGBA textures, macOS requires BGRA format, while Windows and Linux use RGBA format. Convert to the target format directly, and make rgba image render uses the same format.
# Test

https://github.com/user-attachments/assets/c0e3f1b3-dff2-4ede-bcc0-595bfe9bfc1a

https://github.com/user-attachments/assets/ab7090c8-d5d0-4baa-aa42-77790e84c437

[linux.webm](https://github.com/user-attachments/assets/fb0493cb-d54a-4861-b062-f403d98bf7f5)

https://github.com/user-attachments/assets/81142357-0e34-4e4d-b310-64f3ba79bdd5

https://github.com/user-attachments/assets/44f28175-38bf-4b9c-8e6b-fe86a7b3e774

windows debug program, 1080p

before:
![before](https://github.com/user-attachments/assets/987a3e56-20f2-49a8-a8b5-d30ea7fd6007)

after:
![afterpng](https://github.com/user-attachments/assets/1c5b27f2-2a5a-4e97-b727-3836e0f35b99)
",closed,2024-11-27T04:22:00Z,2024-11-30T04:19:42Z,2024-11-30T04:19:42Z,,master,update_flutter_rgba_texture_render,4,19,7,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10070
10069,Update README-ZH.md,Modify Alibaba Cloud apt source，163 seems to be very slow when trying it out,closed,2024-11-27T02:36:24Z,2024-11-27T02:47:10Z,2024-11-27T02:47:10Z,,master,master,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10069
10068,"feat: mobile, key help tool, more keys","Related https://github.com/rustdesk/rustdesk/discussions/6918

## Preview

https://github.com/user-attachments/assets/92e875d2-e786-40f9-b2a4-6faa55fca024


https://github.com/user-attachments/assets/aeffda59-8391-490c-911c-a1c5a31092ec



https://github.com/user-attachments/assets/9dcaf542-1519-48ac-b20e-16387c9338df


## Desc

1. Add `PrtScr`, `ScrollLock`, `Pause`, `Menu`, `Enter` virtual keys on mobile.
2. Fix some key mapping errors.

## Tests

- [x] Android -> Windows. `Enter`, `PrtScr`, `ScrollLock`(Excel), `Pause`, `Menu`
- [x] Android -> Linux (x11, Wayland). `Enter`, `PrtScr`, `ScrollLock`, `Pause`, `Menu`
- [x] Android -> MacOS. `Enter`
- [x] Android -> Android. `Enter`
",closed,2024-11-27T01:12:10Z,2024-11-28T16:56:38Z,2024-11-28T16:56:38Z,,master,feat/mobile_key_help_tool_vk_enter,4,28,3,4,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10068
10067,Italian language update,"@rustdesk 

Please merge. Thanks.",closed,2024-11-26T20:10:54Z,2024-11-26T23:37:49Z,2024-11-26T23:37:49Z,,master,master,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10067
10064,Fix/android keyboard map mode workaround,"1. Disable soft keyboard on remote pate for Android. Workaround of this issue https://github.com/flutter/flutter/issues/159384

```
gFFI.invokeMethod(""enable_soft_keyboard"", false);
```

There're four case to disable soft keyboard.
  1. In `gFFI.imageModel.addCallbackOnFirstImage()`, disable if soft keyboard is not visible.
  2. The other three are after showing `CustomAlertDialog`. The soft keyboard should not show at that time.

`gFFI.invokeMethod(""enable_soft_keyboard"", true);` will be called on clicking the keyboard icon.

2. Clear first image callbacks on disconnect. Mobile use `gFFI`, the callbacks should be clear.

```
imageModel.callbacksOnFirstImage.clear();
```

## Tests

- [x] Android swiftkey, physical keyboard, soft keyboard
- [x] Android gboard, physical keyboard, soft keyboard

## Known issue

https://github.com/flutter/flutter/issues/157279
",closed,2024-11-26T12:26:13Z,2024-11-26T12:33:54Z,2024-11-26T12:33:54Z,,master,fix/Android_keyboard_map_mode_workaround,2,25,3,3,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10064
10063,"add ""Untagged"" to filter addressbook peers without tags","The result of a ""Untagged"" union with normal tags, still allows normal tags to perform union or intersection operations. When selecting a tag, the client filters peers from previously pulled data.


https://github.com/user-attachments/assets/18b4b0a9-0def-4401-97ff-0751641e375e


Ignore cases where there is an existing tag named ""Untagged"".


https://github.com/user-attachments/assets/b9c89a22-00e7-4b71-b183-a4fe6449a6fd


",closed,2024-11-26T10:21:59Z,2024-11-26T12:35:17Z,2024-11-26T12:35:17Z,,master,no-tag,30,69,18,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10063
10060,fix: mobile autocomplete options,"Workaround https://github.com/flutter/flutter/issues/157244

Desktop has already applied the workaround.

## Preview

https://github.com/user-attachments/assets/fd065460-2103-4477-8013-55636dddb886

https://github.com/user-attachments/assets/b90eb9d7-c10c-4943-988e-c533cb66ba2a

",closed,2024-11-26T07:43:39Z,2024-11-26T08:24:51Z,2024-11-26T08:24:51Z,,master,fix/mobile_audocomplete_options,1,8,3,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10060
10056,Update Ukrainian UI translation,,closed,2024-11-25T20:25:03Z,2024-11-26T01:51:27Z,2024-11-26T01:51:27Z,,master,master,1,9,9,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10056
10055,Update es.rs,New term added,closed,2024-11-25T15:45:07Z,2024-11-25T15:46:28Z,2024-11-25T15:46:28Z,,master,master,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10055
10054,"fix: Android 29, crash on restart and reconn","https://github.com/rustdesk/rustdesk/issues/10045

## Preview

https://github.com/user-attachments/assets/515df608-55f5-426c-ac0f-f5bdf679242e

## Desc

The cause of the crash is not yet clear.

The log prints the following lines before crash. It seems to be related to Flutter.

```
E iez.flutter_hb: JNI ERROR (app bug): attempt to use stale Global 0x2936 (should be 0x2932)
F iez.flutter_hb: java_vm_ext.cc:570] JNI DETECTED ERROR IN APPLICATION: use of deleted global reference 0x2936
```

## Tests

Android -> Linux, audio.
",closed,2024-11-25T13:44:21Z,2024-11-25T13:49:10Z,2024-11-25T13:49:10Z,,master,fix/android_crash_on_reconn,3,9,40,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10054
10053,android wait 3s for isStart flag,"The normal process is that `startCapture` and `VideoService::run` run in parallel,  the `run` function waits for startCapture to complete, then sets the scale, and subsequently calls `stopCapture` and `startCapture`. If the `run` function does not wait long enough, `startCapture` initializes the surface with the original width and height, but the `start` flag is still false, meaning it can't call `stopCapture` and `startCapture` . This results in only capturing the upper-left portion of the virtual display.


Bug:

![top-left](https://github.com/user-attachments/assets/6e652509-1607-45a2-88da-e36475c1e280)

Set it wait 150ms to make it easy to reproduce, usually `startCapture`  takes no more than 400ms

![wait_startCapture_timeout](https://github.com/user-attachments/assets/c4c224cd-2b66-4ccf-a654-7081a20b19d9)

Fix: wait at most 3000ms
![startCapture_takes_300ms](https://github.com/user-attachments/assets/7d6b9655-3fed-401b-945e-31bad57907fa)
",closed,2024-11-25T13:43:14Z,2024-11-25T13:45:58Z,2024-11-25T13:45:58Z,,master,opt_android_check_scale,1,3,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10053
10051,更改設定,,closed,2024-11-25T12:00:34Z,2024-11-25T12:00:38Z,,,master,Customized,1,7,3,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10051
10042,fix aom pts,"The old aom pts/duration should be multiplied by 90, use timebase 1/1000 like other codecs, no big differences but should fix it.

webrtc:
![1732503339941](https://github.com/user-attachments/assets/1f9cda25-eec1-404a-9986-e746c4b2775b)


https://github.com/user-attachments/assets/4a7d4b28-03b5-4fdc-8b4f-9a1e2744cad2

https://github.com/user-attachments/assets/1cb185cf-04e9-41f2-aff4-18303e1653fd

",closed,2024-11-25T03:07:25Z,2024-11-25T03:09:17Z,2024-11-25T03:09:17Z,,master,fix_aom_pts,1,7,6,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10042
10040,feat: update build_fdroid.sh,"Generate the bridge files in `prebuild)` step.

`./flutter/build_fdroid.sh 1.2.2 123 x86_64 prebuild` works for me after commenting out some unnecessary ENV preparation steps.",closed,2024-11-25T02:32:06Z,2024-11-25T03:12:43Z,2024-11-25T03:12:43Z,,master,feat/updte_build_fdroid.sh,1,56,54,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10040
10035,install vaapi dependencies before vcpkg installs ffmpeg,"https://github.com/rustdesk/rustdesk/discussions/9532

linux vaapi encoding/decoding lost since installing ffmpeg with vcpkg

Before:
![before](https://github.com/user-attachments/assets/14023fd9-927e-4a43-ad90-e7e8d5786da0)

After:
![after](https://github.com/user-attachments/assets/88a2ef2f-eebc-4b52-aa22-8c1d3a0aced9)
",closed,2024-11-24T12:59:49Z,2024-11-24T13:07:04Z,2024-11-24T13:07:04Z,,master,fix_missing_vaapi,1,1,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10035
10032,config.rs,,closed,2024-11-23T16:32:17Z,2024-11-24T00:18:59Z,,,master,patch-1,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10032
10031,config.rs,,closed,2024-11-23T16:31:41Z,2024-11-24T00:19:15Z,,,master,patch-2,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10031
10029,Update config.toml,,closed,2024-11-23T14:54:38Z,2024-11-23T14:54:43Z,2024-11-23T14:54:43Z,,master,rustdesk-patch-1,1,2,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10029
10028,try fix mac ci,"arm:  https://github.com/21pages/rustdesk/actions/runs/11987835012/job/33422490625
         https://github.com/21pages/rustdesk/actions/runs/11987724609/job/33422280935
x86 : https://github.com/21pages/rustdesk/actions/runs/11987835012/job/33422490380
        https://github.com/21pages/rustdesk/actions/runs/11987724609/job/33422280659",closed,2024-11-23T14:49:46Z,2024-11-23T14:56:32Z,,,master,mac_ci,1,2,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10028
10027,20241123,,closed,2024-11-23T14:09:09Z,2024-11-23T14:09:50Z,,,master,master,2,3,3,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10027
10025,"feat: macos aarch64, audio, loopback","## Preview

https://github.com/user-attachments/assets/0f073cfc-7d2a-4be9-b2c8-1ae21b27f9b1

## Desc

1. Add audio loopback for macos aarch64. Change `MACOSX_DEPLOYMENT_TARGET` to `12.3`.
```
          if [ ""${{ matrix.job.target }}"" = ""aarch64-apple-darwin"" ]; then
            MIN_MACOS_VERSION=""12.3""
            sed -i -e ""s/MACOSX_DEPLOYMENT_TARGET\=[0-9]*.[0-9]*/MACOSX_DEPLOYMENT_TARGET=${MIN_MACOS_VERSION}/"" build.py
            sed -i -e ""s/platform :osx, '.*'/platform :osx, '${MIN_MACOS_VERSION}'/"" flutter/macos/Podfile
            sed -i -e ""s/osx_minimum_system_version = \""[0-9]*.[0-9]*\""/osx_minimum_system_version = \""${MIN_MACOS_VERSION}\""/"" Cargo.toml
            sed -i -e ""s/MACOSX_DEPLOYMENT_TARGET = [0-9]*.[0-9]*;/MACOSX_DEPLOYMENT_TARGET = ${MIN_MACOS_VERSION};/"" flutter/macos/Runner.xcodeproj/project.pbxproj
```
2. ""System sound"" is the default audio.

## Tests

- [x] macos 15.1, m1. Controlled side, ""System sound"". Voice call options (controlling and controlled side)
- [x] macos 12.7.3, x86_64. Controlled side, no ""System sound""
- [x] macos 11.7.10, x86_64. The client is not started, because the server ipc cannot be started. `ScreenCaptureKit` does not affect. ",closed,2024-11-23T07:56:09Z,2024-11-23T10:41:27Z,2024-11-23T10:41:27Z,,master,feat/macos_audio_loopback,9,105,21,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10025
10024,fix hwcodec ram quality change not work,"
This happens on Windows, linux nvenc, not on Mac, Android.


https://github.com/user-attachments/assets/72d20bb8-6160-4d11-8b98-567ec1dbe7bf


https://github.com/user-attachments/assets/7c10c904-de7d-467a-8134-caf112f77765

",closed,2024-11-23T07:15:55Z,2024-11-23T08:36:13Z,2024-11-23T08:36:13Z,,master,fix_hwcodec_ram_changing_quality,2,3,3,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10024
10023,config.rs,,closed,2024-11-23T05:48:11Z,2024-11-23T05:50:35Z,,,master,patch-1,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10023
10020,fix: ci macos,"https://github.com/fufesou/rustdesk/actions/runs/11977265515/job/33394838861

![image](https://github.com/user-attachments/assets/e159f7ef-6f8d-43cf-8c3c-d4edbcb49e48)

## Desc

`macos-latset` sometimes uses `macos-14.7.1`, which may have `pkg-config` installed. Then `brew intall pkg-config` will fail.

Note: `brew list pkg-config` shows `Error: No such keg: /opt/homebrew/Cellar/pkg-config`.
So we can only uses `command -v pkg-config` or `pkg-config --version` to check if `pkg-config` is installed.

",closed,2024-11-22T23:48:11Z,2024-11-23T00:38:30Z,2024-11-23T00:38:30Z,,master,fix/ci_macos,1,7,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10020
10019,Updated Polish translation,Small update of some files.,closed,2024-11-22T20:53:11Z,2024-11-23T00:41:25Z,2024-11-23T00:41:25Z,,master,master,2,5,1,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10019
10012,fix record removing little file,"1. Set non-key frame's pts to recorder causing the invalid file, when `inner` is created, pts is none.
2. ffmpeg muxer uses the file before drop, webm doesn't have this problem.

before:
![9b915a65019dc588c1e6b6555b3bc4d](https://github.com/user-attachments/assets/09c08eac-ccaa-44a1-acc4-9780f771e9f9)
after:
![fb013f6e243c4af85ddad838b7dbd68](https://github.com/user-attachments/assets/99e6deb9-bcbe-4b5d-a427-f71170c92184)
",closed,2024-11-22T08:57:59Z,2024-11-22T09:19:22Z,2024-11-22T09:19:22Z,,master,fix_record_remove_little_file,1,27,10,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10012
10001,Update mem.rs,,closed,2024-11-21T12:43:31Z,2024-11-21T12:49:18Z,,,master,sas-china-rustdesk-1.3.3,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/10001
9999,Zhousai20 patch 1,,closed,2024-11-21T11:51:27Z,2024-11-21T11:53:17Z,,,master,zhousai20-patch-1,3,13,1,3,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9999
9997,Update nl.rs,,closed,2024-11-21T09:38:05Z,2024-11-21T11:12:25Z,2024-11-21T11:12:25Z,,master,patch-6,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9997
9993,Create empty dir on send files in local,,closed,2024-11-21T03:45:07Z,2024-11-23T15:09:12Z,2024-11-23T15:09:11Z,,master,empty_folder,13,312,7,2,11,0,"21pages, zuiyu1998, 21pages, zuiyu1998, 21pages, zuiyu1998, zuiyu1998, 21pages, zuiyu1998, 21pages, zuiyu1998, 21pages, 21pages, 21pages, zuiyu1998, 21pages, zuiyu1998, 21pages","CHANGES_REQUESTED, COMMENTED, CHANGES_REQUESTED, COMMENTED, COMMENTED, COMMENTED, COMMENTED, COMMENTED, COMMENTED, CHANGES_REQUESTED, COMMENTED, APPROVED, COMMENTED, CHANGES_REQUESTED, COMMENTED, COMMENTED, COMMENTED, APPROVED",False,https://api.github.com/repos/rustdesk/rustdesk/issues/9993
9987,Update client.rs,,closed,2024-11-20T12:00:46Z,2024-11-20T12:07:18Z,,,master,master,1,1,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9987
9986,fix mis-align problem when converting &[u8] to &[f32],fix mis-align problem when converting &[u8] to &[f32] using a new function added to hbb_common,closed,2024-11-20T11:49:35Z,2024-11-21T05:36:11Z,2024-11-21T05:36:11Z,,master,pr,3,34,0,13,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9986
9985,add env VCPKG_INSTALLED_ROOT,"add env VCPKG_INSTALLED_ROOT

VCPKG_INSTALLED_ROOT used with vcpkg.json can be used with compiled dependencies in the project directory to make it easier to lock down versions",closed,2024-11-20T10:24:31Z,2024-11-20T11:41:30Z,2024-11-20T11:41:30Z,,master,feat/add-env,2,10,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9985
9982,Update common.rs,,closed,2024-11-20T08:21:26Z,2024-11-20T09:43:42Z,,,master,patch-1,1,1,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9982
9979,change name,,closed,2024-11-20T04:27:55Z,2024-11-20T04:28:22Z,,,master,try1,2,4,4,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9979
9978,Sciterjs,,closed,2024-11-20T04:19:57Z,2024-11-20T04:20:38Z,,,sciterjs,sciterjs,1,2,2,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9978
9976,"A=b, A case insensitive","
https://github.com/user-attachments/assets/bee83e98-9fa1-427f-81f2-1e0bbcf27839


https://github.com/user-attachments/assets/2bd1914a-ab24-45f8-a926-6df17d8bd95e

",closed,2024-11-20T03:39:30Z,2024-11-20T11:44:24Z,2024-11-20T11:44:24Z,,master,case-insensitive,5,37,20,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9976
9975,Update de.rs,,closed,2024-11-19T22:13:42Z,2024-11-20T11:41:43Z,2024-11-20T11:41:43Z,,master,patch-37,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9975
9972,fix: privacy mode 2,"https://github.com/rustdesk/rustdesk/issues/9110

`ChangeDisplaySettingsExW()` returns `-2` probably because some displays do not support `1920x1080`.

Anyway, changing the display resolutions is a bad idea.


",closed,2024-11-19T09:27:29Z,2024-11-19T09:29:28Z,2024-11-19T09:29:28Z,,master,fix/privacy_mode2_not_change_resolutions,1,6,5,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9972
9971,Master-erbao,for myself,closed,2024-11-19T08:16:27Z,2024-11-19T09:10:43Z,,,master,master,1,1,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9971
9968,seperate video decoding thread for each display,"1. Separate Video Decoding Thread for Each Display
  * Adjust FPS control for seperate video decoding thread, same logic as before, still, not considering network delay, only considering decode speed and queue length. . The controlled side can consider the auto fps as max decode fps.
fps and video queue length. The controlled side can consider the auto fps as max decode fps.
  * Remove refresh other h265 video in https://github.com/rustdesk/rustdesk/pull/9960 temporarily
2. Fix Decode Errors When Clearing the Queue
  * Previously, on-flight frames after clearing the queue could not be decoded successfully. This issue can be resolved by setting a discard_queue flag when sending a refresh message. The flag will be reset upon receiving a keyframe.
  * If a keyframe of recording(not first frame) is in the discard queue, a decode error may happens, because it's not a idr frame. If decode error happens, the left frames will be discarded.
3. Fix video format is ""-"" when start another individual window.
4. Fix keyframe interval when auto record outgoing sessions, the record status is not sent to the controlled side, so the video only contains one keyframe, causing unable to fast forward video.



https://github.com/user-attachments/assets/bad84f75-1c70-4aae-9769-5108e0eb474b

Clear queue before
![db8ea95e02c1b6303f97959436e2462](https://github.com/user-attachments/assets/aa16c873-fe35-4324-a670-be632cb5e23e)


Clear queue after
![a8437ba1dd9e2ae0956a718860b0909](https://github.com/user-attachments/assets/8588abbe-e28c-4899-a083-536bc22029ca)



",closed,2024-11-19T06:29:09Z,2024-11-21T16:02:25Z,2024-11-21T16:02:25Z,,master,seperate_video_thread,4,253,299,3,2,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9968
9966,"fix: android w&h, refresh when no connection","Always refresh `w&h` on rotating screen.

## issue

TODO in https://github.com/rustdesk/rustdesk/pull/9786

## Desc

`updateScreenInfo()` will be called after rotating the screen.
But if `isStart` is false, the `w&h` will not be refreshed in rust side.

1. Rotate the screen (Android) when there's no connection
2. Connect to Android

Then the `w&h` are wrong.
",closed,2024-11-19T02:18:20Z,2024-11-19T07:03:00Z,2024-11-19T07:03:00Z,,master,fix/android_rotate_when_no_connection,1,2,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9966
9965,"fix: android w&h, refresh when no connection","Always refresh `w&h` on rotating screen.

## issue

TODO in https://github.com/rustdesk/rustdesk/pull/9786

## Desc

`updateScreenInfo()` will be called after rotating the screen.
But if `isStart` is false, the `w&h` will not be refreshed in rust side.

1. Rotate the screen (Android) when there's no connection
2. Connect to Android

Then the `w&h` are wrong.
",closed,2024-11-19T01:53:55Z,2024-11-19T01:56:52Z,,,master,fix/android_rotate_when_no_connection,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9965
9962,Update ru.rs,,closed,2024-11-18T17:21:34Z,2024-11-19T00:15:51Z,2024-11-19T00:15:51Z,,master,master,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9962
9961,Update Italian language,"@rustdesk 

Please merge. Thanks.",closed,2024-11-18T16:56:30Z,2024-11-19T00:15:38Z,2024-11-19T00:15:38Z,,master,master,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9961
9960,"Fix hevc decode error ""Could not find ref with POC""","1. Dropping frames can cause this error, reset encoder when this happens.
2. There are some logic error for clear video queue, because video queue message is not cleared. This need to be fixed.

Test with droping one frame every 100 frames.

https://github.com/user-attachments/assets/b18856c3-5f13-4789-bee2-89dc8b3112c8


https://github.com/user-attachments/assets/63d41db5-be73-402d-b7bd-8517e124de30

",closed,2024-11-18T14:44:25Z,2024-11-18T15:03:27Z,2024-11-18T15:03:27Z,,master,hevc_poc,4,28,5,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9960
9957,Change RPM compression to zstd,"## Summry

Almost all RPM ecosystems are support `rpm` package file that using `zstd` compression and changing default compression method to `zstd`. Some very old enterprise distributions may affected, check *Affect platforms* section.

## Benefit

* Reduce package size, in latest nightly for example, from 25.4 MB to 20.9 MB
* Reduce bandwidth cost

## Requirement

[RPM >= 4.14.0](https://rpm.org/wiki/Releases/4.14.0)

## Affect platforms

* All CentOS non Stream (All EOL)
* Red Hat Enterprise Linux <= 7
* SUSE Linux Enterprise Server 12 SP5  (Maybe, can't verify because they may backport)

## Verify the compression method of the RPM package

Run:

```
bash-5.2# rpm -q --queryformat '%{PAYLOADCOMPRESSOR}\n' -p rustdesk-1.3.3-0.x86_64.rpm 
zstd
```
If not specified while building package, it will uses `gzip`.


## References

[Fedora Proposal: 
Changes/Switch RPMs to zstd compression
](https://fedoraproject.org/wiki/Changes/Switch_RPMs_to_zstd_compression)
[pagure.io/fesco/issue/2144: F31 System-Wide Change: Switch RPMs to zstd compression](https://pagure.io/fesco/issue/2144)

https://endoflife.date/centos (ALL EOL)
https://endoflife.date/rhel

## Note

If merged, refer this PR in release notes, in case someone really need `gzip` compression.
",closed,2024-11-18T09:59:45Z,2024-11-18T11:31:31Z,,,master,rpm-zstd,3,9,0,2,1,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9957
9954,opt av1 test data,"https://github.com/rustdesk/rustdesk/pull/9938

1. Change the test image to a moving rectangle.
2. Remove VP9 test, because it's always much faster than AV1.
3. The test can basically measures the encoding ability. Set key frame time threshold to 90ms, non-key frame time threshold to 30ms.
4. Tried test with a real av1 key frame, win 3 is still slower than win vm with test frame, but faster in use. Another way is doing statistics while using.

| device           | flutter key | flutter non-key | sciter key | sciter non-key |
| ---------------- | ----------- | --------------- | ---------- | -------------- |
| win 1            | 43          | 14              | 464        | 49             |
| win 2            | 43          | 16              | 566        | 59             |
| win 3            | 141         | 41              | 914        | 116            |
| win vm(1cpu, 4G) | 44          | 18              | 778        | 68             |
| mac m1           | 31          | 12              |            |                |
| linux            | 22          | 9               |            |                |
| andriod          | 41          | 14              |            |                |


https://github.com/user-attachments/assets/df36fd30-7466-423d-9e70-4787ca288ef9
",closed,2024-11-18T06:50:53Z,2024-11-18T07:05:23Z,2024-11-18T07:05:23Z,,master,fix_av1_test_data,1,79,40,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9954
9950,"feat: android clipboard, multi-formats","Support `text` copy&paste on Android.

## Preview


https://github.com/user-attachments/assets/84d73391-a9d4-4fe0-afe3-631331ed27c0


https://github.com/user-attachments/assets/9c7dc8e8-6cd2-4298-b4ee-b9748694d990

## Desc

1. Android cannot read the clipboard data if it is not the focused front app.
  a. For client(controlling) side, we can only read it after switching back to RustDesk.
  b. For host(controlled) side, we need to add an action in the floating menu.

```kotlin
    // For client side
    // When swithing from other app to this app, try to sync clipboard.
    override fun onWindowFocusChanged(hasFocus: Boolean) {
        super.onWindowFocusChanged(hasFocus)
        if (hasFocus) {
            rdClipboardManager?.syncClipboard(true)
        }
    }
```

```kotlin
         // For host side, clipboard sync
         val idSyncClipboard = 1
         val isClipboardListenerEnabled = MainActivity.rdClipboardManager?.isListening ?: false
         if (isClipboardListenerEnabled) {
             popupMenu.menu.add(0, idSyncClipboard, 0, translate(""Update client clipboard""))
         }
```

2. `sync_init_clipboard` in `io_loop.rs` is not applied for Android. Not sure if it is readlly needed.

3. Stop sending clipboard data to flutter on Android. Call ffi `call_clipboard_manager_update_clipboard()` instead.

```rust
#[cfg(target_os = ""android"")]
pub fn handle_msg_multi_clipboards(mut mcb: MultiClipboards) {
    use hbb_common::protobuf::Message;

    for cb in mcb.clipboards.iter_mut() {
        if cb.compress {
            cb.content = bytes::Bytes::from(hbb_common::compress::decompress(&cb.content));
        }
    }
    if let Ok(bytes) = mcb.write_to_bytes() {
        let _ = scrap::android::ffi::call_clipboard_manager_update_clipboard(&bytes);
    }
}
```

4. Remove unused code. Because `#[cfg(not(any(target_os = ""android"", target_os = ""ios"")))]` limits all non-iOS. Though `cfg` of `flutter` and `ios` is duplicated,  `#[cfg(not(any(target_os = ""android"", target_os = ""ios"")))]` is kept for clear.

![image](https://github.com/user-attachments/assets/1af2326e-f739-4007-ac6f-19e944a026b7)


## Tests

- [x] Android -> Windows
- [x] Windows -> Android
- [x] iOS -> Windows. text copy&paste, from Windows to iOS.
- [x] Windows -> Windows Mutliple formats.

## TODOs

`html` copy&paste does not work on some Android devices, `text` copy&paste works fine.



",closed,2024-11-18T01:56:37Z,2024-11-18T07:43:42Z,2024-11-18T07:43:42Z,,master,feat/android_clipboard_multi_formats,30,574,23,3,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9950
9947,Add URL and Vendor to RPM spec,,closed,2024-11-17T13:03:27Z,2024-11-17T13:07:00Z,2024-11-17T13:07:00Z,,master,rpm-spec,3,6,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9947
9946,Update index.tis,,closed,2024-11-17T11:24:03Z,2024-11-17T11:24:53Z,,,master,patch-2,1,70,82,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9946
9945,index.tis,,closed,2024-11-17T11:19:09Z,2024-11-17T13:06:30Z,,,master,patch-1,1,0,12,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9945
9944,remove flutter install cache flag,"The Windows build of Flutter has a cache flag. Remove the cache flag or reset Flutter to HEAD before patch

![f0c6ede506f871600e5b076f8f70167](https://github.com/user-attachments/assets/67091097-dc99-49d0-962e-45ff0fab90bd)
![d82c7adfb7ab28696d28a583a7accad](https://github.com/user-attachments/assets/203ae4a5-e9ca-4fad-b805-110c6a4cf218)
",closed,2024-11-17T03:33:57Z,2024-11-17T03:35:53Z,2024-11-17T03:35:53Z,,master,remove_flutter_cache,1,2,6,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9944
9942,Fix color accuracy in video feed,"Fixes #6518

Update color space conversion logic in `src/flutter.rs` and `src/platform/macos.rs` to improve color accuracy.

* **src/flutter.rs**
  - Update `FlutterRgbaRendererPluginOnRgba` function to handle color space conversion accurately.
  - Modify `on_rgba` function to include color space conversion logic.
  - Add a new function `convert_color_space` to handle the conversion between different color spaces.

* **src/platform/macos.rs**
  - Add additional checks and settings to ensure the correct color profile is used.
  - Update `is_can_screen_recording` function to handle color space settings.

",closed,2024-11-16T20:42:50Z,2024-11-17T01:18:40Z,,,master,fix-color-accuracy,2,21,18,1,1,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9942
9941,Fix screen recording permission issue on macOS,"Fixes #3261

",closed,2024-11-16T20:21:21Z,2024-11-17T01:11:23Z,,,master,fix-screen-recording-permission,2,15,6,1,1,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9941
9940,"quick fix win ci, replace patch with sed",https://github.com/21pages/rustdesk/actions/runs/11871167953/job/33083445009,closed,2024-11-16T16:04:03Z,2024-11-16T16:55:57Z,,,master,fix_win_ci,2,28,4,1,4,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9940
9939,fix last commit,put it into `RendezvousMediator::start_all`,closed,2024-11-16T15:09:51Z,2024-11-17T01:21:34Z,2024-11-17T01:21:34Z,,master,fix,3,1,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9939
9938,"if av1 is not slow in test, av1 takes precedence over vp9","https://github.com/rustdesk/rustdesk/issues/9915

1. AV1 performs better than VP9, ​​except maybe slower.We previously replaced AV1 with VP9 due to poor performance on x86 sicter. 5.6 https://github.com/rustdesk/rustdesk/pull/7921, 5.7 https://github.com/rustdesk/rustdesk/pull/7928
2. Tested 1.1.9 as control side,  nightly as control side when hwcodec enabled/disabled.
3. In the test, if av1 time < 250ms or 2/3 av1 time < vp9 time, av1 will be preferred.  Here are some test results(ms).

win 3 av1 can reach 30 fps when playing video, but every codec in win vm can only reach up to 10fps, even through win vm has 8 cpu, 5G ram. Sometimes av1 time of win vm < 200ms. This test can only roughly measure encoding ability.

| device  | flutter av1 | flutter vp9 | sciter av1 | sciter vp9 |
| ------- | ----------- | ----------------- | ---------- | ---------- |
| win 1   | 140         | 52                | 882        | 42         |
| win 2   | 130         | 60                | 1000+      | 33         |
| win 3   | 270         | 44                | 1500+      | 46         |
| win vm  | 210 | 61 |            |            |
| mac m1  | 49          | 17                |            |            |
| linux   | 92          | 58                |            |            |
| andriod | 166         | 92                |            |            |",closed,2024-11-16T14:20:53Z,2024-11-16T14:31:29Z,2024-11-16T14:31:28Z,,master,test_av1,4,93,5,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9938
9937,"auto codec, av1 over vp9","https://github.com/rustdesk/rustdesk/issues/9915

1. AV1 performs better than VP9, ​​except maybe slower.We previously replaced AV1 with VP9 due to poor performance on x86 sicter. 5.6 https://github.com/rustdesk/rustdesk/pull/7921, 5.7 https://github.com/rustdesk/rustdesk/pull/7928
2. This is a av1 test branch, https://github.com/21pages/rustdesk/commit/09b76a8b1dfacf336ce320162d8b32046056b2ae#diff-0b40fcbe3606278ecc2eaaee09f903dbc3f9d7ac51a3d0a33dec148aabf46b29R279, however, I don't know to what extent it can be effective, and since H265 is currently the highest priority, so it's not in this pr.
3. Tested 1.1.9 as control side,  nightly as control side when hwcodec enabled/disabled.
",closed,2024-11-16T09:18:41Z,2024-11-16T09:59:47Z,,,master,auto_av1,1,7,3,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9937
9935,Update bug_report.yaml,,closed,2024-11-16T08:27:45Z,2024-11-16T08:27:52Z,2024-11-16T08:27:51Z,,master,rustdesk-patch-3,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9935
9934,Update bug_report.yaml,,closed,2024-11-16T08:26:19Z,2024-11-16T08:26:26Z,2024-11-16T08:26:26Z,,master,rustdesk-patch-2,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9934
9929,change logo,,closed,2024-11-15T14:39:18Z,2024-11-15T14:40:14Z,,,master,custom-image,9,3,3,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9929
9919,Update common.rs,,closed,2024-11-14T07:52:39Z,2024-11-14T07:57:55Z,,,master,master,1,1,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9919
9914,linux android use cpal,"1. Linux not found problem.
2. Android
  * Need ndk_context, there are [two ways](https://cjycode.com/flutter_rust_bridge/guides/how-to/ndk-init), this pr uses the second one, here is the difference: https://github.com/rustdesk/rustdesk/compare/master...21pages:rustdesk:cpal_android_linux#diff-d23c86f186a0d9afdc4cfbc7f252aa5c43f858f21685f66d9a72e3925f97b71fR350-R357

    * when main service ndk context replace the main activity ndk context
![android_context_main_activity](https://github.com/user-attachments/assets/e9fa917e-be45-4f44-bb20-3cb8e2f2a9db)
    * when main service ndk context replace the jni ndk context
![android_context_jni](https://github.com/user-attachments/assets/f529de75-3646-49a1-bcd8-229d3fb77bda)
  *  The timestamp in output stream data callback diffs a lot, disable the calculation.
![android_timestamp](https://github.com/user-attachments/assets/d6c627a0-7878-451e-b2ce-9795647b4337)
  * The reason of silent connection before is inaccurate timestamp.
![sleep_slient](https://github.com/user-attachments/assets/1de2b8c3-9289-42a4-90a1-cf4c05a20c47)


The videos below just show no crash.

android start service, then linux control android, then android control linux.

[linux_android.webm](https://github.com/user-attachments/assets/4ac5a06b-fa58-4852-8157-1be5c12208d5)

andriod without service start

https://github.com/user-attachments/assets/3376a240-d054-44ce-8755-ad1dd637a9af


",closed,2024-11-14T06:28:34Z,2024-11-14T13:01:41Z,2024-11-14T13:01:41Z,,master,cpal_android_linux,11,79,331,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9914
9908,My,,closed,2024-11-13T08:31:21Z,2024-11-13T08:33:28Z,,,master,my,3,49,39,9,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9908
9899,"refact: ci, bridge",,closed,2024-11-12T13:52:43Z,2024-11-12T14:10:56Z,2024-11-12T14:10:56Z,,master,refact/ci_bridge,2,10,54,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9899
9897,fix: command line --config option incompatible with server config exported from the GUI.,"The server configuration string exported from the GUI is encoded in Base64 format, 
![image](https://github.com/user-attachments/assets/45b7635c-4c43-4ed2-aac1-74a063df443f)
https://github.com/rustdesk/rustdesk/blob/35b4535ebc619e6def057ad8ef2fb84c6cb98610/flutter/lib/common.dart#L2606

whereas the command line --config option expects a URL_SAFE_NO_PAD format. 
https://github.com/rustdesk/rustdesk/blob/35b4535ebc619e6def057ad8ef2fb84c6cb98610/src/custom_server.rs#L28C1-L28C45

This mismatch results in the --config option having no effect.",closed,2024-11-12T11:15:02Z,2024-11-12T12:15:35Z,2024-11-12T12:15:35Z,,master,fix_cli_config_option,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9897
9895,"fix: virtual display, headless, wait plug in done","https://github.com/rustdesk/rustdesk/issues/9884

Added timeout for pluggin in virtual display.
If inserted headlessly, wait up to 3 seconds.",closed,2024-11-12T10:59:39Z,2024-11-12T12:12:06Z,2024-11-12T12:12:06Z,,master,fix/virtual_display_headless_wait_plugging_in,1,23,6,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9895
9893,"fix: windows, improve audio buffer (#9770)",add some logic to make the sound better in windows,closed,2024-11-12T09:29:09Z,2024-11-13T07:35:23Z,2024-11-13T07:35:23Z,,master,zylthinking,1,131,22,4,2,0,"21pages, 21pages, zylthinking, zylthinking, zylthinking, rustdesk","COMMENTED, COMMENTED, COMMENTED, COMMENTED, COMMENTED, COMMENTED",False,https://api.github.com/repos/rustdesk/rustdesk/issues/9893
9881,fix aarch64 linux nightly build,`flutter-elinux doctor -v` clone flutter into `/opt/flutter-elinux/flutter`.,closed,2024-11-11T07:58:15Z,2024-11-11T08:28:25Z,2024-11-11T08:28:25Z,,master,fix_ci,1,8,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9881
9880,"fix: macos, workaround app close","## Preview

### Bug


https://github.com/user-attachments/assets/5aaced38-6178-4b36-a10c-d991d42c2d05


### Fixed



https://github.com/user-attachments/assets/fea2c434-6334-475a-85f4-4f2c480d5b7d


## Desc

This bug does not occur every time on my machine. It may be related to the multile view support of flutter. `Engine handle was invalid.`

`Close` after a delay works for me.
",closed,2024-11-11T04:01:14Z,2024-11-11T05:06:23Z,2024-11-11T05:06:23Z,,master,fix/macos_app_close,1,13,3,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9880
9878,"fix ""Add to addresssBook"" dropdown menu","# Desc
This is not a bug of 3.24.4, older versions have this problem. When `enableFilter` is true, dropdown menu does not show all menu items on first click, apply patch https://github.com/flutter/flutter/commit/b5847d364a26d727af58ab885a6123e0e5304b2b#diff-634a338bd9ed19b66a27beba35a8acf4defffd8beff256113e6811771a0c4821R543 to fix it. Tested on windows/linux/mac/android. Android `enableFilter` option still doesn't work. 

# Preview 

https://github.com/user-attachments/assets/9cd72d42-7a17-43bd-b139-e45c5546dfde

https://github.com/user-attachments/assets/cbd9524b-8f6a-42a1-88e2-7862935b72a9

",closed,2024-11-10T23:50:59Z,2024-11-11T00:39:54Z,2024-11-11T00:39:54Z,,master,fix_add_to_ab_dropdown,2,84,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9878
9875,"fix: save load window rect, Windows, ignore dpi","https://github.com/rustdesk/rustdesk/issues/8038

https://github.com/rustdesk/rustdesk/issues/6223#issuecomment-2447045416

Fix window position and size on saving and loading the main window.

`devicePixelRatio` is ignored when getting and setting window bounds. (Windows only)

## Preview

### Bug

https://github.com/user-attachments/assets/5f90217f-bb63-4084-87ad-260b312bfe7e

https://github.com/user-attachments/assets/638ba5ea-bf8d-4d52-ae47-11ef04bcfe49


### Fixed


https://github.com/user-attachments/assets/8a5389d4-f2df-4d9f-a11e-a80df7880a82

https://github.com/user-attachments/assets/bfd7de44-ca5c-4386-9306-f4fcb423a828


## Desc

https://github.com/rustdesk-org/window_manager/pull/5

Getting and setting window bounds are affected by `devicePixelRatio` in window manager.

1. `devicePixelRatio` is wrong for multiple displays sometimes in my tests.
2. One `devicePixelRatio` is not suitable for multi-monitor scenarios. See https://github.com/rustdesk/rustdesk/pull/8075

We can simply ignore ""devicePixelRatio"" to get and set window bounds. So the low-level window API (`GetWindowRect()` and `SetWindowPos()`) can deal with position and size directly.

## Tests

- [x] Windows (multiple displays), close and show main window 
- [x] Linux and MacOS, close and show main window. There's no logic changed.

## Note

The previously saved position and size are affected by `devicePixelRatio`.

The size and position may change if `devicePixelRatio` is not `1.0` after applying this commit.

`window_size.getScreenList()` is tested on Windows(2 displays), Linux(1 display), MacOS(1 display).

",closed,2024-11-10T05:36:09Z,2024-11-10T16:35:42Z,2024-11-10T16:35:42Z,,master,fix/save_load_window_rect,2,40,50,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9875
9874,refact: flutter 3.24.4,"Upgrade to `Flutter 3.24.4`.

## Desc

1. Use `Flutter 3.22` to generate the bridge files, add `pubspec.lock.3.22.3`. (bridge.yml)
2. Android, upgrade to gradle `7.6.3`. We cannot directly upgrade to gradle `8.x`. Because `namespace` must be set. https://developer.android.com/build/releases/past-releases/agp-8-0-0-release-notes 
  While many pubs did not set `namespace` yet. We have to upgrade too many pubs, and there're some pubs like https://github.com/juliuscanute/qr_code_scanner/pull/748
3. Use the latest Android toolchain to sign APK, instead of a fixed version(`30.0.2` or others). `BUILD_TOOL_VERSION=$(ls /usr/local/lib/android/sdk/build-tools/ | tail -n 1)`
4. Workaround of `Autocomplete` issue. See https://github.com/flutter/flutter/issues/157244

## Issues

- [ ] There was a crash on Windows
- [ ] MacOS. Click the ""Connect"" button, and the remote window is empty. There is no waiting for image prompt box. Then click peer card, and it connects. Click the ""Connect"" button again, and it's done.

## Note

1. Use `uni_links` of git, because Android apk cannot be compiled. https://github.com/avioli/uni_links/pull/211  `uni_links` is not changed to to `app_links` for now, because there're some special logic. https://github.com/rustdesk/rustdesk/pull/2892 Though installation works fine after changing to `app_links`.   https://github.com/rustdesk/rustdesk/blob/062c8d582cf4e805481a08df0912fb239d495167/src/core_main.rs#L627



",closed,2024-11-10T02:25:59Z,2024-11-10T03:18:08Z,2024-11-10T03:18:08Z,,master,refact/upgrade_flutter_3.24.4,9,173,126,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9874
9871,"Revert ""Refact/flutter 3.24.4""",Reverts rustdesk/rustdesk#9870,closed,2024-11-09T15:32:08Z,2024-11-09T15:32:18Z,2024-11-09T15:32:18Z,,master,revert-9870-refact/flutter_3.24.4_vitoway,9,122,153,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9871
9870,Refact/flutter 3.24.4,"Upgrade to `Flutter 3.24.4`.

## Desc

1. Use `Flutter 3.22` to generate the bridge files, add `pubspec.lock.3.22.3`. (bridge.yml)
2. Android, upgrade to gradle `7.6.3`. We cannot directly upgrade to gradle `8.x`. Because `namespace` must be set. https://developer.android.com/build/releases/past-releases/agp-8-0-0-release-notes 
  While many pubs did not set `namespace` yet. We have to upgrade too many pubs, and there're some pubs like https://github.com/juliuscanute/qr_code_scanner/pull/748
3. Workaround of `Autocomplete` issue. See https://github.com/flutter/flutter/issues/157244

## Issues

- [ ] There was a crash on Windows
- [ ] MacOS. Click the ""Connect"" button, and the remote window is empty. There is no waiting for image prompt box. Then click peer card, and it connects. Click the ""Connect"" button again, and it's done.

## Note

1. Use `uni_links` of git, because Android apk cannot be compiled. https://github.com/avioli/uni_links/pull/211  `uni_links` is not changed to to `app_links` for now, because there're some special logic. https://github.com/rustdesk/rustdesk/pull/2892 Though installation works fine after changing to `app_links`.   https://github.com/rustdesk/rustdesk/blob/062c8d582cf4e805481a08df0912fb239d495167/src/core_main.rs#L627



",closed,2024-11-09T11:15:47Z,2024-11-09T12:51:47Z,2024-11-09T12:51:47Z,,master,refact/flutter_3.24.4_vitoway,9,153,122,9,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9870
9868,Refact/flutter 3.24.4,"Upgrade to `Flutter 3.24.4`.

## Desc

1. Use `Flutter 3.22` to generate the bridge files, add `pubspec.lock.3.22.3`. (bridge.yml)
2. Android, upgrade to gradle `7.6.3`. We cannot directly upgrade to gradle `8.x`. Because `namespace` must be set. https://developer.android.com/build/releases/past-releases/agp-8-0-0-release-notes 
  While many pubs did not set `namespace` yet. We have to upgrade too many pubs, and there're some pubs like https://github.com/juliuscanute/qr_code_scanner/pull/748
3. Workaround of `Autocomplete` issue. See https://github.com/flutter/flutter/issues/157244

## Issues

- [ ] There was a crash on Windows
- [ ] MacOS. Click the ""Connect"" button, and the remote window is empty. There is no waiting for image prompt box. Then click peer card, and it connects. Click the ""Connect"" button again, and it's done.

## Note

1. Use `uni_links` of git, because Android apk cannot be compiled. https://github.com/avioli/uni_links/pull/211  `uni_links` is not changed to to `app_links` for now, because there're some special logic. https://github.com/rustdesk/rustdesk/pull/2892 Though installation works fine after changing to `app_links`.



",closed,2024-11-09T03:23:16Z,2024-11-09T10:52:51Z,,,master,refact/flutter_3.24.4_vitoway,9,153,122,10,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9868
9866,kor translation update,,closed,2024-11-08T22:10:55Z,2024-11-09T03:37:54Z,2024-11-09T03:37:54Z,,master,master_kr,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9866
9863,Update tw.rs,,closed,2024-11-08T14:01:59Z,2024-11-08T14:18:30Z,2024-11-08T14:18:30Z,,master,patch-3,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9863
9860,"fix: mobile, soft keyboard","Switching the input method, don't affect the canvas.

## Preview

### bug


https://github.com/user-attachments/assets/cb778a9e-d30d-4f11-a385-cd14bcdf4bad

### fixed


https://github.com/user-attachments/assets/aae63014-51f8-4cdb-82e8-77a3ced2dd20

## Desc

Skip applying canvas changes when the soft keyboard is showing and the canvas is panned or scaled in `didChangeMetrics()`.

```dart
    // If the soft keyboard is visible and the canvas has been changed(panned or scaled)
    // Don't try reset the view style and focus the cursor.
    if (gFFI.cursorModel.lastKeyboardIsVisible &&
        gFFI.canvasModel.isCanvasChanged) {
      return;
    }
```",closed,2024-11-08T06:16:19Z,2024-11-08T07:01:36Z,2024-11-08T07:01:36Z,,master,fix/mobile_soft_keyboard_input_method_do_not_affect_canvas,2,24,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9860
9859,Update build.py,Make the clean up command silent and sane (status code is always `0`).,closed,2024-11-07T23:21:57Z,2024-11-08T00:04:03Z,,,master,patch-1,1,2,2,1,2,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9859
9857,"revert: 9644, iOS, Korean input","Revert https://github.com/rustdesk/rustdesk/pull/9644

We need to find a better way to input text(composing) on mobile.
",closed,2024-11-07T14:48:52Z,2024-11-07T14:54:14Z,2024-11-07T14:54:14Z,,master,revert/9644_iOS_Korean_input,1,3,7,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9857
9856,"fix: mobile, two fingers cale, no tapdown","On mobile, fix the issue of extra click event when scaling with two fingers.

## Preview


https://github.com/user-attachments/assets/8667965c-b5fe-44d5-8914-73014c835900

## Desc

1. Remember the ""TapDownDetails"" instead of emitting ""move"" and ""tapDown"" events immediately.
2. Emit `tapDown` event in `onTapUp()`.
3. Emit `move` event in `onOneFingerPanStart()`.

## Tests

- [x] Android, touch mode
  - [x] tap
  - [x] long press
  - [x] double tap
  - [x] tap and pan
  - [x] two fingers scale
- [x] desktop, touch screen
  - [x] tap
  - [x] long press
  - [x] double tap
  - [x] tap and pan
  - [x] two fingers tap",closed,2024-11-07T14:33:58Z,2024-11-07T14:36:57Z,2024-11-07T14:36:56Z,,master,fix/mobile_two_finger_scale_no_tapdown,1,18,9,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9856
9855,"fix: touch input, ensure message orders","There're no logic changes, except `async`, `await`.

Fix some bugs in asynchronous functions.

For example, the following code may result `up` and `down` instead of `down` and `up` on the controlled side.

```dart
  void tap(MouseButtons button) {
    sendMouse('down', button);
    sendMouse('up', button);
  }
```


![image](https://github.com/user-attachments/assets/326ed174-a044-49da-b1b2-2f8bbfd809ef)

![image](https://github.com/user-attachments/assets/295bd464-7469-4bdb-a705-1eb717163de1)

![image](https://github.com/user-attachments/assets/8d52ae64-7229-4473-b4e0-1d9e6afc61c9)

![image](https://github.com/user-attachments/assets/ff095e0b-e21b-46a9-afea-30177d764abe)

",closed,2024-11-07T13:04:49Z,2024-11-07T13:23:41Z,2024-11-07T13:23:41Z,,master,fix/touch_input_ensure_message_order,3,70,63,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9855
9853,fix the minimum quality value to 5%,,closed,2024-11-07T09:05:45Z,2024-11-07T09:09:23Z,,,master,fix-min-quarity-setting,1,2,2,1,1,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9853
9847,Upload a workflow that can compile and publish windows x64 release engine,"The compilation process follows the following tutorial:
https://github.com/flutter/engine/blob/main/docs/contributing/Setting-up-the-Engine-development-environment.md
https://github.com/flutter/engine/blob/main/docs/contributing/Compiling-the-engine.md

The gclient file configuration refers to the following official default configuration:
https://chromium.googlesource.com/chromium/tools/depot_tools.git/+/refs/heads/main/fetch_configs/flutter.py

How to use:
The workflow will release a zip archive. Copy the files in the archive to the flutter_windows_3.24.4-stable\flutter\bin\cache\artifacts\engine\windows-x64-release directory. Use the flutter build windows command to compile the application. You can verify that the replacement was successful by verifying the flutter_windows.dll file.",closed,2024-11-07T06:31:59Z,2024-11-07T09:09:42Z,,,master,master,1,58,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9847
9846,"fix: mobile, don't adjust canvas on gesture help show up","## Preview

### Before


https://github.com/user-attachments/assets/1b981be6-6c84-4a3e-b16e-2e3f530b0c39



### After

https://github.com/user-attachments/assets/8ea06a2e-273e-4ea1-a510-f863d0776475

",closed,2024-11-07T05:26:38Z,2024-11-07T06:58:10Z,2024-11-07T06:58:10Z,,master,fix/mobile_no_adjust_canvas_on_gesture_help,1,6,3,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9846
9843,"fix: mobile, cursor mode, don't reset canvas","1. Don't reset canvas after selecting the cursor mode.

The main changes are as follows

<img width=""482"" alt=""1730901114820"" src=""https://github.com/user-attachments/assets/0993cfdd-707a-49b8-acdd-d85a58bf36b1"">

There're no logic changes in `remote_page.dart`.

2. Use `_resetCanvasOffset()` to reset cavas offset in different places.

## Preview

https://github.com/user-attachments/assets/61964ded-3c3f-4e62-9c02-529e3605be62

",closed,2024-11-06T13:55:39Z,2024-11-06T13:59:23Z,2024-11-06T13:59:23Z,,master,fix/mobile_cursor_mode_no_reset_canvas,2,29,21,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9843
9840,fix: save load window rect,"https://github.com/rustdesk/rustdesk/issues/8038

https://github.com/rustdesk/rustdesk/issues/6223#issuecomment-2447045416

Fix window position and size on saving and loading the main window.

`devicePixelRatio` is ignored when getting and setting window bounds. (Windows only)

## Preview

### Bug

https://github.com/user-attachments/assets/5f90217f-bb63-4084-87ad-260b312bfe7e

https://github.com/user-attachments/assets/638ba5ea-bf8d-4d52-ae47-11ef04bcfe49


### Fixed


https://github.com/user-attachments/assets/8a5389d4-f2df-4d9f-a11e-a80df7880a82

https://github.com/user-attachments/assets/bfd7de44-ca5c-4386-9306-f4fcb423a828


## Desc

https://github.com/rustdesk-org/window_manager/pull/5

Getting and setting window bounds are affected by `devicePixelRatio` in window manager.

1. `devicePixelRatio` is wrong for multiple displays sometimes in my tests.
2. One `devicePixelRatio` is not suitable for multi-monitor scenarios. See https://github.com/rustdesk/rustdesk/pull/8075

We can simply ignore ""devicePixelRatio"" to get and set window bounds. So the low-level window API (`GetWindowRect()` and `SetWindowPos()`) can deal with position and size directly.

## Tests

- [x] Windows (multiple displays), close and show main window 
- [x] Linux and MacOS, close and show main window. There's no logic changed.

## Note

The previously saved position and size are affected by `devicePixelRatio`.

The size and position may change if `devicePixelRatio` is not `1.0` after applying this commit.


## Know issue

If the window spans across two monitors, and the monitors have different DPIs, the size may be incorrect.
 
There are two monitors, the left one is 100% DPI and the right one is 175% DPI.
The window belongs to the left monitor, but if it is moved a little to the right, it will belong to the right monitor.

https://github.com/user-attachments/assets/b1609d14-8e9f-46e7-bc0f-ff3ec32c3ae9


",closed,2024-11-06T11:10:54Z,2024-11-06T11:14:31Z,,,master,fix/save_load_window_rect,2,36,50,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9840
9833,Fix traditional Chinese localization,,closed,2024-11-05T15:15:38Z,2024-11-05T23:59:12Z,2024-11-05T23:59:12Z,,master,patch-1,1,55,55,1,1,0,jay13345-tw,APPROVED,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9833
9829,Sit custom,,closed,2024-11-05T10:56:47Z,2024-11-05T10:57:03Z,,,master,sit-custom,6,879,4,21,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9829
9827,"fix: mobile input, touch mode, in display","
## Preview

https://github.com/user-attachments/assets/89326dab-9bce-4694-bf86-25e7502880ba

## Desc

1. Do not move out of the display on tap and pan.
2. Do not emit `tap down`, `long press`, `double tap`, `two finger tap`(desktop), `pan` events if the start point is not in the display's rectangle.


## Tests

- [x] Android, touch mode
  - [x] tap
  - [x] long press
  - [x] double tap
  - [x] tap and pan
  - [x] two fingers scale
- [x] desktop, touch screen
  - [x] tap
  - [x] long press
  - [x] double tap
  - [x] tap and pan
  - [x] two fingers tap
- [x] Android, mouse mode
  - [x] tap
  - [x] long press
  - [x] double tap
  - [x] tap and pan
  - [x] two fingers scale
  - [x] two fingers tap",closed,2024-11-05T09:49:49Z,2024-11-05T09:55:41Z,2024-11-05T09:55:41Z,,master,fix/mobile_input_touch_mode_in_display,2,120,10,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9827
9824,fix missing window focus service on windows/macos,introduced by https://github.com/rustdesk/rustdesk/pull/9354,closed,2024-11-05T03:23:47Z,2024-11-05T03:28:27Z,2024-11-05T03:28:27Z,,master,fix,1,2,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9824
9821,common.rs,,closed,2024-11-04T15:59:48Z,2024-11-04T23:54:21Z,,,master,patch-4,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9821
9820,config.rs,,closed,2024-11-04T15:58:45Z,2024-11-04T23:53:36Z,,,master,patch-3,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9820
9819,common.rs,,closed,2024-11-04T15:30:23Z,2024-11-04T23:54:09Z,,,master,patch-1,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9819
9811,"fix: mobile mouse mode, cursor range","
1. Limit the mouse movement range of the controlled side.

Use `getPointInRemoteRect()` to ensure current movement is in the display's range.

### Preview


https://github.com/user-attachments/assets/e2d084a8-4041-4d93-8e5e-181b443a8963



2. Do not reset the cursor position after swithing view style.


Modify `updateViewStyle()`

![image](https://github.com/user-attachments/assets/fe0db674-c1c0-4908-9387-8bacc2524e44)


### Bug


https://github.com/user-attachments/assets/d0e7f632-0c62-4f91-911a-b7ad009acc0f



### Fixed


https://github.com/user-attachments/assets/4c7ca7d3-4dbc-4286-91c4-60a5f83effe3



4. Fix canvas offset on pan.

```dart
-      parent.target?.canvasModel.panX(-dx);
+     parent.target?.canvasModel.panX(-dx * scale);
```

### Bug


https://github.com/user-attachments/assets/0153592a-c41e-4509-8a59-acd4166a8105



### Fixed

https://github.com/user-attachments/assets/2db631a5-639e-4856-8a23-7423283fe4d5


## Tests

- [x] mobile -> desktop, multiple displays.
- [x] desktop -> desktop, mouse mode
- [x] mobile -> mobile

## TODOs

1. Touch mode, ignore eventswhen touch/pan out of the image.

https://github.com/rustdesk/rustdesk/blob/040253b3199ee9fe95a4d91f16634a9504b83ce0/flutter/lib/common/widgets/remote_input.dart#L368

`onTap()` should check if current point is in the display. But this callback does not provide the localtion.





",closed,2024-11-03T05:44:19Z,2024-11-04T14:37:21Z,2024-11-04T14:37:21Z,,master,fix/mobile_mouse_movement_in_display,4,84,37,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9811
9805,"fix: android, cursor, match local remote positions",,closed,2024-11-01T08:31:56Z,2024-11-01T08:59:08Z,,,master,fix/android_cursor_match_local_remote_pos,1,2,3,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9805
9803,fix: mobile cursor focus,"Focus cursor after soft keyboard showing/hiding.

1. Update the view style.
2. Update the canvas offset.
3. Move local cursor position if it is not in the visible rectangle.

## Preview

https://github.com/user-attachments/assets/706acc3d-548f-405e-8bb8-c09dfc422284

## Tests

- [x] Cursor outof the display.
- [x] Multiple displays on the controlled side.",closed,2024-11-01T07:02:11Z,2024-11-01T07:40:57Z,2024-11-01T07:40:57Z,,master,fix/mobile_cursor_focus,2,33,12,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9803
9797,"fix: android input, soft keyboard, mouse mode","Cursor movement in the remote screen.

## Preview


https://github.com/user-attachments/assets/ec94c716-2579-4671-ab5d-c1a1162cc212


https://github.com/user-attachments/assets/dd3714f1-792c-43f6-8577-9526ad98f983

## Desc

No logic for desktop is changed.

### `getSize()` in `CanvasModel`

1. Move `getSize()` out of `updateViewStyle()`.
2. Change the height
```dart
h = h -
          mediaData.viewInsets.bottom -
          (parent.target?.cursorModel.keyHelpToolsRect?.bottom ?? 0);
```
3. User `getSize()` in `getVisibleRect()`, for update pan (mobile), `onOneFingerPanStart`, `onOneFingerPanUpdate`, `onHoldDragUpdate`.

### `getAdjustY()`

Add `getAdjustY()` for image(cursor) paint and cursor control.

### `moveToCenterCursor()`

Add `moveToCenterCursor()` to make cursor at the center of canvas after showing(hidding) the soft keyboard.


## Tests

- [x] mobile -> desktop. Mouse mode, soft keyboard shows, move cursor over the whole display.
- [x] mobile -> desktop. Mouse mode, soft keyboard shows and hides, cursor is kepted shown in the canvas.
- [x] mobile -> desktop. Multi displays, different scales.
- [x] mobile -> desktop/mobile. Touch mode, touch.",closed,2024-10-31T17:04:01Z,2024-11-01T03:25:38Z,2024-11-01T03:25:38Z,,master,fix/android_input_soft_keyboard_mouse_mode,2,99,27,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9797
9795,"Revert ""Change the minimum value of the bitrate slider to 5""","According to https://github.com/rustdesk/rustdesk/blob/d1fdcf1b16c440d2af69cc72a344792eaa0e7c6d/src/server/video_qos.rs#L293, it doesn't work, and more changes need to be done.
https://github.com/rustdesk/rustdesk/blob/d1fdcf1b16c440d2af69cc72a344792eaa0e7c6d/libs/hbb_common/src/config.rs#L1377
",closed,2024-10-31T12:12:14Z,2024-10-31T14:57:39Z,2024-10-31T14:57:39Z,,master,revert_custom_quality_5,2,3,3,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9795
9794,config.rs,,closed,2024-10-31T09:34:00Z,2024-10-31T09:36:05Z,,,master,patch-1,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9794
9792,Update ko.rs,,closed,2024-10-31T03:22:44Z,2024-10-31T04:01:38Z,2024-10-31T04:01:38Z,,master,master,1,5,5,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9792
9791,refresh icon not visible when not using one-time password,"When using `click` approve mode or when using a permanent password, one-time password is not used, therefore the refresh icon should not be visible or copyable.

https://github.com/user-attachments/assets/f2a24d93-8705-4ff7-b42e-2fc46f0899a2


https://github.com/user-attachments/assets/14ef6190-9557-4722-a925-a1d95bc8ed7e


https://github.com/user-attachments/assets/a3d69d99-8efd-4b66-ac40-6b5a12582cae

",closed,2024-10-31T02:07:12Z,2024-10-31T02:11:42Z,2024-10-31T02:11:42Z,,master,refresh_icon_visibility,3,37,24,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9791
9790,"fix: android input, do not handle composing",,closed,2024-10-31T01:56:55Z,2024-10-31T02:20:57Z,2024-10-31T02:20:57Z,,master,fix/android_do_not_handle_composig,1,0,20,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9790
9787,Refact/mobile remove adjust 4 soft keyabord,"Remove y-pan limitation when soft keyboard appears.


## Preview

https://github.com/user-attachments/assets/a4b232e4-0ebb-4807-8ccd-a6e8267fa3f0

## Tests

- [x] Android -> Windows
  - [x] ""Touch mode"". Touch control
  - [x] Soft keyboard show and hide
- [x] Android -> Android
  - [x] Touch control
  - [x] Soft keyboard show and hide

## Note

![image](https://github.com/user-attachments/assets/3ff07179-ac28-4c3c-b590-698e0be79521)

But `bind.sessionSetViewStyle(sessionId: sessionId, value: """");` will cause the view style to be incorrect after panning.

## TODOs

When scaling, it is easy to trigger touch(click) event by mistake.",closed,2024-10-30T15:59:49Z,2024-10-31T02:11:00Z,2024-10-31T02:11:00Z,,master,refact/mobile_remove_adjust_4_soft_keyabord,3,29,33,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9787
9786,"fix: mobile view style, on conn","https://github.com/rustdesk/rustdesk/discussions/9781

## Desc


1. Remove `parent.target?.canvasModel.scale = min(xscale, yscale);` when the first image is updated.

Because `updateViewStyle()` will always be called here

https://github.com/rustdesk/rustdesk/blob/32dbc0c8fb0245bd57249828a9f815c1bb5ae668/flutter/lib/models/model.dart#L2652

2. Reset `_lastViewStyle` on close. So `updateViewStyle()` can work on the next conn. Or the `scale` may be incorrect(`1.0` in `reset()`) because `updateViewStyle()` will not work.

https://github.com/rustdesk/rustdesk/blob/32dbc0c8fb0245bd57249828a9f815c1bb5ae668/flutter/lib/models/model.dart#L1498

3. Set default view style to `adaptive` for mobile. Because `parent.target?.canvasModel.scale = min(xscale, yscale);` will always set the scale to `adaptive`. But it's removed in this PR.


## Tests

Android as the controlling side.

1. Remote desktop, display landscape/portait.
2. Remote mobile, landscape/portait.


## TODOs

Wrong images sometimes.

1. Remote phone landscape.
3. Connect.

![image](https://github.com/user-attachments/assets/133fa74b-e8bc-476c-8b9b-67cfde81bca4)

",closed,2024-10-30T10:45:57Z,2024-10-30T11:00:07Z,2024-10-30T11:00:07Z,,master,fix/mobile_view_style_on_conn,2,4,7,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9786
9785,Update lv.rs,,closed,2024-10-30T08:34:59Z,2024-10-30T09:08:32Z,2024-10-30T09:08:32Z,,master,patch-1,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9785
9784,Fix/android check normal usbhid usage,"## Preview


https://github.com/user-attachments/assets/52750a12-fad9-450d-9519-54be8434b39c


## Desc

1. Fix input ""Backspace"".
2. Refactor `isMobileAndMapMode`. Check if is mobile and should use ""Map mode"".

## Tests

1. Composing new words. Only send words to the controlled side after composing.
2. Deleting words. ""Backspace"" will be sent immediately.
3. Update words when deleting.
    a. Input ""hello"", remote ""hello"".
    b. Backspace two times, then input ""g"", ""o"". Local is ""helgo""
    c. Select word ""helgo"", remote is changed from ""hello"" to ""helgo""
4. Korean and Pinyin inputs, ""Backspace"", ""Enter"" and ""Space"" are tested.",closed,2024-10-30T07:26:36Z,2024-10-30T07:29:52Z,2024-10-30T07:29:52Z,,master,fix/android_check_normal_usbhid_usage,2,36,20,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9784
9783,"Revert ""revert: #9769""",Reverts rustdesk/rustdesk#9780,closed,2024-10-30T05:12:11Z,2024-10-30T05:12:18Z,2024-10-30T05:12:18Z,,master,revert-9780-revert/android_korean_input_composing_status,1,16,10,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9783
9782,"fix: android input, Backspace and Enter","Fix the issue introduced by https://github.com/rustdesk/rustdesk/pull/9717

The workaround in https://github.com/rustdesk/rustdesk/pull/9769 does not fix the issue.

## Desc

`debugName` in the `KeyEvent` can not be used in release mode.

We just check `['Backspace', 'Enter']` for now. Because these two keys in the soft keyboard also cause `KeyEvent`.

## TODO

Use a better way to compare the events, implement `debugName()`.
",closed,2024-10-30T05:00:55Z,2024-10-30T05:05:26Z,2024-10-30T05:05:25Z,,master,fix/android_input_BackSpace_Enter,1,4,3,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9782
9780,revert: #9769,"Not sure TextEditingController.addListener() can handle all composing changes.

https://github.com/rustdesk/rustdesk/issues/7727#issuecomment-2445721499",closed,2024-10-30T04:11:38Z,2024-10-30T04:17:13Z,2024-10-30T04:17:13Z,,master,revert/android_korean_input_composing_status,1,10,16,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9780
9779,fix wrong display of custom clients when approve mode is not set,"when approve-mode is not set, the approve mode option shows as password, it's `both` approve mode in rust, so only ui is wrong.
before:
![before-default-approve-mode](https://github.com/user-attachments/assets/57fa1a46-7226-4a7f-817c-ded28a3959be)
after:
![after-default-approve-mode](https://github.com/user-attachments/assets/9f764574-0c4d-4b22-a50e-5ef2f2e109cf)
",closed,2024-10-30T03:24:02Z,2024-10-30T03:29:39Z,2024-10-30T03:29:39Z,,master,fix_custom_client_ui_show,1,3,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9779
9777,Dev/custom rustdesk bis,,closed,2024-10-29T23:16:50Z,2024-10-29T23:19:00Z,,,master,dev/custom_rustdesk_bis,30,773,115,13,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9777
9775,"fix: mobile -> mobile, long press","`inputModel.tap(MouseButtons.right);` will be interpreted as ""Back"" on Android.",closed,2024-10-29T11:46:49Z,2024-10-29T11:57:30Z,2024-10-29T11:57:30Z,,master,fix/mobile_mobile_long_press,2,4,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9775
9772,rotate ID3D11Texture2D,"* Rotate ID3D11Texture2D after duplication using the D3D11 video processor.
* If the display is not rotated, no new ComPtr will be created;  If the rotation fails, it will reuse the previous fallback logic in https://github.com/rustdesk/rustdesk/pull/9696
* During testing with incorrect width/height parameters, encoding succeeded but produced black images, triggering the error at [this line](https://github.com/rustdesk/rustdesk/blob/1c9b456456d866b73003a58d97c28c7c788eee76/libs/scrap/src/common/vram.rs#L131). In such cases, disable the encoder instead of just switching.

TODO:

When switching from Landscape to Landscape (flipped) during capture, the resolution does not change, causing the video service to fallback to GDI directly.


https://github.com/user-attachments/assets/b7b90099-4f7a-4976-98d9-b008648f8ab4
",closed,2024-10-29T08:48:41Z,2024-11-08T04:12:10Z,2024-11-08T04:12:10Z,,master,rorate_texture,3,236,15,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9772
9771,Update bug_report.yaml,,closed,2024-10-29T07:33:04Z,2024-10-29T07:33:12Z,2024-10-29T07:33:12Z,,master,rustdesk-patch-1,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9771
9769,fix: mobile input,"1. Map mode. Check if the KeyEvent's usbHidUsage is correct.
2. Korean input, use listener to handle composing state.

## Desc

### Map mode

1. Add `isKeyMatch` because the `PhysicalKeyboardKey` may not be correct. https://github.com/flutter/flutter/issues/157771
2. Add `isMobileAndPeerNotAndroid` because Android as the controlled side does not support ""Map mode""

### Removing `_composingTimer`

We can use `TextEditingController.addListener` to listen the composing region changes.
",closed,2024-10-29T06:10:46Z,2024-10-29T06:19:16Z,2024-10-29T06:19:16Z,,master,fix/mobile_input_map_mode,2,35,11,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9769
9768,fix: [translations] Add the translation in cn.rs,"Add the translation in cn.rs

Log: Add the translation in cn.rs",closed,2024-10-29T05:46:58Z,2024-10-29T05:54:17Z,2024-10-29T05:54:17Z,,master,master,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9768
9767,fix: input mobile -> Android,"1. Handle `seq` in KeyEvent for the ""Legacy mode"", mobile -> Android.
2. Check `press` flag in `KeyEvent`.",closed,2024-10-29T03:34:23Z,2024-11-08T04:11:57Z,2024-11-08T04:11:56Z,,master,fix/input_mobile_android,3,25,11,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9767
9766,refact: mobile reset canvas,"## Before


https://github.com/user-attachments/assets/507188bf-2733-4d39-8c19-0d92ef1a7a1f



## After


https://github.com/user-attachments/assets/63e15ae6-30e3-4943-a770-e89778f01c98

",closed,2024-10-29T01:34:26Z,2024-10-29T01:49:04Z,2024-10-29T01:49:04Z,,master,refact/mobile_reset_canvas,1,17,3,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9766
9763,add some missing web bridge,,closed,2024-10-28T01:31:57Z,2024-10-28T01:40:16Z,2024-10-28T01:40:16Z,,master,web_bridge,1,10,10,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9763
9762,Update hu.rs,Making the Hungarian language file complete. Adding tips in Hungarian.,closed,2024-10-27T14:59:17Z,2024-10-29T05:55:13Z,2024-10-29T05:55:13Z,,master,patch-1,1,289,289,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9762
9760,1.3.1 jing,,closed,2024-10-27T09:02:08Z,2024-10-27T09:04:05Z,,,master,1.3.1-jing,2,7,1,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9760
9759,Jinglongfei patch 1,,closed,2024-10-27T08:55:30Z,2024-10-27T09:04:40Z,,,master,jinglongfei-patch-1,2,7,1,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9759
9757,"fix: Function ""LockScreen"" on macOS since ""ignore_flags"" in enigo is introduced","Fix function ""LockScreen"" broken on macOS, introduced by https://github.com/rustdesk/rustdesk/pull/9733

![image](https://github.com/user-attachments/assets/482656ab-1fce-4579-ac69-c36f6ac95d9d)

1. ""LockScreen"" after connection is established.
2. ""LockScreen"" after ""Map mode"" or ""Translate mode"" keys are sent.",closed,2024-10-27T04:24:31Z,2024-10-27T12:36:21Z,2024-10-27T12:36:21Z,,master,fix/macos_lockscreen,1,16,5,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9757
9755,revert missing retry and opt keep session,"1. Revert https://github.com/rustdesk/rustdesk/pull/8750: When `hasRetry` is set to false, there should not be a reconnect button. In the original issue discussed in https://github.com/rustdesk/rustdesk/discussions/8748#discussioncomment-10081038, when a session is closed due to inactivity, `hasRetry` is false. Version 1.2.3 always displaying the reconnect button is not ideal,  https://github.com/rustdesk/rustdesk/blob/cf0e3ec303990a48e0b3a6beedd3587079a6526c/flutter/lib/models/model.dart#L444.
2. Session Management: Retain a session only if there is another active remote session. If there are two connections within one session—such as a remote connection and a file transfe, when the remote connection is closed. if a reconnect button is present on the remote window, it can still use the session token, It still make sense but goes against common sense, the remote connection is the ""main connection"", a file transfer reconnection makes sense. Older versions do not share the same session ID, while newer versions lack a reconnect button if hasRetry is false, hence this is just in case.

sciter:
![5ec0855b01d80c5b8ae24ea5024d61b](https://github.com/user-attachments/assets/9bd66f62-ff10-4ffa-9fd3-f74501870f46)
before:
![c0b69469dca913e1ca9e850336ac204](https://github.com/user-attachments/assets/f83c8486-fedc-49cb-a500-9ec7103d1115)
after:
![c28a13b8eb7b7cbb2994c96ddcd80bc](https://github.com/user-attachments/assets/9e96a269-3dd4-474e-8b56-bc2cf1694215)

nightly connect to pr, open file transfer in remote connection
* remote closed by remote user, reconnect does not works.
* file closed by remote user, reconnect works.

[nightly-connect-to-pr.webm](https://github.com/user-attachments/assets/8ba7eeff-ca01-4f90-b216-ea0aaca1f7c0)

pr connect to pr, no reconnect button when closed by the remote user.

https://github.com/user-attachments/assets/e14714bb-8b76-41c4-a79d-d4799b75a268

",closed,2024-10-26T13:34:22Z,2024-10-26T14:05:54Z,2024-10-26T14:05:54Z,,master,session,3,26,48,2,2,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9755
9752,Update Italian language,"@rustdesk 

Please emrge. Thanks.",closed,2024-10-26T08:04:34Z,2024-10-26T08:06:29Z,2024-10-26T08:06:29Z,,master,master,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9752
9747,Update de language,,closed,2024-10-25T15:26:56Z,2024-10-25T15:31:05Z,,,master,update_de_lan,1,3,3,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9747
9746,Update config.rs,,closed,2024-10-25T14:41:59Z,2024-10-26T00:50:51Z,,,master,w13259889276-patch-1,1,1,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9746
9742,fix german translation,Better translation for german keyboard key and more logic wording.,closed,2024-10-24T18:12:32Z,2024-10-25T00:21:42Z,2024-10-25T00:21:42Z,,master,fix_german_translation,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9742
9741,Update ru.rs,,closed,2024-10-24T17:56:27Z,2024-10-25T00:08:03Z,2024-10-25T00:08:03Z,,master,master,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9741
9739,"refactor session insert, update if already exists","https://github.com/rustdesk/rustdesk/pull/9731
* All connections in the same session share the same last_receive_time.
* No special handling for port forward.",closed,2024-10-24T13:51:29Z,2024-10-24T15:14:43Z,2024-10-24T15:14:43Z,,master,refactor_insert_session,1,61,69,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9739
9738,flutter-ci.yml,,closed,2024-10-24T13:15:29Z,2024-10-24T13:37:03Z,,,master,patch-3,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9738
9737,Main cargo name,,closed,2024-10-24T13:12:05Z,2024-10-24T13:12:13Z,,,master,main-cargo-name,20,513,46,9,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9737
9736,Add translation string for better translationj capability,I have added a new translation string for all languages (Insert Ctrl + Alt + Del) for better translation capability.,closed,2024-10-24T13:02:43Z,2024-10-24T13:52:40Z,2024-10-24T13:52:40Z,,master,add_translation_for_better_wording,30,30,1,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9736
9733,"fix:  ->macos, mouse events,  key flags","https://github.com/rustdesk/rustdesk/issues/9729 https://github.com/rustdesk/rustdesk/issues/8112

## Preview

https://github.com/user-attachments/assets/cf333426-3fa0-4f0a-bc09-6ce13abe4297


## Desc


We ignore the key flags in `enigo`, because `enigo` is only used in two places:
1. Simulate the ""Legacy mode"" key events.
2. Simulate the mouse events.

Only the ""Legacy mode"" requires the modifiers.

""Map mode"" and ""Translate mode"" just simulate the modifier(hotkey) keys.

## Tests

Windows and Linux as the controlled side, no such issue.

",closed,2024-10-24T04:40:38Z,2024-10-24T06:33:37Z,2024-10-24T06:33:37Z,,master,fix/win_macos_key_flags_on_mouse_events,2,43,3,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9733
9731,no password required for file transfer action in remote control menu,"https://github.com/rustdesk/rustdesk/issues/9723

1. No password required for file transfer/TCP tunnel actions in remote control menu
* Reuse the session ID, password and password source from the remote connection for file transfer and TCP tunnel actions. Tested password sync.
* Not remove the session in connection.rs  if it isn't the last one, unless the last one is a port-forward connection.
* Most changes in connection.rs are related to the inability of the TCP tunnel to update the last received time; therefore, it should not be added to SESSIONS if another session exists.
* Test random/permanent password with/without 2fa for file transfer/tcp tunnel,  reproduce 2 times tcp tunnel still need password/2fa, but may be click accept mistake.

2. Fix mobile doesn't sync recent passwords to personal address book

https://github.com/user-attachments/assets/d013f3a4-4bb1-4d99-8745-63d0553ecf37


https://github.com/user-attachments/assets/4ba0d6d2-2c46-4001-8201-91bc91eb98f0


https://github.com/user-attachments/assets/5a077211-c8a4-4235-848c-d45a773fe96f


https://github.com/user-attachments/assets/f5309db3-0125-4977-85c6-2c098340110e


https://github.com/user-attachments/assets/6e8a6b02-4f22-489a-b851-6ba0e930191b

https://github.com/user-attachments/assets/f8913a1f-92bd-4089-b455-d7954d540aee



https://github.com/user-attachments/assets/9d499ea8-ab2c-4fc6-8786-c041623a8f36


https://github.com/user-attachments/assets/26f99f55-30d2-4838-842f-f79d133d4816


https://github.com/user-attachments/assets/bab29692-0dfb-4321-8ad0-8f4357ce5e09


https://github.com/user-attachments/assets/840a099f-66e7-452b-8888-888eb016fea1

",closed,2024-10-24T02:18:31Z,2024-10-24T09:20:48Z,2024-10-24T09:20:48Z,,master,remote_file_transfer_action,16,222,52,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9731
9726,Update nl.rs,,closed,2024-10-23T06:19:45Z,2024-10-23T10:13:05Z,2024-10-23T10:13:05Z,,master,patch-5,1,4,4,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9726
9718,Update Italian language,"@rustdesk 

Please merge. Thanks.",closed,2024-10-22T07:59:56Z,2024-10-22T08:20:35Z,2024-10-22T08:20:35Z,,master,master,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9718
9717,feat: mobile map mode,"## Tests

- [x] Android -> Windows, Linux, MacOS
- [x] iOS -> Windows, Linux, MacOS
- [x] Windows -> MacOS

Flutter key event listen on desktop is not changed.

ISO keyboard layout is not supported when the controlled side is MacOS.
Because `IntlBackslash` cannot be recognized on Android. I'm not sure if it is a bug or not. https://github.com/flutter/flutter/issues/157279

## TODOs

1. `CapsLock` status is not always correct on iOS. https://github.com/flutter/flutter/issues/157241

",closed,2024-10-22T03:00:01Z,2024-10-23T01:28:40Z,2024-10-23T01:28:40Z,,master,feat/mobile_map_mode,5,64,44,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9717
9715,move option `video-save-directory` and `allow-auto-record-outgoing` to local,"[linux_local_option_test.webm](https://github.com/user-attachments/assets/f0925366-e210-43cd-b88a-36c180333713)
",closed,2024-10-21T14:05:54Z,2024-10-22T00:24:52Z,2024-10-22T00:24:52Z,,master,move_record_option_to_local,7,34,14,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9715
9713,Update pl.rs,,closed,2024-10-21T09:07:03Z,2024-10-21T11:55:34Z,2024-10-21T11:55:34Z,,master,master,1,9,9,2,2,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9713
9712,Update ru.rs,,closed,2024-10-21T05:24:42Z,2024-10-21T06:12:58Z,2024-10-21T06:12:58Z,,master,master,1,5,5,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9712
9711,auto record outgoing sessions,"https://github.com/rustdesk/rustdesk/discussions/5453

* Add option to automatically record outgoing sessions
* Within the same connection, all displays and all windows share the same recording state.
* Get width/height from decode callback instead of peer information.

todo:

Android check external storage permission.

Known issue:

* An old problem with Sciter, if the process is stopped directly without stopping the recording, the recording file cannot be played.
* For version lower than 1.2.4, no display field in video frame proto, display index in record filename is always 0.


https://github.com/user-attachments/assets/09c6e167-dc75-4b42-86ff-4ce0e9140745


https://github.com/user-attachments/assets/6b23e9ce-57c3-4f61-9833-ba2d4dd1fe0c


https://github.com/user-attachments/assets/60881a10-045e-45e7-a96c-ba5b9494f938

https://github.com/user-attachments/assets/a8745bb8-ce61-4441-aa3c-50c04a3d1fa6


https://github.com/user-attachments/assets/c8b0cff3-05c7-4e90-a52f-c2cbe7e64a14

https://github.com/user-attachments/assets/0c185078-5ac4-4a4b-8473-e11b5c306a5b

https://github.com/user-attachments/assets/c08faff8-3059-4a7f-8383-7fd8cbab017b


https://github.com/user-attachments/assets/638e4266-d2b9-4642-a517-65dd393342f7

![android-record-file](https://github.com/user-attachments/assets/34bc5977-69f8-4c67-bbf3-0bdbdd717542)

",closed,2024-10-21T04:48:24Z,2024-10-21T06:34:06Z,2024-10-21T06:34:06Z,,master,session_auto_record_outgoing,30,370,287,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9711
9700,"fix: windows, exit fullscreen, remove redraw","https://github.com/rustdesk/rustdesk/issues/9675

https://github.com/leanflutter/window_manager/issues/131#issuecomment-2418423418",closed,2024-10-19T11:32:55Z,2024-10-19T11:41:55Z,2024-10-19T11:41:55Z,,master,fix/windows_exit_fullscreen_remove_redraw,1,2,9,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9700
9699,Update de.rs,,closed,2024-10-19T11:26:34Z,2024-10-19T11:41:14Z,2024-10-19T11:41:14Z,,master,patch-36,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9699
9697,web uni link,"Same uri scheme as desktop, connect like below, any of `/#/`, `/#`,` #/`, `#` is ok

`<DOMAIN>/#/<ID>`
`<DOMAIN>/#/<ID>@<SERVER>?key=KEY&password=<PASSWORD>`
`<DOMAIN>/#/file-transfer/<ID>@<SERVER>?key=<KEY>&password=<PASSWORD>`



https://github.com/user-attachments/assets/6c879acd-7303-4f3f-b700-5b0cb504d0bc

https://github.com/user-attachments/assets/86a92ce6-e05d-45d5-82be-31849a5794e5

https://github.com/user-attachments/assets/3a38603d-7dcc-40d2-829b-9fe1995ca8d4

",closed,2024-10-19T06:01:59Z,2024-10-19T07:32:17Z,2024-10-19T07:32:17Z,,master,web_unilink,3,70,3,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9697
9696,fix: workaround physical display rotation,"https://github.com/rustdesk/rustdesk/discussions/8322

https://github.com/rustdesk/rustdesk/issues/9301

## Preview



https://github.com/user-attachments/assets/430b2c7a-2597-4718-8f73-9417e836b574



## Desc

The only change is returning error if rotation is not 0 for `vram` encoder. 

![image](https://github.com/user-attachments/assets/6b49656e-37b2-4347-bc74-d28d7dfd7377)

The capture will fallback `PixelBuffer` to and  the encoder will fallback to HwRamEncoding.

https://github.com/rustdesk/rustdesk/blob/675ffe038164c802233428736af013a1e0e1e844/libs/scrap/src/dxgi/mod.rs#L260


This is a simple workaround.

We cannot just rotate the image in GPU memory. The only way to do it is rotate in encoding. But it need more changes besides `shader`.
",closed,2024-10-19T02:24:44Z,2024-10-19T02:57:43Z,2024-10-19T02:57:43Z,,master,fix/workaround_physical_display_rotation,3,21,6,1,0,0,rustdesk,COMMENTED,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9696
9694,Update lv.rs,,closed,2024-10-18T14:44:35Z,2024-10-18T14:51:18Z,2024-10-18T14:51:17Z,,master,patch-1,1,5,5,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9694
9692,Update Italian language,"@rustdesk 

Please merge. Thanks.",closed,2024-10-18T07:56:33Z,2024-10-18T08:07:50Z,2024-10-18T08:07:50Z,,master,master,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9692
9689,web only decode the latest image,"1. web only decode the latest image
2. web/ios remove relay server config when import

before:
![before-release](https://github.com/user-attachments/assets/295fd4b3-2142-4c46-8845-8015addb6d92)

after:
![after-release](https://github.com/user-attachments/assets/b0224c39-af7d-4767-9c77-1031c7e88b9b)

https://github.com/user-attachments/assets/6665025b-7b17-47ab-8396-40015ae464ab

",closed,2024-10-18T00:39:14Z,2024-10-18T00:45:16Z,2024-10-18T00:45:16Z,,master,web,2,24,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9689
9687,Update es.rs,New terms added,closed,2024-10-17T15:13:32Z,2024-10-18T00:55:40Z,2024-10-18T00:55:40Z,,master,master,1,5,5,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9687
9686,"feat, web toast",,closed,2024-10-17T09:14:10Z,2024-10-17T09:23:09Z,2024-10-17T09:23:09Z,,master,feat/web_toast,30,63,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9686
9684,"fix: web, clipboard, unfocused tip",,closed,2024-10-17T07:05:47Z,2024-10-17T07:56:08Z,,,master,fix/web_cliboard_unfocused_tip,30,59,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9684
9680,fix gtk-sudo in non-English linux,"change LC_ALL from C.UTF-8 to C

[before.webm](https://github.com/user-attachments/assets/8e1c66ae-3281-4802-87c0-2e50a46f2bf6)

[after.webm](https://github.com/user-attachments/assets/31e0f428-ec7d-4c26-927c-6e32f877a879)
",closed,2024-10-17T02:36:41Z,2024-10-17T12:05:14Z,2024-10-17T12:05:14Z,,master,LC_ALL-C,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9680
9676,fix: build,,closed,2024-10-16T12:22:53Z,2024-10-16T12:25:30Z,,,master,fix/build,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9676
9672,Update tw.rs,,closed,2024-10-16T06:28:02Z,2024-10-16T11:33:27Z,2024-10-16T11:33:27Z,,master,patch-2,1,5,5,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9672
9668,Update de.rs,,closed,2024-10-15T20:23:51Z,2024-10-16T03:23:12Z,2024-10-16T03:23:12Z,,master,patch-35,1,3,3,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9668
9667,"fix: android, Korean input","
## Preview

https://github.com/user-attachments/assets/29ecbae6-bd52-447c-917e-bc9e35cdd59f

## Desc

Korean input are directly changed in the text form. We can't use the character length to compare.

After input, `onChanged` may not be triggered, but `_textController.value.isComposingRangeValid` will be `false`.

Maybe a better way is to listen a composing end event, or register a callback, but I didn't find one.

So as a workaround, we have to add a timer to detect if composing end.

",closed,2024-10-15T18:08:28Z,2024-10-18T00:55:18Z,2024-10-18T00:55:18Z,,master,fix/android_input_korean,1,12,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9667
9666,feat: option tls,"https://github.com/rustdesk/rustdesk-server-pro/issues/417

https://github.com/rustdesk/rustdesk-server-pro/issues/189

## Issue

on MacOS

<img width=""470"" alt=""928157c54c3f"" src=""https://github.com/user-attachments/assets/25b6f758-c0f1-4e66-a6f7-928157c54c3f"">

onWindows

<img width=""470"" alt=""1729012300941"" src=""https://github.com/user-attachments/assets/4874faaa-19d0-47ef-8291-e066c647a0bd"">

## Preview


<img width=""470"" alt=""10721ff32fd7"" src=""https://github.com/user-attachments/assets/8d07ff8b-f1a1-4e56-8896-4797ed100ed4"">

<img width=""470"" alt=""85617e50b404"" src=""https://github.com/user-attachments/assets/9db53efc-67f2-4b95-a3d4-949ad9f2a213"">

<img width=""470"" alt=""31c0634de96e"" src=""https://github.com/user-attachments/assets/3f34a02f-b4a8-4130-841e-31c0634de96e"">

## Tests

- [x] Windows
  - [x] flutter
  - [x] sciter
- [x] MacOS

",closed,2024-10-15T17:18:14Z,2024-10-16T03:03:04Z,,,master,feat/option_tls,30,118,9,3,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9666
9653,"fix: wayland, rdp, simualte lock keys","https://github.com/rustdesk/rustdesk/issues/8760

https://github.com/rustdesk/rustdesk/pull/9641

1. The controlling side: send `CapsLock` and `NumLock` to the controlled side if it is Linux.
2. The controlled side:
    (1) `Wayland` rdp input: handle the `CapsLock` and `NumLock` key events and ignore the lock states within the key events.
    (2) X11 or `Wayland` uinput: handle the lock states within the key events and ignore the `CapsLock` and `NumLock` key events.

**Note**: There's also a side effect that the led may be changed after the remote control. The same to https://github.com/rustdesk/rustdesk/pull/9641

## Tests

Windows -> Linux, ""Map mode"" and ""Translate mode""

- [x] X11
- [x] Wayland rdp input
- [x] Wayland uinput

## TODO

1. Remember the lock state before connecting? What if there're multiple controlling end.
",open,2024-10-14T17:03:58Z,,,,master,fix/wayland_rdp_simulate_lock_keys,2,63,30,1,1,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9653
9650,Update Italian language,"@rustdesk 

Please merge. Thanks.",closed,2024-10-14T13:25:38Z,2024-10-14T13:26:55Z,2024-10-14T13:26:55Z,,master,master,1,3,3,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9650
9647,fix theme radio update,"Fix by await changing function

Before:


https://github.com/user-attachments/assets/5082fe78-038f-4cb0-b967-dc759b7e249f

![c1925031e2cc95bfc7ed6057a4b19fd](https://github.com/user-attachments/assets/fbf113c2-068d-43f8-b661-6b38e2827157)


After:


https://github.com/user-attachments/assets/4a577a86-a976-44db-9ee3-2241cc431907

",closed,2024-10-14T09:40:30Z,2024-10-14T09:46:38Z,2024-10-14T09:46:38Z,,master,web,3,4,4,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9647
9646,add missing code of last commit,https://github.com/rustdesk/rustdesk/pull/9643,closed,2024-10-14T07:50:30Z,2024-10-14T07:51:51Z,2024-10-14T07:51:51Z,,master,web,1,16,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9646
9645,fix: flickers child screen when resizing window,"Fix: https://github.com/rustdesk/rustdesk/issues/8505
Apply the fix https://github.com/rustdesk-org/rustdesk_desktop_multi_window/pull/26

Original fix https://github.com/rustdesk-org/rustdesk_desktop_multi_window/pull/11

## Preview

### Without init background


https://github.com/user-attachments/assets/15488707-07bf-42db-aa75-d0563d64a68f



### With init black background


https://github.com/user-attachments/assets/def07d66-fd39-4c3b-8f14-73772ce960ce

",closed,2024-10-14T05:14:26Z,2024-10-14T07:48:56Z,2024-10-14T07:48:56Z,,master,fix/windows_flickers_on_resizing_window,2,4,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9645
9644,fix: TextFormField onChanged event triggered multiple times when Korean input,"issue: [(8786)](https://github.com/rustdesk/rustdesk/issues/8786#issuecomment-2401286686)

The cause of this bug has been identified. When entering and clicking on Korean content, the onChanged event of the TextFormField is triggered multiple times.

For example: 
When inputting ㅎ → ㅏ → 하, the onChanged event is triggered 4 times: ㅎ → ' ' → ㅏ → ' ' → 하. 
When inputting ㄱ → ㅏ → ㅇ → 강, the event is triggered 6 times: ㄱ → ' ' → ㅏ → ' ' → ㅇ → ' ' → 강.

This issue is caused by the positional changes of Korean characters with each new symbol. These multiple unnecessary onChanged triggers cause our _handleIOSSoftKeyboardInput function to execute incorrectly, which leads to the previous bug.

We only need to give a little more time to allow the keyboard input engine to finish constructing the Korean characters before triggering the onChanged event. Of course, this is somewhat of a hacky fix.",closed,2024-10-14T05:04:40Z,2024-10-16T11:25:27Z,2024-10-16T11:25:27Z,,master,fix/korean_input,1,8,4,4,10,0,"rustdesk, rustdesk, shleyZ, rustdesk, rustdesk, shleyZ","CHANGES_REQUESTED, CHANGES_REQUESTED, COMMENTED, CHANGES_REQUESTED, COMMENTED, COMMENTED",False,https://api.github.com/repos/rustdesk/rustdesk/issues/9644
9643,combine upload files/folder button,"1. Combine upload files/folder button
2. Compress web cache

https://github.com/user-attachments/assets/25e5ea25-0574-4f76-8f4d-535c415058d1

",closed,2024-10-14T05:00:25Z,2024-10-14T07:46:22Z,2024-10-14T07:46:22Z,,master,web,30,153,42,2,1,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9643
9641,fix: wayland CapsLock,"https://github.com/rustdesk/rustdesk/issues/8760

Fix `CapsLock` when the remote side is Wayland.

Flatpak and Appimage, which use rdp input(xdg desktop portal) is still not fixed. https://flatpak.github.io/xdg-desktop-portal/docs/doc-org.freedesktop.impl.portal.RemoteDesktop.html

## Preview

### uinput

https://github.com/user-attachments/assets/72865cd3-11fe-4506-b9cd-a0d900ed9e89

### rdp

https://github.com/user-attachments/assets/b864c90a-785f-463e-8eec-873d6ae03025

## Desc

RustDesk sends keys with additional `CapsLock` state to the remote side.

The remote side will 
1. Click `CapsLock`.
2. Simulate key.
3. Click `CapsLock` to revert the state.

But for uinput and rdp input, there should be a delay to ensure the `CapsLock` state take effect.

### Uinput

The remote side will click `CapsLock` and wait the state to be changed when it finds current state is not the same to the key event from the local side.

But it will not change the `CapsLock` state back.
Because there must be a delay to ensure the lock state is applied on Wayland uinput, which may affect the user experience.

**Note**: So there's a side effect that the `CapsLock` state may be changed after the remote control

### Rdp input

Rdp input just add a delay to wait the `CapsLock` state be changed. So the letters may not be correct.

Because there's no api to query the `CapsLock` state.
`/usr/input/eventX` also requires the root permission.

## Tests

The following test are `Windows -> `, ""Map mode"" and ""Translate mode"".

- [x] Linux
  - [x] X11
  - [x] Wayland
    - [x] Installed version
    - [x] Appimage and Flatpak.
- [x] Windows
- [x] MacOS

**Note**: Appimage and Flatpak are not good as descripted above.


",closed,2024-10-14T02:25:44Z,2024-10-14T03:46:28Z,2024-10-14T03:46:28Z,,master,fix/wayland_capslock,2,35,5,3,1,0,"rustdesk, fufesou","COMMENTED, COMMENTED",False,https://api.github.com/repos/rustdesk/rustdesk/issues/9641
9640,web,"resolution, image quality, tab name, last remote id",closed,2024-10-14T00:42:54Z,2024-10-14T03:15:52Z,2024-10-14T03:15:52Z,,master,web,5,28,22,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9640
9639,Update README-UA.md,"Synced changes, fixed language URLs.",closed,2024-10-13T20:28:29Z,2024-10-14T03:02:57Z,2024-10-14T03:02:57Z,,master,ukrainian-readme-translation,1,19,17,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9639
9638,Update uk.rs,,closed,2024-10-13T19:40:57Z,2024-10-14T03:02:44Z,2024-10-14T03:02:44Z,,master,ukrainian-translation,1,11,11,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9638
9634,refact: remove redundant escape,"`'\1'` is equal to `'1'` in dart, as they are both string `""1""`.

Dart has **its own** escape rule, which is different to `C/C++`.

![image](https://github.com/user-attachments/assets/ae338d4d-b462-4774-a283-b2d1c6f7ba66)


early assert `assert('\1' != '1');` for test

![image](https://github.com/user-attachments/assets/9b7e887b-7b71-4d44-830e-0d273cdf19e6)
",closed,2024-10-12T16:10:59Z,2024-10-12T17:07:47Z,2024-10-12T17:07:47Z,,master,refact/flutter_remove_redundant_escape,3,9,4,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9634
9626,common.rs,,closed,2024-10-11T10:42:40Z,2024-10-11T10:47:34Z,,,master,patch-1,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9626
9625,remove shift & tap enable multiselect,,closed,2024-10-11T08:40:08Z,2024-10-11T08:47:08Z,2024-10-11T08:47:08Z,,master,remove_shift_tap_enable_multiselect,2,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9625
9622,fix web peer card tap,"Fix: single tap enter multi select mode on web
After fix:
* not in multiselect mode:
  * desktop/web:
    * tap: nothing
    * tap + shift: select
    *  double tap: connect
    * long press: nothing
  * mobile:
    * tap: connect
    * double tap: connect
    * long press: select

* multi select mode: always select

Other changes are code format.",closed,2024-10-11T06:59:55Z,2024-10-11T08:35:15Z,2024-10-11T08:35:15Z,,master,fix_peer_card_tap,3,94,91,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9622
9621,update ID trans,,closed,2024-10-11T02:41:16Z,2024-10-11T02:43:22Z,2024-10-11T02:43:22Z,,master,master,1,12,12,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9621
9618,Web password source,,closed,2024-10-11T01:37:35Z,2024-10-11T01:52:09Z,2024-10-11T01:52:09Z,,master,web_password_source,4,22,10,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9618
9611,config.rs,,closed,2024-10-10T07:49:05Z,2024-10-10T07:49:34Z,,,master,patch-1,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9611
9610,rustdesk-cyserver,rustdesk-cyserver,closed,2024-10-10T02:44:39Z,2024-10-10T02:46:21Z,,,master,master,2,3,3,3,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9610
9609,Update ID translation,,closed,2024-10-10T02:09:49Z,2024-10-10T02:12:24Z,2024-10-10T02:12:24Z,,master,master,1,37,37,8,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9609
9606,Add missing Slovenian translations,,closed,2024-10-09T18:33:47Z,2024-10-09T23:35:46Z,2024-10-09T23:35:46Z,,master,patch-1,1,265,265,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9606
9601,Update indonesian translate,,closed,2024-10-09T02:32:41Z,2024-10-09T02:44:20Z,2024-10-09T02:44:20Z,,master,master,1,37,37,5,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9601
9600,Update eo.rs,,closed,2024-10-09T01:49:34Z,2024-10-09T02:01:54Z,2024-10-09T02:01:54Z,,master,patch-1,1,120,120,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9600
9597,refact: remote toolbar style,"
https://github.com/user-attachments/assets/2cd1aa06-67b2-4980-9017-f958b154f448


https://github.com/user-attachments/assets/21d95384-fa4e-49f5-90af-60c89a202d12

",closed,2024-10-08T13:02:20Z,2024-10-08T13:16:08Z,2024-10-08T13:16:07Z,,master,refact/remote_toolbar_style,1,32,13,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9597
9594,"fix: web, 2fa, trust",,closed,2024-10-08T10:31:03Z,2024-10-08T10:35:25Z,2024-10-08T10:35:25Z,,master,fix/web_2fa_trust,1,6,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9594
9588,fix: web chat,,closed,2024-10-08T05:17:10Z,2024-10-08T07:23:00Z,2024-10-08T07:23:00Z,,master,fix/web_chat,4,46,27,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9588
9587,web file transfer,,closed,2024-10-08T01:04:36Z,2024-10-12T01:03:13Z,2024-10-12T01:03:13Z,,master,web_ft,9,411,194,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9587
9586,Add `Priority:` to Debian control,"#9584 

I forgot `Priority:` is also missing, both of them aren't missing in RustDesk Server.

https://github.com/rustdesk/rustdesk-server/blob/6f18a97644cc3176b923ce5a6aad88bec41d6046/debian/control.tpl#L2-L3",closed,2024-10-07T13:59:21Z,2024-10-07T14:08:17Z,2024-10-07T14:08:17Z,,master,debian-control-priority,1,1,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9586
9585,"Revert ""Flatpak manifest updates from the Flathub's PR""",Reverts rustdesk/rustdesk#9581,closed,2024-10-07T13:49:54Z,2024-10-07T13:50:01Z,2024-10-07T13:50:01Z,,master,revert-9581-flathub-manifest-updates,4,37,72,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9585
9584,Add `Section: net` to Debian control,"https://www.debian.org/doc/debian-policy/ch-archive.html#s-subsections

RustDesk have no `Section: ` in Debian control, it is needed if RustDesk want to submit to big/official repos in the future.",closed,2024-10-07T13:20:12Z,2024-10-07T13:46:26Z,2024-10-07T13:46:26Z,,master,debian-control-section,1,1,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9584
9582,fix: web send audit note,,closed,2024-10-07T11:08:10Z,2024-10-07T13:37:43Z,2024-10-07T13:37:43Z,,master,fix/web_send_note,3,11,4,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9582
9581,Flatpak manifest updates from the Flathub's PR,"Hello @rustdesk!

As you know, I recently [passed a code review in the Flathub repository](https://github.com/flathub/flathub/pull/5670). During the review, Flathub's reviewers suggested a few changes to the manifest file and asked that you also add a metainfo file to your repository. I have checked locally that everything seems to work with updated manifes, so I think it would be a good thing to modify your manifest file as well, to ensure consistency between your flatpak configuration and the one from the Flathub. If you decide to merge these changes, the only difference between the configurations would be the `""--talk-name=org.freedesktop.Flatpak""` finish argument, which was removed in Fluthub's version due to security issues.

Please feel free to implement only the changes that you find suitable for your Flatpak build. Thank you for considering this suggestion.",closed,2024-10-07T10:42:20Z,2024-10-07T10:55:26Z,2024-10-07T10:55:25Z,,master,flathub-manifest-updates,4,72,37,1,3,0,"rustdesk, besdar, besdar","COMMENTED, COMMENTED, COMMENTED",False,https://api.github.com/repos/rustdesk/rustdesk/issues/9581
9578,"refact: web, no minimize btn on fullscreen",,closed,2024-10-07T03:56:33Z,2024-10-07T04:00:56Z,2024-10-07T04:00:56Z,,master,refact/web_no_minimize_on_fullscreen,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9578
9577,fix: web fullscreen,"
https://github.com/user-attachments/assets/91dac140-4ca5-4741-b161-d0b2091428cf

1. Add close button when toolbar is hidden.
2. Fullscreen on toolbar.
",closed,2024-10-06T15:55:21Z,2024-10-06T16:01:14Z,2024-10-06T16:01:14Z,,master,fix/web_fullscreen,4,80,18,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9577
9575,"remove mobile web setting, remove web/ios relay server setting","![image](https://github.com/user-attachments/assets/d71fb96c-b1bc-429c-b77e-7cedeae7fd6f)
",closed,2024-10-06T08:12:59Z,2024-10-06T08:20:37Z,2024-10-06T08:20:37Z,,master,remove_mobile_web_setting,3,13,82,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9575
9570,"fix: installed, copy&paste, special format",https://github.com/rustdesk/rustdesk/discussions/9568,closed,2024-10-05T15:12:43Z,2024-10-06T00:32:04Z,2024-10-06T00:32:04Z,,master,fix/installed_version_copy_paste_special_format,3,3,0,1,7,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9570
9566,Update id (Indonesia) translation on some part,I made some changes to the Indonesian translation to make it sound more natural.,closed,2024-10-05T01:29:25Z,2024-10-05T02:54:17Z,2024-10-05T02:54:17Z,,master,master,1,17,17,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9566
9562,"fix: windows, multi-window, move between monitors","https://github.com/rustdesk-org/rustdesk_desktop_multi_window/pull/25


## Tests

### Single monitor

- [x] ""Minimize, Restore/Maximize, Close"" buttons.
  - [x] Remote window
- [x] Window edges, normal, maximized, fullscreen.  Whether the edges can be shown.
  - [x] Remote window

![a](https://github.com/user-attachments/assets/9443f8d2-d70f-43fc-b0c7-c8a112099b56)


- [x] Resizing
  - [x] Remote window
  - [x] Corner resize
  - [x] Edge resize
- [x] Show all contents, without crops. Remote window, normal, maximized, fullscreen. eg. https://github.com/rustdesk/rustdesk/issues/8979

### Multiple monitors

- [x] Different arrangements.

<img width=""559"" alt=""a"" src=""https://github.com/user-attachments/assets/429fa757-ff0c-453c-8001-2c881bfcf472"">

- [x] Different main display.
  - [x] Display 1 as main display
  - [x] Display 2 as main display
  - [x] Display 3 as main display

- [x] Different scale on some monitors.
  - [x] Display 1 (100), Display 2 (150), Display 3(200)
  - [x] Display 1 (150), Display 2 (120), Display 3(100)

- [x] Get window monitor, restore from minimized state. 
  - [x] https://github.com/rustdesk/rustdesk/issues/9481
 
",closed,2024-10-04T11:40:39Z,2024-10-04T14:05:38Z,2024-10-04T14:05:38Z,,master,fix/windows_multi_window_moving_between_monitors,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9562
9552,"fix: deb, build, prerm","User service is added in https://github.com/rustdesk/rustdesk/pull/932 and removed in https://github.com/rustdesk/rustdesk/pull/1741

But it's always safe to run the following commands in on `remove|upgrade` in `res/DEBIAN/prerm`
```bash
			serverUser=$(ps -ef | grep -E 'rustdesk +--server' | grep -v 'sudo ' | awk '{print $1}' | head -1)
			if [ ""$serverUser"" != """" ] && [ ""$serverUser"" != ""root"" ]
			then
				systemctl --machine=${serverUser}@.host --user stop rustdesk >/dev/null 2>&1 || true
			fi
```

No need to check current OS version at all.


The check is added in https://github.com/rustdesk/rustdesk/pull/1510 without specific description.
",closed,2024-10-03T09:37:10Z,2024-10-03T09:56:21Z,2024-10-03T09:56:21Z,,master,fix/deb_build_prerm,1,3,8,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9552
9546,Improved Catalan translation,"Translation of the «ca.rs» file from scratch (based on the original «template.rs» and «en.rs» English file), using as a reference the official Catalan guideline, recommended in other projects such as [Launchpad](https://help.launchpad.net/Translations/GuidesList) in order to have a homogeneous translation, while also avoiding grammatical errors existing in the current translation (it seems to be the result of an automatic translation, and generated from a language other than English [es-ES, perhaps?]).
[ca.rs](https://github.com/BennyBeat/rustdesk/blob/master/src/lang/ca.rs)",closed,2024-10-02T18:24:54Z,2024-10-03T07:02:24Z,2024-10-03T07:02:24Z,,master,master,1,463,463,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9546
9541,fix wrong terms in tw lang,"""port"" is ""通訊埠"", ""連接埠"" or just ""埠"" in Taiwan, ""端口"" is used in China.",closed,2024-10-02T05:06:19Z,2024-10-03T07:01:53Z,2024-10-03T07:01:53Z,,master,hms5232-patch-1,1,2,2,1,1,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9541
9540,Update build.rs,"Analysis of the Code
Configuration Macros:

The use of #[cfg(...)] is appropriate for conditional compilation based on the target operating system or feature flags. Error Handling:

There is a lack of error handling in several places. For example, std::env::var calls could fail if the environment variable is not set. This can lead to panics, which is undesirable in production code. Code Duplication:

The install_android_deps function has repetitive code for setting target_arch. This could be streamlined. Unused Imports:

There are some unused imports, such as use std::io::Write; inside build_manifest. They should be scoped or imported only if necessary. Formatting and Readability:

The use of format! in println! statements can be simplified. In most cases, the format string can be passed directly to println!. Potential Logical Errors:

In install_android_deps, if the CARGO_CFG_TARGET_OS is not android, the function returns immediately. However, it could be clearer if it included a log statement indicating this early exit. Code Organization:

The function main could benefit from better organization or helper functions to improve readability.",closed,2024-10-01T20:10:58Z,2024-10-03T07:00:15Z,,,master,master,1,42,44,1,1,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9540
9535,"fix: web/mobile, skip querying onlines, if not in main page","Introduce two global variables to check if skip querying onlines:
1. `isWebVisible`. Tab is active, window is minimized, window is hidden by other windows.
2. `isInMainPage`. Page is main or remote.",closed,2024-10-01T05:04:56Z,2024-10-01T07:26:00Z,2024-10-01T07:26:00Z,,master,fix/web_skip_querying_online_if_not_in_main_page,6,24,3,3,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9535
9524,"fix: web, forget password",,closed,2024-09-30T14:40:06Z,2024-09-30T23:04:43Z,2024-09-30T23:04:43Z,,master,fix/web_forget_password,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9524
9523,strings.xml,,closed,2024-09-30T14:21:56Z,2024-09-30T14:23:30Z,,,master,patch-2,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9523
9508,Change the value of kMinQuality to 5 ,"I forgot to change the constant value, so I made an additional modification.",closed,2024-09-28T13:46:45Z,2024-09-28T13:52:05Z,2024-09-28T13:52:05Z,,master,expand-bitrate-slider-range,1,2,2,3,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9508
9507,Update nl.rs,,closed,2024-09-28T12:06:19Z,2024-09-28T12:07:56Z,2024-09-28T12:07:56Z,,master,patch-4,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9507
9506,"fix: windows, subwindow, scale","https://github.com/rustdesk/rustdesk/issues/9481#issuecomment-2378509607

https://github.com/rustdesk-org/rustdesk_desktop_multi_window/pull/24


## Tests

### Single monitor

- [x] ""Minimize, Restore/Maximize, Close"" buttons.
  - [x] Remote window
- [x] Window edges, normal, maximized, fullscreen.  Whether the edges can be shown.
  - [x] Remote window

![a](https://github.com/user-attachments/assets/9443f8d2-d70f-43fc-b0c7-c8a112099b56)


- [x] Resizing
  - [x] Remote window
  - [x] Corner resize
  - [x] Edge resize
- [x] Show all contents, without crops. Remote window, normal, maximized, fullscreen. eg. https://github.com/rustdesk/rustdesk/issues/8979

### Multiple monitors

- [ ] Different arrangements.

<img width=""559"" alt=""a"" src=""https://github.com/user-attachments/assets/429fa757-ff0c-453c-8001-2c881bfcf472"">

- [x] Different main display.
  - [x] Display 1 as main display
  - [x] Display 2 as main display
  - [x] Display 3 as main display

- [x] Different scale on some monitors.
  - [x] Display 1 (100), Display 2 (150), Display 3(200)
  - [x] Display 1 (150), Display 2 (120), Display 3(100)

- [ ] Get window monitor, restore from minimized state. 
  - [x] https://github.com/rustdesk/rustdesk/issues/9481
  - [x] https://github.com/rustdesk/rustdesk/issues/9479
",closed,2024-09-28T11:42:11Z,2024-09-28T11:43:28Z,2024-09-28T11:43:28Z,,master,fix/windows_subwindow_scale,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9506
9503,Update it.rs,"Changed ""Scehrmo"" to ""Schermo""",closed,2024-09-28T10:03:19Z,2024-09-28T10:04:32Z,2024-09-28T10:04:31Z,,master,patch-1,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9503
9502,Rustdesk yonfei,,closed,2024-09-28T08:42:21Z,2024-09-28T09:02:17Z,,,master,rustdesk-yonfei,13,22,22,13,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9502
9501,Update nl.rs,,closed,2024-09-28T07:49:04Z,2024-09-28T07:49:11Z,2024-09-28T07:49:11Z,,master,rustdesk-patch-1,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9501
9500,Update nl.rs,,closed,2024-09-28T07:32:10Z,2024-09-28T07:33:09Z,2024-09-28T07:33:09Z,,master,patch-3,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9500
9496,Update de.rs,,closed,2024-09-27T21:06:51Z,2024-09-28T01:25:35Z,2024-09-28T01:25:35Z,,master,patch-34,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9496
9495,Update ru.rs,,closed,2024-09-27T20:43:00Z,2024-09-28T01:25:52Z,2024-09-28T01:25:52Z,,master,master,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9495
9493,Update Italian language,"@rustdesk 

Please merge. Thanks.",closed,2024-09-27T17:16:46Z,2024-09-28T01:26:05Z,2024-09-28T01:26:05Z,,master,master,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9493
9491,chore,,closed,2024-09-27T14:10:29Z,2024-09-27T15:10:51Z,2024-09-27T15:10:51Z,,master,fix/translation,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9491
9490,"refact: web desktop, web_id_input_tip",![image](https://github.com/user-attachments/assets/56ca4903-9219-4544-8648-bd2d3af42bc3),closed,2024-09-27T12:10:45Z,2024-09-27T13:56:11Z,2024-09-27T13:56:11Z,,master,refact/web_desktop_id_input_tip,30,74,32,4,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9490
9482,"fix: windows, window, restore from minimized state","https://github.com/rustdesk/rustdesk/issues/9481

https://github.com/rustdesk/rustdesk/issues/9479

https://github.com/rustdesk-org/rustdesk_desktop_multi_window/pull/23

## Tests

### Single monitor

- [x] ""Minimize, Restore/Maximize, Close"" buttons.
  - [x] Remote window
- [x] Window edges, normal, maximized, fullscreen.  Whether the edges can be shown.
  - [x] Remote window

![a](https://github.com/user-attachments/assets/9443f8d2-d70f-43fc-b0c7-c8a112099b56)


- [x] Resizing
  - [x] Remote window
  - [x] Corner resize
  - [x] Edge resize
- [x] Show all contents, without crops. Remote window, normal, maximized, fullscreen. eg. https://github.com/rustdesk/rustdesk/issues/8979

### Multiple monitors

- [ ] Different arrangements.

<img width=""559"" alt=""a"" src=""https://github.com/user-attachments/assets/429fa757-ff0c-453c-8001-2c881bfcf472"">

- [x] Different main display.
  - [x] Display 1 as main display
  - [x] Display 2 as main display
  - [x] Display 3 as main display

- [x] Different scale on some monitors.
  - [x] Display 1 (100), Display 2 (150), Display 3(200)
  - [x] Display 1 (150), Display 2 (120), Display 3(100)

- [ ] Get window monitor, restore from minimized state. 
  - [x] https://github.com/rustdesk/rustdesk/issues/9481
  - [x] https://github.com/rustdesk/rustdesk/issues/9479
",closed,2024-09-27T06:13:57Z,2024-09-27T06:18:57Z,2024-09-27T06:19:25Z,,master,fix/windows_window_restore_from_min_state,1,1,1,1,2,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9482
9480,Change the minimum value of the bitrate slider to 5,"When cellular communication is under a speed restriction and there are significant changes on the screen, there was some lag when the minimum bitrate was set to 10%. Therefore, I would like the minimum value to be set to 5%.",closed,2024-09-27T02:12:40Z,2024-09-27T02:14:46Z,2024-09-27T02:14:46Z,,master,expand-bitrate-slider-range,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9480
9478,pr,,closed,2024-09-26T20:33:09Z,2024-09-26T20:38:30Z,,,master,master,19,52,62,24,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9478
9476,Refactor ScanPage for better performance and memory management,"- Added null checks in `reassemble` method to avoid potential null pointer exceptions when pausing/resuming the camera.
- Refactored image picking and QR code decoding process to use async/await, avoiding UI blocking with synchronous file reads.
- Improved exception handling by making it more specific to QR code reading errors.
- Introduced `StreamSubscription` for the QR scan listener and ensured proper cancellation in `dispose` method to prevent memory leaks.
- Separated button building logic (`_buildImagePickerButton`, `_buildFlashToggleButton`, `_buildCameraSwitchButton`) to enhance code readability and maintainability.",closed,2024-09-26T12:57:46Z,2024-09-26T13:02:14Z,,,master,master,1,81,70,1,2,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9476
9475,"fix ab peers view,  all peer tab use global peers model","https://github.com/rustdesk/rustdesk/discussions/9122#discussioncomment-10759247 https://github.com/rustdesk/rustdesk/pull/9459

Use `ChangeNotifierProvider<Peers>.value`, and each peer tab has a global unique `Peers` model, then ""load Peers"" and ""build Peers"" will always be the same one.


[desktop.webm](https://github.com/user-attachments/assets/c38ad306-552b-4f61-97af-25782eaa9a8b)

https://github.com/user-attachments/assets/8db0cd79-392b-4cd0-b5e5-e0f2799476c2

",closed,2024-09-26T12:17:41Z,2024-09-26T14:08:32Z,2024-09-26T14:08:32Z,,master,fix_ab_peers_view,6,134,92,1,2,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9475
9471,"Revert ""fix peers view ChangeNotifierProvider update""",Reverts rustdesk/rustdesk#9459,closed,2024-09-26T06:20:30Z,2024-09-26T06:20:37Z,2024-09-26T06:20:37Z,,master,revert-9459-fix_peers_view_update,1,5,7,1,1,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9471
9468, config.rs,I want to compile my rustdesk client,closed,2024-09-26T04:51:49Z,2024-09-26T06:07:03Z,,,master,patch-1,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9468
9464,Refactor ScanPage for better performance and memory management,"- Added null checks in `reassemble` method to avoid potential null pointer exceptions when pausing/resuming the camera.
- Refactored image picking and QR code decoding process to use async/await, avoiding UI blocking with synchronous file reads.
- Improved exception handling by making it more specific to QR code reading errors.
- Introduced `StreamSubscription` for the QR scan listener and ensured proper cancellation in `dispose` method to prevent memory leaks.
- Separated button building logic (`_buildImagePickerButton`, `_buildFlashToggleButton`, `_buildCameraSwitchButton`) to enhance code readability and maintainability.",closed,2024-09-25T17:58:40Z,2024-09-26T02:34:12Z,2024-09-26T02:34:12Z,,master,master,1,81,70,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9464
9463,New translation terms,,closed,2024-09-25T15:45:54Z,2024-09-26T01:29:49Z,2024-09-26T01:29:49Z,,master,master,1,3,3,4,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9463
9459,fix peers view ChangeNotifierProvider update,"Fix https://github.com/rustdesk/rustdesk/issues/9455
* This can be reproduced on 1.3.1 android release, 1.3.0 android debug, can't be reproduced on desktop, 1.3.0 mobile release
* Reason: The value of `peers` and `widget.peers` are different, `peers` doesn't update.
![bug](https://github.com/user-attachments/assets/f4221335-bfac-4f1f-804a-686359988325)
* Fix: One way is using `ChangeNotifierProvider<Peers>.value`, https://pub.dev/packages/provider: `If you already have an object instance and want to expose it, it would be best to use the .value constructor of a provider`, all other places in souce code use `ChangeNotifierProvider.value`, another way is using `widget.peers` in `Consumer`.

https://github.com/user-attachments/assets/d3d5ced5-8503-4b4c-8f77-1fa99eceb58a


https://github.com/user-attachments/assets/196d5bdb-7b80-4ab7-b2a3-cb195f4edd0e

",closed,2024-09-25T06:30:31Z,2024-09-25T07:11:11Z,2024-09-25T07:11:11Z,,master,fix_peers_view_update,1,7,5,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9459
9457,Update README-ZH.md,,closed,2024-09-24T22:05:15Z,2024-09-25T00:48:45Z,2024-09-25T00:48:45Z,,master,master,1,7,4,8,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9457
9452,Update Italian language,"@rustdesk 

Please merge. Thanks.",closed,2024-09-24T12:13:55Z,2024-09-24T12:33:28Z,2024-09-24T12:33:28Z,,master,master,1,4,4,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9452
9445,refact: web elevation,Web elevation.,closed,2024-09-24T05:41:07Z,2024-09-24T05:53:17Z,2024-09-24T05:53:17Z,,master,refact/web_elevation,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9445
9444,fix check software update,"`check_software_update` runs in a new thread, won't return directly.

https://github.com/rustdesk/rustdesk/blob/49989e34e44fdda580fe3f453aa2eff7f6bcd6ca/src/common.rs#L814

![ece7853232997253b13e686d4f95e05](https://github.com/user-attachments/assets/aecc66b7-43f4-40f9-a9b8-7731976ce2ca)
",closed,2024-09-24T03:11:23Z,2024-09-24T03:37:30Z,2024-09-24T03:37:30Z,,master,fix_check_update,4,40,4,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9444
9437,Update lv.rs,,closed,2024-09-23T14:55:45Z,2024-09-24T01:51:58Z,2024-09-24T01:51:58Z,,master,patch-1,1,3,3,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9437
9434,"fix: keyboard, change mode, await, on input source changed",,closed,2024-09-23T09:27:13Z,2024-09-23T09:31:37Z,2024-09-23T09:31:37Z,,master,fix/keyboard_change_mode_await_on_input_source_changed,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9434
9432,"refact: web, keyboard, translate mode","1. Return `KeyEventResult.ignored` for web, then js can listen keyboard events.
2. ""Input source 1"" - javascript, ""Input source 2"" - flutter
",closed,2024-09-23T08:56:48Z,2024-09-23T08:58:21Z,2024-09-23T08:58:21Z,,master,refact/web_keyboard_translate_mode,3,35,16,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9432
9428,Fix F-Droid build and bump Android NDK,"Second attempt to fix F-Droid build after @21pages showed that the flutter-build CI fix was not propagated to `build_fdroid.sh`.

Alsobump Android NDK to r27b from r27.
",closed,2024-09-23T02:00:18Z,2024-09-23T08:43:59Z,2024-09-23T08:43:59Z,,master,fdroid-buildscript,2,2,1,2,1,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9428
9427,update web,,closed,2024-09-22T23:20:27Z,2024-09-23T01:18:22Z,2024-09-23T01:18:22Z,,master,update_web,2,2,3,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9427
9426,Update translation,add translation for tw.rs and fix typo on cn.rs,closed,2024-09-22T20:49:32Z,2024-09-23T01:17:13Z,2024-09-23T01:17:13Z,,master,patch-1,2,4,4,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9426
9425,0,0,closed,2024-09-22T18:56:00Z,2024-09-22T19:20:31Z,,,master,master,2,3,3,2,0,0,,,True,https://api.github.com/repos/rustdesk/rustdesk/issues/9425
9424,Fix android build and bump ndk,"- **Bump flutter for Android to 3.19.6**
- **Bump Android NDK to r27b**
",closed,2024-09-22T17:43:35Z,2024-09-23T01:16:16Z,,,master,fdroid-buildscript,1,2,2,2,2,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9424
9422,Update nl.rs,,closed,2024-09-22T10:02:29Z,2024-09-22T11:06:33Z,2024-09-22T11:06:33Z,,master,patch-2,1,3,3,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9422
9421,Update ru.rs,,closed,2024-09-22T05:42:53Z,2024-09-22T11:06:45Z,2024-09-22T11:06:45Z,,master,master,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9421
9416,Update uk.rs,,closed,2024-09-20T13:15:39Z,2024-09-20T13:38:16Z,2024-09-20T13:38:16Z,,master,patch-1,1,12,12,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9416
9415,锈桌3.0,,closed,2024-09-20T12:40:44Z,2024-09-20T14:02:18Z,,,master,RustDesk3.0,16,138,468,28,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9415
9411,Update ko.rs,Add Korean language,closed,2024-09-20T06:53:45Z,2024-09-20T07:16:20Z,2024-09-20T07:16:20Z,,master,master,1,6,6,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9411
9410,flutter-ci.yml,,closed,2024-09-20T06:40:27Z,2024-09-20T07:15:59Z,,,master,patch-2,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9410
9409,config.rs,,closed,2024-09-20T06:38:29Z,2024-09-20T07:15:39Z,,,master,patch-1,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9409
9406,"fix: keyboard, translate mode","Fix hotkey, linux-> win, since https://github.com/rustdesk/rustdesk/pull/4144


Hotkeys like `Ctrl+c/v` do not work if combining characters are stimulated by `dev::simulate unicode()`.

",closed,2024-09-20T02:16:44Z,2024-09-20T02:52:19Z,2024-09-20T02:52:19Z,,master,fix/keyboard_translate_mode_hotkey_linux_win,1,27,6,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9406
9403,Update Italian language,"@rustdesk 

Please merge. Thanks.",closed,2024-09-19T20:00:16Z,2024-09-20T02:54:38Z,2024-09-20T02:54:38Z,,master,master,1,9,9,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9403
9402,"fix: wayland, rdp input, mouse, scale","https://github.com/rustdesk/rustdesk/issues/8524
https://github.com/rustdesk/rustdesk/pull/9019

## Preview

https://github.com/user-attachments/assets/cb1efe05-6df2-4100-9f07-1fd2daedb154


https://github.com/user-attachments/assets/d3b533ea-16f9-4c49-b07a-71ab2a60d8be


https://github.com/user-attachments/assets/f2cdb9d2-859b-419c-84d8-293d2fe09927



## Desc

1. Rename `RdpResponse` to `RdpSessionInfo`, because a new filed `pub resolution: Arc<Mutex<Option<(usize, usize)>>>` is added in this struct.
2. Refactor fractional scale.

https://flatpak.github.io/xdg-desktop-portal/docs/doc-org.freedesktop.impl.portal.RemoteDesktop.html#:~:text=The%20(dx%2C%20dy)%20vector%20represents%20the%20new%20pointer%20position%20in%20the%20streams%20logical%20coordinate%20space.

> The (dx, dy) vector represents the new pointer position in the streams logical coordinate space.

So we can just scale the pointer from picture size to the stream logic size.

## Tests


### One display

| OS  | DESKTOP  | RESULT  | REMARK |
| :--: | :---: | :--- | :--- |
| Manjaro-kde-24.0.5 | KDE |   :white_check_mark: |   |
| Archlinux-20240601 | Gnome |   :white_check_mark: |  |
| Ubuntu 24.04 | Gnome |   :white_check_mark: | history issue https://github.com/rustdesk/rustdesk/pull/9019#issuecomment-2295252388 |
| Fedora 40 | Gnome |   :white_check_mark: | |
| Fedora 40 | KDE |  :white_check_mark: | |
| openSUSE-Tumbleweed | KDE |  :white_check_mark: | |
| openSUSE-Tumbleweed | Gnome | :white_check_mark: | |


**Note**:
Only Ubuntu can enable fractional scaling.
While other distributions can set fractional scaling in the terminal `gsettings set org.gnome.desktop.interface scaling-factor 1.5`, the physical and logical sizes are the same.

### Two displays

| OS  | DESKTOP  | RESULT  | REMARK |
| :--: | :---: | :--- | :--- |
| Manjaro-kde-24.0.5 | KDE |  :white_check_mark: |   |
| Fedora 40 | KDE | :white_check_mark: | |

**Note**:
I cannot enable multi-displays for Distros with Gnome in VM VirtualBox.

## Issue

https://github.com/rustdesk/rustdesk/pull/9019#issuecomment-2295252388

It may be a bug of Gnome, as commented in the source code.",closed,2024-09-19T18:02:14Z,2024-09-20T03:15:19Z,2024-09-20T03:15:19Z,,master,fix/wayland_rdp_input_mouse,4,117,28,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9402
9401,Update de.rs,,closed,2024-09-19T15:45:51Z,2024-09-20T02:54:50Z,2024-09-20T02:54:50Z,,master,patch-33,1,4,4,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9401
9399,"opt gtk sudo ui, fix edit button show","1. Fix the button height increase when the password is incorrect.
2. The edit button should only be visible when the forkpty is not executed, rather than on the first password input.

[old_ui.webm](https://github.com/user-attachments/assets/5e374c5b-c3ca-42ed-b3bb-d98a6d69c15c)

[new_ui.webm](https://github.com/user-attachments/assets/878cddd2-6502-4dac-9bba-c545d40b4283)
",closed,2024-09-19T14:42:32Z,2024-09-20T03:06:57Z,2024-09-20T03:06:57Z,,master,gtk-sudo,1,9,12,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9399
9392,"refact: flutter, ChangeNotifier, reduce rebuild","Refact `setCurrentTabCachedPeers()`, because it causes many rebuilds.

`final model = Provider.of<PeerTabModel>(context);` causes rebuild.
`final model = Provider.of<PeerTabModel>(context, listen: false);` does not causes rebuild.

Only `setCurrentTabCachedPeers()` has been refactored now, since it may be called many times.
",closed,2024-09-19T02:03:35Z,2024-09-19T10:48:01Z,2024-09-19T10:48:01Z,,master,refact/flutter_reduce_rebuild,4,21,7,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9392
9391,Update Russian translation,,closed,2024-09-18T19:14:18Z,2024-09-19T10:48:54Z,2024-09-19T10:48:54Z,,master,master,1,4,4,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9391
9389,"fix: file transfer, show error, msgbox","1. Fix job id on error.

![image](https://github.com/user-attachments/assets/0390d0a2-6e1a-496d-a9fb-2a190509127f)

2. Show message box instead of show nothing on special error.

![image](https://github.com/user-attachments/assets/7d8a9987-7e58-4a7c-8fb7-18ef1ab33433)
",closed,2024-09-18T11:16:50Z,2024-09-18T11:29:35Z,2024-09-18T11:29:35Z,,master,fix/file_transfer_show_err,30,48,2,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9389
9387,fix: option OPTION_ONE_WAY_FILE_TRANSFER,"Fix, copy&paste files one direction. https://rustdesk.com/docs/en/self-host/client-configuration/advanced-settings/#one-way-clipboard-redirection

1. Rename `is_stopping_allowed_from_peer()` to `is_beginning_message()` in `ClipboardFile`.
2. Check `_clip.is_beginning_message()` and then option `OPTION_ONE_WAY_FILE_TRANSFER`. Because some messages must be sent back to the control side when ""coping&pasting"".",closed,2024-09-18T08:15:07Z,2024-09-18T10:22:12Z,2024-09-18T10:22:12Z,,master,fix/option_OPTION_ONE_WAY_FILE_TRANSFER,3,10,5,1,2,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9387
9386,Chinese versions of CONTRIBUTING.md and CODE_OF_CONDUCT-ZH.md,"Added CONTRIBUTING-ZH.md and CODE_OF_CONDUCT-ZH.md to address the lack of Chinese versions, and updated the references in README-ZH accordingly.",closed,2024-09-18T02:33:00Z,2024-09-18T02:39:26Z,2024-09-18T02:39:26Z,,master,master,3,120,1,3,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9386
9383,replace pkexec with gtk sudo,"* Fix https://github.com/rustdesk/rustdesk/issues/9286, replace pkexec with gtk sudo. Tested on gnome (ubuntu 22.04, debian 13), xfce (manjaro, suse), kde (kubuntu 23), lxqt (lubuntu 22), Cinnamon (mint 21.3), Mate (mint 21.2)
* Fix incorrect config of the main window opened by the tray, replace with dbus + run_me.
* Fix `check_if_stop_service`, it causes the problem fixed in https://github.com/rustdesk/rustdesk/pull/8414, now revert that fix and fix itself.


[different_users.webm](https://github.com/user-attachments/assets/de851261-2a3f-4aa5-ab09-cd6c2280f46a)

[user-command-line.webm](https://github.com/user-attachments/assets/bdd71b4c-bd00-4602-be95-f18ec97b101c)

[root-command-line.webm](https://github.com/user-attachments/assets/a8177dba-8ec4-4270-a5f1-fc2da6d7ab92)

[tray_open_menu.webm](https://github.com/user-attachments/assets/a3355074-dbd1-4741-baf1-6dc866cb3a81)

check_if_stop_service:
![check_if_stop_service](https://github.com/user-attachments/assets/2a4b71bb-a79e-4ba1-ba9a-bcf2a302eaea)

",closed,2024-09-17T10:00:17Z,2024-09-19T10:47:37Z,2024-09-19T10:47:37Z,,master,gtk-sudo-main,30,82,28,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9383
9378,Fix ja.rs typo,I'm sorry for my mistake.,closed,2024-09-17T05:22:44Z,2024-09-17T05:26:49Z,2024-09-17T05:26:49Z,,master,master,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9378
9377,Fix ja.rs typo,,closed,2024-09-17T05:20:11Z,2024-09-17T05:20:23Z,,,master,master,1,1,1,3,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9377
9376,update ja.rs,,closed,2024-09-17T04:30:53Z,2024-09-17T04:32:32Z,2024-09-17T04:32:32Z,,master,master,1,14,14,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9376
9372,Fix/virtual display do not plug out if not plugged in,"https://github.com/rustdesk/rustdesk/discussions/9366

## Desc

Do not plug out virtual displays that were not plugged in.

Use a count variable `VIRTUAL_DISPLAY_COUNT` to plug out virtual displays if is plugging out all (The following button and on disconnect).


https://github.com/user-attachments/assets/869324af-a052-4fd4-9eb4-04b40d128a39


",closed,2024-09-16T07:54:57Z,2024-09-16T07:57:40Z,2024-09-16T07:57:40Z,,master,fix/virtual_display_do_not_plug_out_if_not_plugged_in,3,78,21,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9372
9370,"fix: win VD, do not plug out if not plugged in","https://github.com/rustdesk/rustdesk/discussions/9366

## Desc

Do not plug out virtual displays that were not plugged in.

Use a count variable `VIRTUAL_DISPLAY_COUNT` to plug out virtual displays if is plugging out all (The following button and on disconnect).

<img width=""281"" alt=""1"" src=""https://github.com/user-attachments/assets/a4ab1f77-938b-4326-b0b8-fdd9337594a6"">

`VIRTUAL_DISPLAY_COUNT` is only used in the following places.

![image](https://github.com/user-attachments/assets/e7eedba9-450c-463d-a60c-70a26bf6221f)


## TODO

Do not remove the driver if it's already there before installing RustDesk.

Maybe low priority.
Now this is not a big issue as users should always have the driver files if they use amyuni idd.

",closed,2024-09-16T06:20:04Z,2024-09-16T07:38:52Z,,,master,fix/virtual_display_do_not_plug_out_if_not_plugged_in,3,78,21,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9370
9364,update appindicator and recommends install it,"https://github.com/rustdesk/rustdesk/pull/9138

| format   | test os              | package                      | success |
| -------- | -------------------- | ---------------------------- | ------- |
| deb   | ubuntu 22.04         | libayatana-appindicator3-1   | Y       |
| rpm      | centos 9 / fedora 38 | libayatana-appindicator-gtk3 | Y       |
| suse.rpm | suse 15.6            | libayatana-appindicator3-1   | Y       |

1. With `Recommends`, all operating systems  above will install appindicator by default, with `Suggests` not, all use `Recommends`.
2. If a package is unknown, such as `Recommends:abcxyzhello`, it can be installed on all operating systems above.
3. Arch and Flatpak remain unchanged.",closed,2024-09-15T06:11:38Z,2024-09-15T06:33:59Z,2024-09-15T06:33:59Z,,master,appindicator,7,15,10,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9364
9355,fix last commit,,closed,2024-09-14T02:02:33Z,2024-09-14T02:03:50Z,2024-09-14T02:03:50Z,,master,fix,1,1,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9355
9354,not run window focus service on wayland,,closed,2024-09-14T01:43:42Z,2024-09-14T01:59:14Z,2024-09-14T01:59:14Z,,master,no_window_focus_service_for_wayland,2,14,5,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9354
9348,config.rs,,closed,2024-09-13T14:06:11Z,2024-09-13T14:13:38Z,,,master,patch-1,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9348
9344,Update nl.rs,,closed,2024-09-13T06:17:05Z,2024-09-13T13:04:04Z,2024-09-13T13:04:04Z,,master,patch-1,1,3,3,2,2,2,"AnonymousWP, RijckAlex, AnonymousWP","CHANGES_REQUESTED, COMMENTED, APPROVED",False,https://api.github.com/repos/rustdesk/rustdesk/issues/9344
9343,password lowercase check like uppercase,"https://github.com/rustdesk/rustdesk/discussions/9342

[case.webm](https://github.com/user-attachments/assets/f6930829-eb55-4ebc-a6b6-e3bed2bd2db4)
",closed,2024-09-13T01:25:13Z,2024-09-13T01:29:00Z,2024-09-13T01:29:00Z,,master,lowercase,1,5,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9343
9341,Trim whitespace from Import server config,"When emailing someone relay server settings they often copy extra whitespace at the end of the reversed base64 config string. 
This results in a ""Invalid server configuration"" message.
If the clipboard string was trimmed before it was checked for validity this would stop some support headaches.

I have not tested the included pull request but believe its such a simple change that anyone who regularly programs in dart will be easily able to make it work.
Thanks for such a great project!
mh",closed,2024-09-12T19:00:25Z,2024-09-13T00:06:40Z,2024-09-13T00:06:40Z,,master,patch-1,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9341
9335,"update hwcodec, fix linux ci",,closed,2024-09-12T09:18:24Z,2024-09-12T09:34:54Z,2024-09-12T09:34:54Z,,master,fix_linux_build,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9335
9333,refact: reduce try_get_displays() on login,"`display_service::update_get_sync_displays` is only used in one place, so it's safe to make the chagnes.

![image](https://github.com/user-attachments/assets/32f17001-1e1c-4b1b-81df-84ab1b65781c)

Tested on Windows, Linux (Wayland, installed and non-installed) as the controlled side.",closed,2024-09-12T06:32:01Z,2024-09-12T06:44:40Z,2024-09-12T06:44:40Z,,master,refact/reduce_get_displays_on_conn,2,19,23,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9333
9331,fix: reduce rebuild for online state,"This is just an improvement commit. I'm still looking for memory leaks.


Restoring window on Windows also triggers `onWindowBlur()`.



https://github.com/user-attachments/assets/8f6b1b74-3c01-4cf1-beaf-8182b5b21367

",closed,2024-09-12T00:39:55Z,2024-09-12T03:26:02Z,2024-09-12T03:26:02Z,,master,fix/reduce_rebuild_for_online_state,2,46,9,6,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9331
9328,更新自己的代码,更新自己的代码,closed,2024-09-11T09:58:02Z,2024-09-11T09:59:28Z,,,master,master,3,541,541,6,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9328
9326,"fix: Query online, remove loop retry","Refactor online query.

1. Remove loop retry, no need to retry. And remove old logic `sleep(300.0).await;` in loop.
2. Remove `unbounded_channel`, use `sync_channel` instead. If the online query process is slow, it may cause the memory usage to continue to increase.

This commit does not fix memory leak.",closed,2024-09-11T09:14:32Z,2024-09-11T09:17:32Z,2024-09-11T09:17:32Z,,master,fix/query_online_no_loop_retry,2,44,63,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9326
9324,config.rs,,closed,2024-09-11T07:56:15Z,2024-09-11T07:58:51Z,,,master,patch-1,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9324
9322,"fix: keyboard, move tab to new window","Do not disable keyboard when moving tab to new window on dispose.

![1726019513435](https://github.com/user-attachments/assets/22106188-567d-44c6-8684-36859474b9b3)

## Desc

`dispose()` of the remote page may be called after the new window is focused, and then the keyboard listener is disabled.

We can't enable it until we unfocus and focus the window again.

```console
flutter: session: aa37c85a-93ea-42fb-840f-6dd3c61cb343, enterOrLeave true
flutter: CustomTouchGestureRecognizer init

flutter: REMOTE PAGE dispose session aa37c85a-93ea-42fb-840f-6dd3c61cb343 1582680759
flutter: session: aa37c85a-93ea-42fb-840f-6dd3c61cb343, enterOrLeave false
flutter: deleting cursor with key 1582680759_65539_170666667_170666667

```

`closeSession` is used to skip some dispose steps when moving tab to new window.

",closed,2024-09-11T01:59:20Z,2024-09-11T02:01:04Z,2024-09-11T02:01:04Z,,master,fix/move_tab_to_new_window_do_not_disable_keyboard_on_dispose,1,4,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9322
9318,Refact/options,"1. Refact options. 

This option is set to a boolean value to unify the logic to web.

![image](https://github.com/user-attachments/assets/52435843-29b9-47de-b5d2-36602959ac4a)


2. Removed useless call `self.send_opts_after_login(peer).await;`, since this call only toggles privacy mode. The following call `self.send_toggle_privacy_mode_msg(peer).await;` also toggles privacy mode.

![image](https://github.com/user-attachments/assets/4db89c43-4310-4044-9e6d-ae5db4f6a958)
",closed,2024-09-10T15:48:53Z,2024-09-10T15:54:59Z,2024-09-10T15:54:59Z,,master,refact/options,7,14,49,3,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9318
9317,Update bg.rs with more translations,"many bg translations were automatic, were unclear, or just missing. this is attempt to add most of it to the translation file.",closed,2024-09-10T14:55:07Z,2024-09-10T15:22:14Z,2024-09-10T15:22:14Z,,master,patch-1,1,341,341,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9317
9310,"fix: tokio, call future in context of runtime","https://github.com/rustdesk/rustdesk/issues/9263#issuecomment-2340042711



## Preview

### Bug

https://github.com/user-attachments/assets/400801fe-9298-488e-a99d-5646b1debe5b

### Fixed

https://github.com/user-attachments/assets/1f275de5-17c6-43e2-b9c5-8a4d5d5260ff

",closed,2024-09-10T09:36:59Z,2024-09-10T09:39:22Z,2024-09-10T09:39:22Z,,master,fix/tokio_runtime_context,1,8,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9310
9309,flutter-ci.yml,,closed,2024-09-10T05:20:05Z,2024-09-10T07:18:34Z,,,master,patch-4,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9309
9308,config.rs,,closed,2024-09-10T04:52:13Z,2024-09-10T07:18:14Z,,,master,patch-1,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9308
9307,"fix: web, switch display","
https://github.com/user-attachments/assets/0de07100-5337-42d3-80ee-61a88430c95e

",closed,2024-09-10T03:27:46Z,2024-09-10T03:29:21Z,2024-09-10T03:29:20Z,,master,fix/web_switch_display,2,10,7,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9307
9306,downgrade url_launcher/uni_links for linux ci,https://github.com/21pages/rustdesk/actions/runs/10784600579,closed,2024-09-10T02:54:24Z,2024-09-10T02:57:01Z,2024-09-10T02:57:01Z,,master,reset_uni_url,1,14,14,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9306
9297,comments,,closed,2024-09-08T15:01:39Z,2024-09-08T15:07:42Z,2024-09-08T15:07:42Z,,master,refact/comments,2,15,3,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9297
9293,Fix/clipboard retry if is occupied,"May fix 

https://github.com/rustdesk/rustdesk/issues/9263

https://github.com/rustdesk/rustdesk/issues/9222#issuecomment-2329233175

## Preview


https://github.com/user-attachments/assets/d06b61e4-a963-49a1-84aa-10d44d29e952

If there're multiple threads or processes trying to access the clipboard at the same time, the previous clipboard owner will fail to access the clipboard. This is a common case on Windows.

## Desc


1. Retry `3` times if clipboard is occupied.

![image](https://github.com/user-attachments/assets/2325942c-4a7c-483c-834b-911449e387c2)


2. Fix ""async context"" is destroyed after calling `read_clipboard_from_cm_ipc()`. Then the previous ipc connection (`stream`) is not reused at all. ",closed,2024-09-08T11:36:12Z,2024-09-08T13:13:05Z,2024-09-08T13:13:05Z,,master,fix/clipboard_retry_if_is_occupied,4,70,19,5,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9293
9292,quit cm process if ipc connection to ipc server closed,"* Quit cm process if ipc connection to ipc server is closed.

**test ipc connection closed**: close portble main window process, cm has a closed client.

https://github.com/user-attachments/assets/07792aad-b6cd-4158-bec7-2274532f45eb


https://github.com/user-attachments/assets/c897f3c7-29ce-4d0b-a221-da90113ea51c

**test wrong sid**: cm has a closed client, change to another windows session.

https://github.com/user-attachments/assets/c6362352-e2d6-460b-820a-1801299d5ca3


https://github.com/user-attachments/assets/8b3ee437-18d0-4e75-8300-9bab74055f45


Also tested 2 rdp session, windows/linux/mac login screen.
",closed,2024-09-08T03:36:06Z,2024-09-08T04:37:41Z,2024-09-08T04:37:41Z,,master,cm_check_server_status,4,23,3,1,1,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9292
9285,Update pl.rs,,closed,2024-09-07T09:53:33Z,2024-09-07T09:58:07Z,2024-09-07T09:58:07Z,,master,master,1,43,43,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9285
9272,--no-server arg to avoid server ipc occupied by ui,"https://github.com/rustdesk/rustdesk/discussions/9254

* When the server ipc receives a `Close` message, it will start a process to wait for 0.6 seconds and then starting the main window. then exit immediately. However, the main window might start before the --server option is activated. To address this, add the --no-server argument when launching the main window; this will make the main window process repeatedly attempt to connect to the IPC server in a loop.
* If the main window is a child process of --service and systemctl stop is executed, the main window process will be terminated and will not reopen.

start stop service test

[no-server.webm](https://github.com/user-attachments/assets/35c37c2e-ed7f-430d-8463-2d993d4b2367)
",closed,2024-09-06T05:20:11Z,2024-09-06T06:43:38Z,2024-09-06T06:43:38Z,,master,no-server,5,33,18,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9272
9271,Update ptbr.rs,translation to brazilian portuguese,closed,2024-09-05T17:14:01Z,2024-09-05T17:15:07Z,2024-09-05T17:15:07Z,,master,master,1,95,95,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9271
9270,"fix: clipboard, cmd ipc","1. Try read clipboard again if no data from cm. This maybe a workaround of https://github.com/rustdesk/rustdesk/issues/9263. We still need to find the reason.
2. Send raw contents if `content_len` > 1024*3. The previous code does not affect the correctness of copy&paste. It just cannot store the data into `raw_contents` correctly.
3. Skip sending raw contents if it is empty.
",closed,2024-09-05T15:21:18Z,2024-09-05T15:39:07Z,2024-09-05T15:39:07Z,,master,fix/clipboard_cm_ipc,2,29,22,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9270
9268,refact: quality status event,"1. Do not show `Chroma` on quality monitor for web.
2. Refact `updateQualityStatus()`, no need to put all fields in `evt`.",closed,2024-09-05T14:03:11Z,2024-09-05T14:37:14Z,2024-09-05T14:37:14Z,,master,refact/quality_monitor,2,14,7,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9268
9267,remove first frame fallback if repeat encode,"Mediacodec often fails on the first encode, repeat encoders can reach `max_fail_times` on the first frame.",closed,2024-09-05T13:48:31Z,2024-09-05T14:48:20Z,2024-09-05T14:48:20Z,,master,remove_first_frame_fallback_if_repeat,1,3,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9267
9266,fix qsv memory leak by updating ffmpeg,"https://github.com/rustdesk/rustdesk/discussions/8976  https://github.com/rustdesk/rustdesk/discussions/8651


* Memory leaks occur when destroying FFmpeg QSV VRAM encoders. This issue is resolved with FFmpeg version 7.
* Since FFmpeg 6, it requires ffnvcodec version 12.1.14.0 or higher, and an NVIDIA driver version greater than 530, https://github.com/FFmpeg/nv-codec-headers/tree/n12.1.14.0.
* This is the old program test, https://github.com/rustdesk-org/hwcodec/pull/13, after fix, the values of ffmpeg qsv vram are: 120M->27M->138M->43M
* Fix shared gpu memory leak while rendering, but it still increases when recreate decoders. https://github.com/rustdesk-org/flutter_gpu_texture_renderer/pull/1

 


https://github.com/user-attachments/assets/ac3143b5-8770-4949-9b5e-901c4eb4e2b2



https://github.com/user-attachments/assets/d006df4e-e807-4625-a404-2542f59c463e

**TODO**

* Roughly test on all platforms. Further testing will be performed, and I will paste the results in this pr.
* This PR pays attention to the creation of encoder memory leaks,  but also need to pay attention to whether there is small memory leaks, as well as undiscovered leaks during runtime.

**not decided**

* The code of NVIDIA VRAM encoder is not changed, still use Video Codec SDK version 11, which is unaffected by FFmpeg. Drivers newer than 470 can support this, but we may consider an update later, as the support check by sdk code may not be accurate for FFmpeg RAM encoders.
* The issue is related to FFmpeg, not libmfx. FFmpeg version 7 recommends using libvpl, but vcpkg currently lacks ports for libvpl. We can add these in the future.",closed,2024-09-05T13:05:43Z,2024-09-07T02:20:52Z,2024-09-07T02:20:52Z,,master,fix_qsv_memory_leak,11,82,226,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9266
9265,config.rs,,closed,2024-09-05T11:39:03Z,2024-09-05T11:39:42Z,,,master,master,0,0,0,0,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9265
9264,"increase interval for restart linux ui, try fix loop start",https://github.com/rustdesk/rustdesk/discussions/9254,closed,2024-09-05T10:33:14Z,2024-09-05T10:34:48Z,2024-09-05T10:34:48Z,,master,try_fix_linux_ui_loop_start,1,2,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9264
9259,fix: build web,"1. Web, build.
2. Web and mobile, `onSubmitted` for ID text field, support `Enter` key.
3. Web, remove unused key 'toggle_option'.",closed,2024-09-04T14:25:50Z,2024-09-04T14:27:53Z,2024-09-04T14:27:53Z,,master,fix/build_web,3,11,3,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9259
9253,Fix/wf cliprdr c bugs,"1. Always ""try_reset_event()"" before sending a request that needs to wait for a response.
2. Add some checks, `NULL` pointer and number overflow.

""Copy&paste files"" is tested.",closed,2024-09-04T09:02:44Z,2024-09-04T09:04:49Z,2024-09-04T09:04:49Z,,master,fix/wf_cliprdr_c_bugs,1,190,51,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9253
9252,"fix: clipboard, support excel xml spreadsheet","## Preview

### Bug

https://github.com/user-attachments/assets/1adfbc09-8c2e-4001-aaec-d84c901e5654


### Fixed



https://github.com/user-attachments/assets/c45b11e0-04f1-448f-bf04-53ecef2e1ec8




## Desc

Win -> Win, excel copy&paste, cells formats is broken since multi-formats is supported.

Because many clipboard formats are set to clipboard after copying.

When pasting, the formats: ""XML Spreadsheet"" > ""HTML"" > ""plain text""

Though ""plain text"" has `\t` and `\r\n`, the content will not be used if ""HTML"" is also set.

## TODO

1. Cross platform.
2. Support other commonly used formats.
",closed,2024-09-04T08:39:45Z,2024-09-04T08:44:37Z,2024-09-04T08:44:37Z,,master,fix/clipboard_support_excel_xml_spreadsheet,2,34,3,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9252
9251,i,,closed,2024-09-04T08:06:35Z,2024-09-04T08:07:07Z,,,master,master,15,18,2120,18,1,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9251
9248,password max length prompt,"https://github.com/rustdesk/rustdesk/discussions/9232

* Check chars count instead of checking bytes len when encrypt string
* Set maxLength in TextEdit for `pernament password`, `unlock pin`, `rdp password`, `proxy password`
* Other string: `os-username`, `os-password` not add input limit.
* Vec: `peer password`, `2fa token/secret` won't exceed the limit


https://github.com/user-attachments/assets/bd0eb201-1d38-444f-b0d6-99bae16ad113

![unlock_pin_cmdpng](https://github.com/user-attachments/assets/94b89902-f73a-4658-b778-2ecb7c4e72e3)
![unlock_pin_gui](https://github.com/user-attachments/assets/a11bd085-84d9-42b1-ae21-19068adb191b)
![rdp](https://github.com/user-attachments/assets/81056dc8-6157-4498-b660-8121973bcfa0)
![socks5](https://github.com/user-attachments/assets/ce33e54e-19ff-4a00-847d-080c5032be91)
",closed,2024-09-04T02:55:03Z,2024-09-04T03:31:13Z,2024-09-04T03:31:13Z,,master,password_max_length_prompt,9,47,16,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9248
9244,fix: set  to OK if recv flag is TRUE,"Explicitly set the `waitRes` to `WAIT_OBJECT_0`, because we check the value later.

![image](https://github.com/user-attachments/assets/6503fa2c-b77d-4051-be71-4f0f59e9b3fa)
",closed,2024-09-03T13:08:57Z,2024-09-03T13:15:36Z,2024-09-03T13:15:36Z,,master,fix/win_clipboard_wait_res,1,2,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9244
9243,"fix: win, file clipboard","Related issue https://github.com/rustdesk/rustdesk/issues/9222
But this commit probably didn't fix it.

1. Return the result of `wait_response_event()` in `cliprdr_send_format_list()`

```C
static UINT cliprdr_send_data_request(UINT32 connID, wfClipboard *clipboard, UINT32 formatId)
```

The last line does not return any value, which causes **undefined behavior**.

![image](https://github.com/user-attachments/assets/0adcf84e-a6f1-47b0-b925-f9ab5c50f697)


2. Add recv flags to avoid waiting a long time if failed to `SetEvent()`.

![image](https://github.com/user-attachments/assets/d8393eef-c85f-4c52-9d8b-12092cf7dd81)

![image](https://github.com/user-attachments/assets/3ff33919-dbd0-44d3-afe5-8306af35f680)

3. Return `ERR_CODE_SEND_MSG` if failed to send clipboard message. Then the thread will not wait the response message.

## The possible reasons for https://github.com/rustdesk/rustdesk/issues/9222

1. Failed to send clipboard message. (Local side)
2. Failed to receive clipboard message. (Remote side)
3. Failed to send response. (Remote side)
4. Failed to receive response. (Local side)
5. Failed to notify the waiting thread of the received response.
6. Dead lock.

I did not find dead lock.

This commit improves the logic of steps 1 and 5.

## Tests

Copy&Paste files is tested.

",closed,2024-09-03T12:51:59Z,2024-09-03T12:55:46Z,2024-09-03T12:55:46Z,,master,fix/win_file_clipboard,4,86,38,1,1,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9243
9242,Use fallback codec if first frame fails,"* Both encoding and decoding use fallback if first frame fails
* More aggresive max fail counter
* Update hwcodec, add judgement when length of the encoded data is zero, https://github.com/rustdesk/rustdesk-server-pro/discussions/382#discussioncomment-10525997
* Fix serde hwcodec config toml fails when the non-first vec![] is empty, https://github.com/toml-rs/toml-rs/issues/384, the config file is used for cache, when check process is not finished, the cache is used. `confy` use toml 0.5, which has the problem, toml 0.7 doesn't have this problem.
* Allow cm not start for pro user, https://github.com/rustdesk/rustdesk-server-pro/discussions/382#discussioncomment-10525725

https://github.com/user-attachments/assets/d515be52-075b-4cf5-b842-a568501fcbd6



https://github.com/user-attachments/assets/b4cedf4e-8256-4c12-a278-3fc43dd43b7d


https://github.com/user-attachments/assets/768c5bde-48f8-4a8e-b9e0-f8527471fda0

```
#[derive(Serialize, Deserialize)]
struct StringTest {
    a: Vec<String>,
    b: Vec<String>,
}
```
![69abc5e6055bb1bd3083afaa422ca5d](https://github.com/user-attachments/assets/7dc43a6b-e7fe-4c6f-8fcc-7bb3c4a51259)
",closed,2024-09-03T10:29:05Z,2024-09-03T10:48:18Z,2024-09-03T10:48:17Z,,master,fix_zero_length_encoding,5,54,10,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9242
9238,Update da.rs,"Filled out the remaining empty strings and changed some existing ones for better translation.

Some translations might be janky due to my lack of context for what the string is used for, but it's good enough for now.",closed,2024-09-02T19:52:05Z,2024-09-03T02:09:25Z,2024-09-03T02:09:25Z,,master,patch-2,1,221,221,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9238
9235,"refact: peer card, orientation","## Preview

### mobile

https://github.com/user-attachments/assets/e8480a0a-62ed-4f8d-a8e5-1bee3b92b63d

https://github.com/user-attachments/assets/5c52a7b8-c8dc-49c8-bea0-46ad450d5aec




### web

https://github.com/user-attachments/assets/63dc2f07-7605-4e05-b019-7c86618f2f32

## Desc

1. Use the `aspectRatio` of the current size to determine if it is `portrait`.
```dart
    // https://github.com/flutter/flutter/issues/60899
    // stateGlobal.isPortrait.value =
    //     MediaQuery.of(context).orientation == Orientation.portrait;

    final orientation = View.of(context).physicalSize.aspectRatio > 1
        ? Orientation.landscape
        : Orientation.portrait;
    stateGlobal.isPortrait.value = orientation == Orientation.portrait;
```
2. Orientation detection and changes are not used on Desktop. The orientation is always `Landscape` on Desktop.
",closed,2024-09-02T14:59:05Z,2024-09-03T11:06:11Z,2024-09-03T11:06:11Z,,master,refact/peer_card_orientation,10,186,155,3,1,0,21pages,APPROVED,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9235
9226,refact: remove fingerprint for web,,closed,2024-09-01T17:45:12Z,2024-09-01T18:00:59Z,2024-09-01T18:00:59Z,,master,refact/web_ui,2,5,4,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9226
9225,"refact: web ui, login",,closed,2024-09-01T15:00:20Z,2024-09-01T15:14:57Z,2024-09-01T15:14:57Z,,master,refact/web_ui,1,13,5,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9225
9224,common.rs,,closed,2024-09-01T11:46:25Z,2024-09-01T11:46:41Z,,,master,patch-1,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9224
9223,rustdesk1.1.9,,closed,2024-09-01T10:47:28Z,2024-09-01T10:49:13Z,,,master,master,2,3,3,4,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9223
9217,refact: web ui,"Refact, web desktop settings page.


https://github.com/user-attachments/assets/7682cbfc-029a-4d5a-a90d-37973b84bee3




",closed,2024-08-31T14:01:53Z,2024-08-31T16:30:08Z,2024-08-31T16:30:08Z,,master,refact/web_ui,6,188,126,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9217
9216,"fix: keyboard, sciter","https://github.com/rustdesk/rustdesk/discussions/9143

## Preview


en -> fr

https://github.com/user-attachments/assets/d3fd20d7-9ba5-4692-b6f0-be53834199c4


## Desc

1. Sciter keyboard does not work because `IS_RDEV_ENABLED` is always `false`. `change_grab_status()` will never enable the keyboard callback. Sicter keyboard input is broken since https://github.com/rustdesk/rustdesk/pull/6561
2. Add ""Translate mode"" for sciter version.



",closed,2024-08-31T10:28:14Z,2024-08-31T11:02:50Z,2024-08-31T11:02:50Z,,master,fix/keyboard_sciter,5,22,14,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9216
9207,"refact: android ios, lan discovery","https://github.com/rustdesk/rustdesk/discussions/5345#discussioncomment-9853063

## Preview

<img width=""207"" alt=""6ee16718a703b844000f487cf1c250e"" src=""https://github.com/user-attachments/assets/74ad42fa-6b60-4d68-b701-8e9e0dd70e35"">

## Desc

1. Enable `lan::start_listening()` on Android.
2. Enable lan discovery on iOS.
3.When querying the lan, send ""self-id"". The server will use the id to determine whether the request is from itself. Because the mac address is relatively unstable, it may not be possible to obtain the mac address on Android.",closed,2024-08-29T15:48:40Z,2024-08-29T16:37:39Z,2024-08-29T16:37:38Z,,master,refact/android_ios_lan_discover,5,36,11,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9207
9206,"refact: web, remote toolbar, pin","Add `pin` menu for web.


https://github.com/user-attachments/assets/0d806d58-2b10-4475-ada6-ab20f43e4318

",closed,2024-08-29T15:34:28Z,2024-08-29T15:38:08Z,2024-08-29T15:38:08Z,,master,refact/web_remote_toolbar_pin,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9206
9198,Master private aliyun,,closed,2024-08-28T12:51:28Z,2024-08-28T12:51:40Z,,,master,master-private-aliyun,5,16,9,11,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9198
9196,Update README.md,,closed,2024-08-28T04:24:54Z,2024-08-28T04:25:00Z,2024-08-28T04:25:00Z,,master,rustdesk-patch-2,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9196
9195,Logo broken,,closed,2024-08-28T04:23:33Z,2024-08-28T04:23:40Z,2024-08-28T04:23:40Z,,master,rustdesk-patch-1,1,1,7,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9195
9192,"fix: web, reset cursor on disconn, back to main page",,closed,2024-08-27T15:51:15Z,2024-08-27T15:58:04Z,2024-08-27T15:58:04Z,,master,fix/web_reset_cursor_on_disconn,4,9,1,1,0,0,"rustdesk, fufesou","COMMENTED, COMMENTED",False,https://api.github.com/repos/rustdesk/rustdesk/issues/9192
9191,Fix minor typo,Fix minor typo in translation file.,closed,2024-08-27T15:37:20Z,2024-08-27T15:38:40Z,2024-08-27T15:38:40Z,,master,fix-typo,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9191
9189,"fix: keyboard input, mulit windows","https://github.com/rustdesk/rustdesk/discussions/8791#discussioncomment-10460053

## Preview

https://github.com/user-attachments/assets/2f58d76a-d752-4d57-90a8-d8db75e6ceee


https://github.com/user-attachments/assets/81a951e1-5d70-4906-8b27-45c20d169481

## Desc

The keyboard events are sent to the controlled side of `CUR_SESSION_ID`.

https://github.com/rustdesk/rustdesk/blob/40239a1c414158a3248bc400d9dca049292848e4/src/flutter.rs#L47

But the only place to change `CUR_SESSION_ID` is clicking the session tab.

https://github.com/rustdesk/rustdesk/blob/40239a1c414158a3248bc400d9dca049292848e4/flutter/lib/desktop/pages/remote_tab_page.dart#L72

When creating multiple windows, users typically do not click on the session tab to select the current session. So we need a more common place to set current session `enterOrLeave()`.",closed,2024-08-27T11:01:38Z,2024-08-27T11:30:52Z,2024-08-27T11:30:52Z,,master,fix/keyboard_input_mulit_window,1,3,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9189
9185,"feat: macos, mouse button, back&forward","https://github.com/rustdesk/rustdesk/issues/1169


https://docs.rs/core-graphics/0.24.0/core_graphics/event/enum.CGMouseButton.html

`back` and `forward` are not directly supported by crate `core_graphics`.

Support `back` and `forward` on MacOS, by explicitly call

```rust
event.set_integer_value_field(EventField::MOUSE_EVENT_BUTTON_NUMBER, v);
```

After creating a temporary mouse event using ""CGMouseButton::Left"".

The rest changes are just formatting.",closed,2024-08-27T07:17:22Z,2024-08-27T07:20:29Z,2024-08-27T07:20:29Z,,master,feat/macos_mouse_button_back_forward,1,42,15,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9185
9182,Jklj,,closed,2024-08-27T01:24:18Z,2024-08-27T01:28:21Z,,,master,jklj,2,3,3,3,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9182
9180,"fix: web v2, keyboard mode","Add ""Map mode"" for web.
""Legacy mode"" is temporarily kept.


en -> fr

https://github.com/user-attachments/assets/fa8f4331-1093-40b4-8222-50ff776e8cdb

",closed,2024-08-26T15:52:27Z,2024-08-26T16:00:33Z,2024-08-26T16:00:33Z,,master,fix/web_v2_keyboard,3,6,4,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9180
9175,"feat: web v2 keyboard, flutter, map mode","This commit does not change current logic.

Tests will be shown in another PR.

",closed,2024-08-26T04:11:18Z,2024-08-26T04:13:11Z,2024-08-26T04:13:11Z,,master,feat/web_v2_keyboard,6,29,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9175
9174,not run get window focus if no multiple displays,https://github.com/rustdesk/rustdesk/issues/9003#issuecomment-2309135201,closed,2024-08-26T02:29:54Z,2024-08-26T02:37:35Z,2024-08-26T02:37:35Z,,master,active_window_service,1,3,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9174
9171,bump cargo lock dependencies to be able to build rustdesk on nix,I just ran a simple `cargo update`,closed,2024-08-25T20:22:15Z,2024-08-26T01:18:27Z,,,master,master,1,555,430,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9171
9167,refresh file transfer table on resume,"https://github.com/rustdesk/rustdesk/pull/9166#issuecomment-2308820765

https://github.com/user-attachments/assets/3a0f365b-07a3-4462-a91f-149ca7f2df45


https://github.com/user-attachments/assets/28dd6ada-3aac-4afe-9407-c462a101086f

",closed,2024-08-25T13:07:47Z,2024-08-25T13:29:41Z,2024-08-25T13:29:41Z,,master,refresh_job_table_on_resume,1,11,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9167
9166,file transfer status text overflow at start,"https://github.com/rustdesk/rustdesk/issues/9096#issuecomment-2296452332

1. Change the flutter version to 3.19.6 in bridge.yml
2. Change extended_text pub version to flutter 3.13 when building android

workflow: https://github.com/21pages/rustdesk/actions/runs/10546687575, failure on macos is due to other reasons.

![image](https://github.com/user-attachments/assets/66e502f5-24a5-4bae-aa3e-7a48328ae5cc)
",closed,2024-08-25T12:28:05Z,2024-08-25T12:46:21Z,2024-08-25T12:46:21Z,,master,pub_extended_text,5,35,8,1,4,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9166
9165,Update flutter-build.yml,,closed,2024-08-25T11:01:49Z,2024-08-25T11:14:34Z,,,master,master,1,1,443,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9165
9163,Update ru.rs,Added Russian translation for missing elements.,closed,2024-08-24T16:44:15Z,2024-08-25T07:12:08Z,2024-08-25T07:12:08Z,,master,patch-1,1,8,8,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9163
9161,fix: revert key events to raw key events on Linux,"Revert key events to raw key events on Linux desktop because of https://github.com/flutter/flutter/issues/154053 .

### Compare to the old logic

https://github.com/rustdesk/rustdesk/compare/9d9741f18efd3ef1361c5b0e0d8e562c5f93acdd...fufesou:rustdesk:fix/keyboard_linux_raw_key_event?expand=1


### Tests

- [ ] Linux ->
  - [ ] Windows
    - [x] Character keys
        - [x] en-US -> en-US
        - [x] en-US -> fr-FR
          - [x] Normal keys
          - [x] AltGr keys
          - [x] Dead keys
        - [x] fr-FR -> en-US
        - [x] fr-FR -> fr-FR
    - [x] Shortcuts
    - [ ] System keys
    - [x] Navigation keys
    - [x] Function keys
    - [x] Numeric keypad
    - [x] Lock keys
  - [ ] Linux
    - [x] Character keys
        - [x] en-US -> en-US
        - [x] en-US -> fr-FR
          - [x] Normal keys
          - [x] AltGr keys
          - [x] Dead keys
        - [x] fr-FR -> en-US
        - [x] fr-FR -> fr-FR
    - [x] Shortcuts
    - [ ] System keys
    - [x] Navigation keys
    - [x] Function keys
    - [x] Numeric keypad
    - [x] Lock keys
  - [ ] MacOS
    - [x] Character keys
        - [x] en-US -> en-US
        - [x] en-US -> fr-FR
          - [x] Normal keys
          - [x] AltGr keys
          - [x] Dead keys
        - [x] fr-FR -> en-US
        - [x] fr-FR -> fr-FR
    - [x] Shortcuts
    - [ ] System keys
    - [x] Navigation keys
    - [x] Function keys
    - [x] Numeric keypad
    - [x] Lock keys",closed,2024-08-24T15:27:16Z,2024-08-24T16:03:31Z,2024-08-24T16:03:31Z,,master,fix/keyboard_linux_raw_key_event,4,350,5,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9161
9160,"refact: flutter keyboard, map mode","## Desc

Refactor flutter keyboard event handle, map mode.

1. Get the `usb hid` code.
2. Convert the `usb hid` code to the position code of the control side OS.
3. Use the processing flow of the old event handle.

`Android` and `IOS` as the control side is not changed.

## Drawbacks

System keys cannot be listened and send to the controlled side.

1. `Meta` and `Meta + ?`, on Windows and Linux.
2. `PrintScreen`, on Windows and Linux.
3. `Alt+Tab`, on Windows and Linux.
4. `Command` and `Command + ?`, on MacOS
5. `F11` on MacOS
6. `PrintScreen` on MacOS. The `usb hid` code is `F13`. https://github.com/flutter/flutter/issues/153811

## TODOs

1. Add menu, to send some useful key (combination) to the controlled side.

## Tests

https://en.wikipedia.org/wiki/Keyboard_layout

![ISO_keyboard_(105)_QWERTY_UK svg](https://github.com/user-attachments/assets/09611803-c105-4c27-9431-e339577785b8)

- [ ] Windows ->
  - [ ] Windows
    - [x] Character keys
        - [x] en-US -> en-US
        - [x] en-US -> fr-FR
          - [x] Normal keys
          - [x] AltGr keys
          - [x] Dead keys
        - [x] fr-FR -> en-US
        - [x] fr-FR -> fr-FR
    - [x] Shortcuts
    - [ ] System keys
    - [x] Navigation keys
    - [x] Function keys
    - [x] Numeric keypad
    - [x] Lock keys
  - [ ] Linux (x11)
    - [ ] Character keys
        - [x] en-US -> en-US
        - [x] en-US -> fr-FR
          - [x] Normal keys
          - [x] AltGr keys
          - [x] Dead keys
        - [x] fr-FR -> en-US
        - [ ] fr-FR -> fr-FR
          - [x] Normal keys
          - [ ] AltGr keys
          - [x] Dead keys
    - [x] Shortcuts
    - [ ] System keys
    - [x] Navigation keys
    - [x] Function keys
    - [x] Numeric keypad
    - [x] Lock keys
    - [x] Long press. https://github.com/rustdesk/rustdesk/issues/6793
  - [ ] MacOS
    - [ ] Character keys
        - [x] en-US -> en-US
        - [ ] en-US -> fr-FR
          - [x] Normal keys
          - [x] AltGr keys
          - [x] Dead keys
        - [ ] fr-FR -> en-US
          - [x] Normal keys
          - [ ] AltGr keys
        - [ ] fr-FR -> fr-FR
          - [x] Normal keys
          - [ ] AltGr keys
          - [x] Dead keys
    - [x] Shortcuts
    - [ ] System keys
    - [x] Navigation keys
    - [x] Function keys
    - [x] Numeric keypad
    - [x] Lock keys
  - [x] Android
    - [x] Volumn and power, menus
- [ ] Linux ->
  - [ ] Windows
    - [ ] Character keys
        - [ ] en-US -> en-US
        - [ ] en-US -> fr-FR
          - [ ] Normal keys
          - [ ] AltGr keys
          - [ ] Dead keys
        - [ ] fr-FR -> en-US
        - [ ] fr-FR -> fr-FR
    - [ ] Shortcuts
    - [ ] System keys
    - [ ] Navigation keys
    - [ ] Function keys
    - [ ] Numeric keypad
    - [ ] Lock keys
    - [ ] Long press. https://github.com/rustdesk/rustdesk/issues/6793
  - [ ] Linux
    - [ ] Character keys
        - [ ] en-US -> en-US
        - [ ] en-US -> fr-FR
          - [ ] Normal keys
          - [ ] AltGr keys
          - [ ] Dead keys
        - [ ] fr-FR -> en-US
        - [ ] fr-FR -> fr-FR
    - [ ] Shortcuts
    - [ ] System keys
    - [ ] Navigation keys
    - [ ] Function keys
    - [ ] Numeric keypad
    - [ ] Lock keys
    - [ ] Long press. https://github.com/rustdesk/rustdesk/issues/6793
  - [ ] MacOS
    - [ ] Character keys
        - [ ] en-US -> en-US
        - [ ] en-US -> fr-FR
          - [ ] Normal keys
          - [ ] AltGr keys
          - [ ] Dead keys
        - [ ] fr-FR -> en-US
        - [ ] fr-FR -> fr-FR
    - [ ] Shortcuts
    - [ ] System keys
    - [ ] Navigation keys
    - [ ] Function keys
    - [ ] Numeric keypad
    - [ ] Lock keys
    - [ ] Long press. https://github.com/rustdesk/rustdesk/issues/6793
- [ ] MacOS ->
  - [ ] Windows
    - [x] Character keys
        - [x] en-US -> en-US
        - [x] en-US -> fr-FR
          - [x] Normal keys
          - [x] AltGr keys
          - [x] Dead keys
        - [x] fr-FR -> en-US
        - [x] fr-FR -> fr-FR
    - [x] Shortcuts
    - [ ] System keys
    - [x] Navigation keys
    - [x] Function keys
    - [x] Numeric keypad
    - [x] Lock keys
  - [ ] Linux
    - [x] Character keys
        - [x] en-US -> en-US
        - [x] en-US -> fr-FR
          - [x] Normal keys
          - [x] AltGr keys
          - [x] Dead keys
        - [x] fr-FR -> en-US
        - [x] fr-FR -> fr-FR
    - [x] Shortcuts
    - [ ] System keys
    - [x] Navigation keys
    - [x] Function keys
    - [x] Numeric keypad
    - [x] Lock keys
    - [x] Long press. https://github.com/rustdesk/rustdesk/issues/6793
  - [ ] MacOS
    - [x] Character keys
        - [x] en-US -> en-US
        - [x] en-US -> fr-FR
          - [x] Normal keys
          - [x] AltGr keys
          - [x] Dead keys
        - [x] fr-FR -> en-US
        - [x] fr-FR -> fr-FR
    - [x] Shortcuts
    - [ ] System keys
    - [x] Navigation keys
    - [x] Function keys
    - [x] Numeric keypad
    - [x] Lock keys
    - [x] Volumn and power, menus


",closed,2024-08-24T03:37:29Z,2024-08-24T04:10:37Z,2024-08-24T04:10:37Z,,master,refact/flutter_keyboard_map_mode,8,231,210,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9160
9155,Update lv.rs,,closed,2024-08-23T12:46:31Z,2024-08-23T13:27:52Z,2024-08-23T13:27:52Z,,master,patch-1,1,15,15,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9155
9153,"desktop file transfer, all columns respond to tap, add right click item border","When right click selected item, the border is not obvious but can feel a liitle ui change.


https://github.com/user-attachments/assets/6d061d61-a71c-47a6-8a6b-519078f44c23

",closed,2024-08-23T00:01:40Z,2024-08-23T02:00:36Z,2024-08-23T02:00:36Z,,master,desktop_file_transfer_tap,1,63,40,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9153
9151,Give movement priority to host rather than client ,Issue: https://github.com/rustdesk/rustdesk/issues/40,closed,2024-08-22T17:08:35Z,2024-08-23T14:50:01Z,,,master,dev-mouse-event,4,244,80,3,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9151
9144,Update trs,,closed,2024-08-21T20:46:07Z,2024-08-22T01:36:03Z,2024-08-22T01:36:03Z,,master,update-tr,2,15,15,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9144
9141,"fix: privacy mode 2, restore","Revert https://github.com/rustdesk/rustdesk/pull/8537

Use `TEMP_IGNORE_DISPLAYS_CHANGED` to temporarily ignore display changing events.

Because on some PCs, `restore_reg_connectivity()` is enough, while on other PCs, both `restore_reg_connectivity()` and `restore_displays()` are required.

### Preview

https://github.com/user-attachments/assets/e4e0812b-cfb4-4c6d-98f7-72b8bc48163c

### Current issue

On some PCs, if we only restore the registry key (`Computer\HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\GraphicsDrivers\Connectivity`) , the display settings are not actually restored.

eg.
1. Turn on ""Privacy mode 2"". `plug in virtual display` -> `store registry values` -> `set primary display(virtual)` -> `disable physical displays`.
2. Turn off ""Privacy mode 2"". `plug out vitual display` -> `restore registry values`.

But when we plug in a virtual display again, the controlled end will only display the virtual display and turn off the physical display.
Because the display combination setting is still to turn off the physical display.

The user must manually change the display settings.

![image](https://github.com/user-attachments/assets/18fd3de1-34bf-4c2c-b24a-17f45c00bfc0)

### TODO

Previous tests were not very comprehensive. If the server crashes, the current method is to rely on the registry to restore the display settings at startup, but this method may not be very useful. We need to find a more appropriate method to restore the display settings.
",closed,2024-08-21T15:41:08Z,2024-08-22T01:35:50Z,2024-08-22T01:35:50Z,,master,fix/privacy_mode_restore,2,64,14,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9141
9138,replace appindicator to ayatana-appindicator,"1. Replace  appindicator to ayatana-appindicator
* debian: tested on ubuntu 22.04
* debian flatpak: still use old appindicator, the control file of deb doesn't effect flatpak because it's not used, the tray doesn't show with nightly build.
* fedora: tested on fedora 38, the tray doesn't show with nightly build.
* suse: only test install because failed to install desktop
* arch: still use old one becase failed to build with `libayatana-appindicator`, althrough the package can be found on latest arch. https://github.com/21pages/rustdesk/actions/runs/10489496699/job/29054390628
2. Add to recommands, not implemented.
* debian: libayatana-appindicator3-1 is not added to `Recommands`, because libayatana-appindicator3-1 is not installed when it's in `Recommands` on ubuntu 22.04
* Rpm not well supported, https://unix.stackexchange.com/questions/73690/rpmbuild-is-there-a-way-to-specify-recommended-packages
3. Searched package, althrough not same as package in control file.
Arch:
![9b20c850ae64af9a52cda45ff37b7b6](https://github.com/user-attachments/assets/cd688aee-298a-4966-be5c-ed981ceb328b)
Suse:
![3717f4935508eea79916f76cf6641c5](https://github.com/user-attachments/assets/b07c0385-e36d-443e-962b-271b6184b54b)
Fedora:
![99989cc75bc6d9bc9833adcd2e954db](https://github.com/user-attachments/assets/8cff2f38-1789-44e3-9aa5-20ab3ddce984)

",closed,2024-08-21T13:35:14Z,2024-08-21T13:46:22Z,,,master,update_appindicator,6,9,9,1,2,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9138
9134,Fix/ios query onlines,"![image](https://github.com/user-attachments/assets/07eb9473-1cfd-438c-ac0b-c37f966abc2f)


![image](https://github.com/user-attachments/assets/74bfd07a-66aa-456c-b6f6-dc297a3bf955)


`query_online_states()` is moved out of `rendezvous_mediator`.
No code logic is changed.",closed,2024-08-21T08:49:33Z,2024-08-21T10:21:25Z,2024-08-21T10:21:25Z,,master,fix/ios_query_onlines,3,152,144,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9134
9132,Added Public Server to Readme,,closed,2024-08-20T16:19:14Z,2024-08-21T01:28:02Z,2024-08-21T01:28:02Z,,master,master,1,11,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9132
9127,Fix new cm tab not replace the old persisted tab,"* This happens when after changing DesktopTab to StatefulWidget, 1.2.7 and 1.3.0 have this problem.
* When `addConnection` in server_model.dart is called, the old closed client is removed, the client parameter of `buildConnectionCard` is new, but client id inside Consumer is old.
* The only state in cm page is timer, its value is kept in test.
* Fix by always rebuild all cm tabs, there may be a better way to solve the ui update.


[bug.webm](https://github.com/user-attachments/assets/ac05750c-92c8-43ab-893b-f9727c5c95ee)

[fixed.webm](https://github.com/user-attachments/assets/80616ac6-1cf9-425a-8f25-6d6882412b74)

[time_state_kept.webm](https://github.com/user-attachments/assets/a16c900f-177e-4314-9d02-ee48c402ad33)
",closed,2024-08-20T07:22:47Z,2024-08-20T07:34:10Z,2024-08-20T07:34:10Z,,master,fix_persisted_page_not_replaced,2,10,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9127
9117,opt desktop file manager status list,"* Show delete file/dir log
* Show full path rather than base file name
* Show files count
* Opt status card layout
* Change selected color to accent

[file_status.webm](https://github.com/user-attachments/assets/28dd5bfb-5696-47fe-87bf-007d381a24e2)

[card.webm](https://github.com/user-attachments/assets/f891da65-3c0b-4c61-8829-e3eea2c63b4c)

![padding](https://github.com/user-attachments/assets/562550b3-b112-4ee4-9415-658c92cdbedd)
",closed,2024-08-19T12:00:59Z,2024-08-20T02:53:55Z,2024-08-20T02:53:55Z,,master,file_status,3,272,82,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9117
9114,Update es.rs,New terms added,closed,2024-08-19T06:22:07Z,2024-08-19T06:41:28Z,2024-08-19T06:41:28Z,,master,master,1,3,3,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9114
9113,Last tips,,closed,2024-08-19T06:12:57Z,2024-08-19T06:14:47Z,2024-08-19T06:14:47Z,,master,master,1,2,2,6,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9113
9112,Update tw.rs,,closed,2024-08-19T05:40:22Z,2024-08-19T06:13:31Z,2024-08-19T06:13:31Z,,master,patch-1,1,12,12,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9112
9111,"fix: privacy mode 2, more error info","Privacy mode 2.

Show `GetLastError()` if `ChangeDisplaySettingsEx` returns `DISP_CHANGE_FAILED `.",closed,2024-08-19T03:32:42Z,2024-08-19T03:35:35Z,2024-08-19T03:35:35Z,,master,fix/privacy_mode_2_more_error_info,1,27,11,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9111
9107,Update de.rs,,closed,2024-08-18T19:07:01Z,2024-08-18T19:12:56Z,2024-08-18T19:12:56Z,,master,patch-32,1,3,3,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9107
9098,Vumstar patch 1,,closed,2024-08-17T06:12:02Z,2024-08-17T06:16:06Z,,,master,vumstar-patch-1,2,2,2,2,2,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9098
9097,Update flutter-ci.yml,,closed,2024-08-17T04:02:05Z,2024-08-17T04:11:05Z,,,master,patch-1,1,4,6,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9097
9093,Update Italian language,"@rustdesk 

Please merge. Thanks.",closed,2024-08-16T10:30:44Z,2024-08-16T10:39:36Z,2024-08-16T10:39:36Z,,master,master,1,3,3,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9093
9091,"fix: crash, drop tokio RunTime in async context (Wayland)","https://github.com/rustdesk/rustdesk/issues/9051

## Reproduce steps

1. Enable selinux.
2. Do not config RustDesk selinux policies.
3. Start rustdesk service. The `--server` process will not be started.
4. Start rustdesk client.

## Desc

> This happens when a runtime is dropped from within an asynchronous context.


1. `setup_uinput()` is called. `UInputKeyboard` and `UInputMouse` contains `Runtime`.
https://github.com/rustdesk/rustdesk/blob/ed18e3c7860edca81d07794773bd86ea51e14e18/src/server/input_service.rs#L519

https://github.com/rustdesk/rustdesk/blob/ed18e3c7860edca81d07794773bd86ea51e14e18/src/server/uinput.rs#L30

2. `setup_rdp_input()` is called. The previous added `UInputKeyboard` and `UInputMouse` instances are dropped.
https://github.com/rustdesk/rustdesk/blob/ed18e3c7860edca81d07794773bd86ea51e14e18/src/server/input_service.rs#L500

So we need to avoid dropping the `Runtime` within an asynchronous context.

## Tests

- [x]  Pure client
- [x] Enable selinux, start service and client.
- [x]  Disable selinux (or add selinux policies), start service.
",closed,2024-08-16T06:44:10Z,2024-08-16T06:55:43Z,2024-08-16T06:55:43Z,,master,fix/crash_drop_tokio_runtime_in_asyc,4,47,31,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9091
9089,file rename,"https://github.com/rustdesk/rustdesk/discussions/7758#discussioncomment-10234568

1. Rename file or directoy of local or remote. 
* validate filename
* show log in cm
* mobile menu is added in more dropdown
* tested Linux/Windows/Mac/Andriod
2. Desktop icon tooltips.

[file_rename_linux_android.webm](https://github.com/user-attachments/assets/c233174d-6651-4428-ac16-da404875f9d0)

https://github.com/user-attachments/assets/1347cdca-a291-4beb-981e-aac0c1bc3464


[file_name_validate.webm](https://github.com/user-attachments/assets/3562fe86-1491-4aeb-9924-3bb1f7299e76)

 
[file_manager_tooltips.webm](https://github.com/user-attachments/assets/e5c3b8f9-87c7-437b-afa1-59712e50955a)

![1723783399533](https://github.com/user-attachments/assets/9e2164ed-dee8-48a2-882c-186764899399)
",closed,2024-08-16T04:45:02Z,2024-08-16T04:55:58Z,2024-08-16T04:55:58Z,,master,rename,30,387,49,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9089
9084,merge changes,,closed,2024-08-15T16:24:21Z,2024-08-15T16:24:54Z,,,master,master,3,232,2,9,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9084
9081,fix: resize top edge,"## Preview

### Bug

https://github.com/user-attachments/assets/b5e84e57-5067-4ecc-a1d3-ab1ab21f7e84

### Fixed


https://github.com/user-attachments/assets/e92910b5-41fc-41d2-832e-dd52b70e96e6


#### System window


https://github.com/user-attachments/assets/4a293180-7319-425f-956b-4e014a8e7818



## Desc

On Windows, only the top and corner resize edges are set.

### More

The sizing border of a window (in black) are the red rectangles.

![image](https://github.com/user-attachments/assets/f9c095fb-09a9-4a8b-99f6-cfad6eef243f)

### window manager

Run window manager's default example, change the following three lines. Monitor scale is 150%.

https://github.com/rustdesk-org/window_manager/blob/f19acdb008645366339444a359a45c3257c8b32e/windows/window_manager_plugin.cpp#L154

```c++
      sz->rgrc[0].right -= 8;
      sz->rgrc[0].bottom -= 8;
      sz->rgrc[0].left -= -8;
```

1. Change the values to 0.

<img width=""155"" alt=""1723734509761"" src=""https://github.com/user-attachments/assets/d22c7d19-e77c-40da-b6e6-b1d4b2c0213a"">

2. Change the values to 11. (11 -> scale 150%, 8 -> scale 100%)

<img width=""200"" alt=""1723734665214"" src=""https://github.com/user-attachments/assets/7262907c-04d6-4421-a57c-be107468a1d4"">


3. Change the values to 200.

<img width=""219"" alt=""1723734599214"" src=""https://github.com/user-attachments/assets/a9731ee7-380a-419c-9c08-cdd05e5b02ff"">


We can see that the window has an 11-pixel transparent area for resizing.

#### TODO

We need to query and set a better value based on the current monitor scale.

1. Window manager and multi desktop window.
2. `kWindowResizeEdgeSize` for top edge in RustDesk.

## Tests

- [x] Compare to the system window
- [x] Do no affect the cursor in remote window
- [x] Fullscreen
- [x] Move cursor in/out window, trigger resizing


## Refs and useful links

1. https://learn.microsoft.com/en-us/windows/win32/winmsg/window-styles
3. https://learn.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-getsystemmetrics
6. https://learn.microsoft.com/en-us/windows/win32/api/dwmapi/nf-dwmapi-dwmgetwindowattribute
",closed,2024-08-15T15:44:16Z,2024-08-15T15:58:19Z,2024-08-15T15:58:19Z,,master,fix/resize_top_edge,9,31,8,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9081
9079,fix: resize top edge,"## Preview

### Bug

https://github.com/user-attachments/assets/b5e84e57-5067-4ecc-a1d3-ab1ab21f7e84

### Fixed

https://github.com/user-attachments/assets/d9c270ec-ebda-4940-8da5-9d89fce160a4

## Desc

We have historically changed `kWindowEdgeSize`, `4.0` -> `1.0` -> `5.0` -> `1.0` for Windows.
But I can confirm we it should be greater than `1.0`, as it is only used for resizing.

Only top edige has the issue because the others edge has an extra 8 pixels for dragging.

https://github.com/rustdesk-org/window_manager/blob/f19acdb008645366339444a359a45c3257c8b32e/windows/window_manager_plugin.cpp#L154

1. It may be better to remove the fixed 8 pixels. And set the dragging edge side only in `DragToResizeArea` https://github.com/rustdesk-org/window_manager/blob/f19acdb008645366339444a359a45c3257c8b32e/lib/src/widgets/drag_to_resize_area.dart#L27
2. It's better to apply dpi, not a fixed drag edge size. eg. `8 * 150%`

## Tests

- [ ] Compare to the system window
- [ ] Do no affect the cursor in remote window
- [ ] Fullscreen
- [ ] Move cursor in/out window, trigger resizing
",closed,2024-08-15T13:28:11Z,2024-08-15T13:57:55Z,,,master,fix/resize_top_edge,4,10,8,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9079
9075,"Update cs.rs: more corrections, new phrases translated",Thanks.,closed,2024-08-15T07:25:46Z,2024-08-15T09:34:39Z,2024-08-15T09:34:39Z,,master,master,1,15,15,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9075
9074,Update cs.rs: typo corrected,Thanks.,closed,2024-08-15T06:24:41Z,2024-08-15T06:55:44Z,2024-08-15T06:55:44Z,,master,patch-1,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9074
9073,"only main window show tabbar border, change cm tabbar color","![dark](https://github.com/user-attachments/assets/6bcae2ea-5506-440d-9cc4-f5996d3c4a85)
![light](https://github.com/user-attachments/assets/61c51f04-afb6-47e0-9666-3b155de4d56d)
",closed,2024-08-15T05:13:46Z,2024-08-15T05:25:59Z,2024-08-15T05:25:59Z,,master,tabbar,2,21,9,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9073
9072,Update config.rs,,closed,2024-08-15T03:16:58Z,2024-08-15T03:17:09Z,,,master,master,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9072
9069,"fix get_custom_server_from_string, `relay=` is not used","![1723685775820](https://github.com/user-attachments/assets/6145842b-33cb-49fc-b144-d2aebd161057)
",closed,2024-08-15T01:13:01Z,2024-08-15T01:57:12Z,2024-08-15T01:57:12Z,,master,fix_custom_relay_in_name,1,28,14,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9069
9067,Update ko.rs,Additional Korean translations,closed,2024-08-15T00:15:44Z,2024-08-15T01:25:04Z,2024-08-15T01:25:04Z,,master,master,1,15,15,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9067
9064,Translation correction,Version had a quote before the term,closed,2024-08-14T16:09:18Z,2024-08-15T01:24:42Z,2024-08-15T01:24:42Z,,master,master,1,1,1,3,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9064
9062,"fix: windows, remote window, resizing","https://github.com/rustdesk/rustdesk/discussions/9061


https://github.com/user-attachments/assets/ac7ff458-b823-445d-ab35-ef604766762b


# Tests

https://github.com/rustdesk/rustdesk/discussions/9063#discussioncomment-10338875

## Single monitor

- [x] ""Minimize, Restore/Maximize, Close"" buttons.
  - [x] Main window
  - [x] Remote window
- [x] Window edges, normal, maximized, fullscreen.  Whether the edges can be shown.
  - [x] Main window
  - [x] Remote window

- [x] Resizing
  - [x] Main window
  - [x] Remote window
  - [x] Corner resize
  - [x] Edge resize

- [x] Show all contents, without crops. Remote window, normal, maximized, fullscreen.


## Multiple monitors

- [x] Different arrangements.

- [x] Different main display.
  - [x] Display 1 as main display
  - [x] Display 2 as main display
  - [x] Display 3 as main display

- [x] Different scale on some monitors.
  - [x] Display 1 (100), Display 2 (150), Display 3(200)
  - [x] Display 1 (150), Display 2 (120), Display 3(100)

## Note

1. **The experience of resizing through the top edge is not good**.  History issue.


https://github.com/user-attachments/assets/b5e84e57-5067-4ecc-a1d3-ab1ab21f7e84


",closed,2024-08-14T15:20:28Z,2024-08-15T05:24:42Z,2024-08-15T05:24:42Z,,master,fix/windows_remote_window_resizing,1,1,1,1,2,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9062
9058,fix wallpaper get sid,https://github.com/rustdesk/rustdesk/discussions/9053#discussioncomment-10335445,closed,2024-08-14T10:03:46Z,2024-08-14T10:09:47Z,2024-08-14T10:09:47Z,,master,fix_wallpaper_get_sid,1,2,36,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9058
9057,Fix CI failure on x686 windows for MSVCRT conflicts: MSVCRT.lib(chandler4gs.obj) : error LNK2019: unresolved external symbol __except_handler4_common referenced in function __except_handler4,"Original CI failure on x686 Windows.
```
 LINK : warning LNK4098: defaultlib 'MSVCRT' conflicts with use of other libs; use /NODEFAULTLIB:library

          LINK : warning LNK4217: symbol '_abort' defined in 'libucrt.lib(abort.obj)' is imported by 'libmagnum_opus-543c189f8b942366.rlib(celt.c.obj)' in function '_celt_fatal'

          LINK : warning LNK4217: symbol '__set_abort_behavior' defined in 'libucrt.lib(abort.obj)' is imported by 'libmagnum_opus-543c189f8b942366.rlib(celt.c.obj)' in function '_celt_fatal'

          LINK : warning LNK4217: symbol '___acrt_iob_func' defined in 'libucrt.lib(_file.obj)' is imported by 'libmagnum_opus-543c189f8b942366.rlib(celt.c.obj)' in function '_celt_fatal'

          LINK : warning LNK4217: symbol '___stdio_common_vfprintf' defined in 'libucrt.lib(output.obj)' is imported by 'libmagnum_opus-543c189f8b942366.rlib(celt.c.obj)' in function '__vfprintf_l'

          LINK : warning LNK4217: symbol '_free' defined in 'libucrt.lib(free.obj)' is imported by 'libmagnum_opus-543c189f8b942366.rlib(opus_encoder.c.obj)' in function '_opus_encoder_create'

          LINK : warning LNK4217: symbol '_free' defined in 'libucrt.lib(free.obj)' is imported by 'libmagnum_opus-543c189f8b942366.rlib(opus_decoder.c.obj)' in function '_opus_decoder_create'

          LINK : warning LNK4286: symbol '_free' defined in 'libucrt.lib(free.obj)' is imported by 'libmagnum_opus-543c189f8b942366.rlib(repacketizer.c.obj)'

          LINK : warning LNK4217: symbol '_malloc' defined in 'libucrt.lib(malloc.obj)' is imported by 'libmagnum_opus-543c189f8b942366.rlib(opus_encoder.c.obj)' in function '_opus_alloc'

          LINK : warning LNK4217: symbol '_malloc' defined in 'libucrt.lib(malloc.obj)' is imported by 'libmagnum_opus-543c189f8b942366.rlib(opus_decoder.c.obj)' in function '_opus_decode_frame'

          LINK : warning LNK4286: symbol '_malloc' defined in 'libucrt.lib(malloc.obj)' is imported by 'libmagnum_opus-543c189f8b942366.rlib(repacketizer.c.obj)'

          MSVCRT.lib(chandler4gs.obj) : error LNK2019: unresolved external symbol __except_handler4_common referenced in function __except_handler4

          D:\a\rustdesk\rustdesk\target\release\deps\librustdesk.dll : fatal error LNK1120: 1 unresolved externals

```",closed,2024-08-14T09:31:59Z,2024-08-14T09:32:05Z,2024-08-14T09:32:05Z,,master,master,1,1,1,1,2,0,Shylock-Hg,COMMENTED,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9057
9054,Update de.rs,,closed,2024-08-13T21:10:28Z,2024-08-14T02:39:05Z,2024-08-14T02:39:05Z,,master,patch-31,1,5,5,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9054
9047,Update Italian language,"@rustdesk 

Please merge. Thanks.",closed,2024-08-13T06:15:30Z,2024-08-13T06:22:08Z,2024-08-13T06:22:08Z,,master,master,1,5,5,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9047
9045,Update es.rs,New translations,closed,2024-08-13T04:09:34Z,2024-08-13T06:11:36Z,2024-08-13T06:11:36Z,,master,master,1,10,10,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9045
9043,fix: remove dup translation,"The translation of ""Trust this device"" is duplicated.",closed,2024-08-13T03:23:53Z,2024-08-13T03:27:39Z,2024-08-13T03:27:39Z,,master,refact/remove_dup_translation,30,0,30,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9043
9038,"fix: win, multi monitors, maximize, may fix 9033","https://github.com/rustdesk/rustdesk/issues/9033

https://github.com/rustdesk-org/rustdesk_desktop_multi_window/pull/21",closed,2024-08-12T16:12:20Z,2024-08-12T16:18:35Z,2024-08-12T16:18:35Z,,master,fix/9033_win_multi_monitors_maximize,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9038
9036,fix: build,,closed,2024-08-12T14:07:15Z,2024-08-12T14:16:00Z,2024-08-12T14:16:00Z,,master,fix/build,4,6,11,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9036
9035,android telebot setting,"
https://github.com/user-attachments/assets/e4af5636-29c7-4c45-9b7a-74a31eeb72ca

",closed,2024-08-12T13:56:58Z,2024-08-12T14:20:35Z,2024-08-12T14:20:35Z,,master,android_bot_setting,1,19,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9035
9034,"fix: not plug virtual dislay, non win, installed","Do not send message ""plug in virtual display"" if peer is not windows and installed.

The peer info is parsed in UI side, flutter and sicter (additional info ignored).

We can move  `send_toggle_virtual_display_msg()` to the flutter side.

But it may be better to do in rust side.


https://github.com/user-attachments/assets/a9d46363-e2de-43a3-855c-d65bfe887cf5

",closed,2024-08-12T13:45:35Z,2024-08-12T13:53:41Z,2024-08-12T13:53:41Z,,master,fix/do_to_try_plug_in_virtual_display_if_not_windows_installed,1,45,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9034
9031,Update ptbr.rs,,closed,2024-08-12T03:40:31Z,2024-08-12T09:22:00Z,2024-08-12T09:22:00Z,,master,patch-2,1,15,15,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9031
9027,"fix: privacy mode 2, resolution changed","Try send `SwitchDisplay` message to the control side when privacy mode is changed.

Because if the resolution changes, the `H265` and `H264` decoder needs to be reset.

I'm not sure if there's a better solution because `VP8`, `VP9` and `AV1` do not requires reset at this point.

@21pages 

### Bug

https://github.com/user-attachments/assets/14ee21d7-c31f-4c36-b02a-d38f7630be4a

### Fixed

https://github.com/user-attachments/assets/f8e20f6b-a502-4eb3-8b03-2106f89a786f

",closed,2024-08-11T15:25:55Z,2024-08-11T15:28:02Z,2024-08-11T15:28:02Z,,master,fix/privacy_mode_2_resolution_changed,1,9,4,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9027
9025,Disable msvcrt.,,closed,2024-08-11T12:05:27Z,2024-08-11T12:05:42Z,,,master,fix/avoid-msvcrt,1,2,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9025
9023,"fix: win, virtual display","https://github.com/rustdesk/rustdesk/discussions/8044

## Preview

### Fix ""No physical displays, no need to use the privacy mode.""

May fix https://github.com/rustdesk/rustdesk/discussions/8994#discussioncomment-10300985

#### Bug


https://github.com/user-attachments/assets/9d55eae0-2a6e-4973-873b-79070f49b6f7


#### Fixed


https://github.com/user-attachments/assets/72310e89-f12c-438b-9319-4fdec05cf2f7


### Default resolution 1920x1080

https://github.com/user-attachments/assets/42c39a49-2439-41d1-a739-0d6014de3586

### Restore on conn & disconn

https://github.com/user-attachments/assets/8f9c033d-0cc3-405d-a55d-f6b280c04d3c

The options is stored in the peer's configuration.


```toml
[options]
virtual-display = ''
```

or

```toml
[options]
virtual-display = ',0,0'
```

## Desc

### Fix ""No physical displays, no need to use the privacy mode.""

The registry value is restored, but the settings in display settings is not refreshed if no virtual displays are plugged in/out.

We can manually trigger the refresh by the following call if no vitual displays are pluged in/out. 

![image](https://github.com/user-attachments/assets/7593bf55-b25d-445d-b5e5-2d64976b1d69)


### Default resolution 1920x1080

1. Move `mod reg_display_settings` from `src/privacy_mode/win_virtual_display.rs` to `src/platform/windows.rs`.
2. Spawn a new thread to check if the virtual display is plugged in for the first time.

![image](https://github.com/user-attachments/assets/ef4b7487-5a5a-4925-8d08-eae16ff81882)

![image](https://github.com/user-attachments/assets/a1bb6601-3457-48e2-b028-321798a8c041)

### Restore on conn & disconn

1. Save option.

![image](https://github.com/user-attachments/assets/f11a8753-9632-45d5-8104-ac7df23ecb2c)

2. Remove virtual displays on disconnection.

![image](https://github.com/user-attachments/assets/79b3a0dd-5328-42c9-933a-168d6b2df1a8)

3. Restore virtual displays.

![image](https://github.com/user-attachments/assets/317243c3-c016-4fd2-9fe4-2721384e1bf6)

**Note**:
1. Virtual displays are removed when the last connection is closed on the controlled side.  
If `A`,`B` -> `C`, `A` has one virtual display. Then `A` disconnect and connect, there will be two virtual displays on `C`.
Because `B` did not disconnect, `C` will not remove virtual displays. `A` will plug in one virtual display on conn.

We cannot control the display index to plug in with amyuni idd.

2. After all connections are closed, all virtual displays of amyuni idd will be deleted.



",closed,2024-08-11T06:22:07Z,2024-08-11T11:26:41Z,2024-08-11T11:26:41Z,,master,fix/win_virtual_display_restore,8,229,144,1,0,0,"rustdesk, fufesou, rustdesk, fufesou","COMMENTED, COMMENTED, COMMENTED, COMMENTED",False,https://api.github.com/repos/rustdesk/rustdesk/issues/9023
9021,Update fa.rs,,closed,2024-08-10T16:01:32Z,2024-08-10T22:49:34Z,2024-08-10T22:49:34Z,,master,patch-43,1,22,22,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9021
9020,Update fa.rs,,closed,2024-08-10T15:38:10Z,2024-08-10T15:50:11Z,,,master,master,1,12,12,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9020
9019,Fix/rdp input wayland,"Get the scale following the way of gtk4.
https://gitlab.gnome.org/GNOME/gtk/-/commit/8df8d0bd5d50c872e13a2daad69ede3ea252466d

Fix #8524",closed,2024-08-10T10:28:32Z,2024-09-20T03:06:10Z,,,master,fix/rdp-input-wayland,6,185,7,6,30,0,"rustdesk, rustdesk, rustdesk, fufesou, Shylock-Hg, Shylock-Hg, rustdesk, rustdesk, Shylock-Hg, Shylock-Hg","COMMENTED, COMMENTED, COMMENTED, COMMENTED, COMMENTED, COMMENTED, COMMENTED, COMMENTED, COMMENTED, COMMENTED",True,https://api.github.com/repos/rustdesk/rustdesk/issues/9019
9016,Update Italian language,"@rustdesk 

Please merge. Thanks.",closed,2024-08-10T07:40:50Z,2024-08-10T12:52:27Z,2024-08-10T12:52:27Z,,master,master,1,6,6,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9016
9012,trust this device to skip 2fa,"https://github.com/rustdesk/rustdesk/discussions/8513#discussioncomment-10234494

**Steps of trust one device:**

* The controlled side enables 2FA and the ""Enable trusted devices"" option.
* The control side connects to the controlled side, after the password is verified, if `enable_trusted_devices` proto is true,  there will be a checkbox under the 2FA input field. If the checkbox is checked and the 2FA is correct, the digest of the control side's HWID will be stored on the controlled side, and the checkbox option will be remembered in the `trust-this-device` peer option, which defaults to false.
* In the next connection, if the `trust-this-device` peer option is true, the HWID digest will be sent in the login request, and if the digest is found in the trusted devices list, the 2FA verification will be skipped

**Details**

* Trusted devices will be cleared when:
  * the permanent password is changed.
  * 2FA is disabled.
* The entire trusted devices list is encrypted, because we don't want the expiration time to be modified manually. The maximum size is 1MB, which is enough to store several thousand trusted devices.
* The expiration time is 90 days, and outdated items are removed when the trusted devices are read or set.
* The `enable_trusted_devices` proto is only set when the login error is `REQUIRE_2FA`, which can save network payload.
* In addition to HWID, the ID, platform, and name are also compared.
* When 2FA dialog is shown, the `trust-this-device peer` option is set to false. If the checkbox is selected, the `trust-this-device` peer option is set to true.

**Sciter**
* Sciter doesn't add `Enable trusted devices` option, only because `Manage trusted devices` dialog is not written, but sciter has grid example. I will add it to sciter and add bot to mobile and sciter.

**Test**
* Windows/Linux/Macos/Android

https://github.com/user-attachments/assets/30c93524-0d1d-4944-97d9-0836c99f2c4b


https://github.com/user-attachments/assets/917afd49-a233-4a8a-9824-7f46b4ac658c


https://github.com/user-attachments/assets/c891cd09-bff2-481e-bef4-640c71aba812

",closed,2024-08-09T13:19:20Z,2024-08-12T10:08:33Z,2024-08-12T10:08:33Z,,master,2fa_trust,30,598,18,3,2,0,"rustdesk, 21pages, rustdesk, 21pages, rustdesk, 21pages","COMMENTED, COMMENTED, COMMENTED, COMMENTED, COMMENTED, COMMENTED",False,https://api.github.com/repos/rustdesk/rustdesk/issues/9012
9006,"fix: multi-displays, displays changed, switch idx","https://github.com/rustdesk/rustdesk/discussions/8994

Use init display index as the primary index.

But when displays are changed, the primary display may also change.

No need to change the old primary index.
But we need to make sure that the old primary index does not exceed the display number. New conditions is added `pi.primaryDisplay >= pi.displays.length`.

### Reproduce steps

Windows/Linux/MacOS -> Win10/Win11

1. Controlled side, multiple displays, set main display to number other than `1`. Eg: `2`.
2. Control side, connect. Set primay display index to the second display.
3. Control side, turn on ""Privacy mode 2"".
4. Controlled side, plug in virtual display, turn off all physical displays.
5. The control end receives new screen display information, but only receives one screen display. However, the main screen display index is still the second one, which makes the current screen display index invalid.",closed,2024-08-09T07:31:54Z,2024-08-09T13:17:06Z,2024-08-09T13:17:06Z,,master,fix/multi_displays_changed_new_display_idx,1,6,5,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9006
9004,Update de.rs,,closed,2024-08-08T21:24:11Z,2024-08-09T00:43:18Z,2024-08-09T00:43:18Z,,master,patch-30,1,7,7,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9004
9002,fix: update pub desktop_multi_window,"fix https://github.com/rustdesk/rustdesk/issues/8979

The other update of `desktop_multi_window` will be in another PR.",closed,2024-08-08T14:38:41Z,2024-08-08T15:06:33Z,2024-08-08T15:06:33Z,,master,fix/update_pub_desktop_multi_window,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9002
9001,Fix/exe upgrade options,"1. Msi install options, swap shortcuts positions. ""Start menu shortcuts"" above ""Desktop icon"", the same to exe installler.
2. Stores registry values ​​for installation options, same as the msi installer.

![image](https://github.com/user-attachments/assets/d7e9cbee-bc10-4c4e-8aa4-6e9f0210459b)

Install, upgrade and uninstall are tested.

**Note**:
`--silent-install` is not changed, it will create both desktop icon and start menu shortcut on Windows.
Because adding arguments may break the previous command line. https://github.com/rustdesk/rustdesk/blob/049c334db325cfe3ed9d4d9eb3dc17d3ea7214cd/src/core_main.rs#L194

Please use msi for silent install without shortcuts.

I'll add another silent install command if we have to.
",closed,2024-08-08T13:57:09Z,2024-08-08T14:07:06Z,2024-08-08T14:07:06Z,,master,fix/exe_upgrade_options,7,94,13,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/9001
8998,"fix: exe upgrade, use previous options","
Stores registry values ​​for installation options, same as the msi installer.

![image](https://github.com/user-attachments/assets/d7e9cbee-bc10-4c4e-8aa4-6e9f0210459b)

Install, upgrade and uninstall are tested.

**Note**:
`--silent-install` is not changed, it will create both desktop icon and start menu shortcut on Windows.
Because adding arguments may break the previous command line. https://github.com/rustdesk/rustdesk/blob/049c334db325cfe3ed9d4d9eb3dc17d3ea7214cd/src/core_main.rs#L194

Please use msi for silent install without shortcuts.

I'll add another silent install command if we have to.
",closed,2024-08-08T12:36:31Z,2024-08-08T12:41:33Z,,,master,fix/exe_upgrade_options,4,83,9,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8998
8997,Update ca.rs,update catalan translation,closed,2024-08-08T12:35:47Z,2024-08-08T15:18:01Z,2024-08-08T15:18:01Z,,master,master,1,218,218,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8997
8992,"fix: privacy mode, windows vd, init resolution","https://github.com/rustdesk/rustdesk/discussions/8946

Use resolution `1920x1080` for privacy mode 2.


![a](https://github.com/user-attachments/assets/aced9eea-16cf-4eb7-8d5d-bc84bd0f1935)


The resolution of control side is not used, since `DPI` also affects the display.

Maybe we can add the `DPI` setting in the future.
",closed,2024-08-08T06:12:59Z,2024-08-08T07:31:11Z,2024-08-08T07:31:11Z,,master,fix/virtual_display_privacy_mode_resolution,3,15,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8992
8991,Android: Enable JNI mode on client too,"Signed-off-by: Vasyl Gello <vasek.gello@gmail.com>
",closed,2024-08-08T05:26:45Z,2024-08-11T17:42:15Z,,,master,hwcodec-android,5,44,3,2,4,0,"rustdesk, rustdesk, rustdesk, basilgello","COMMENTED, COMMENTED, COMMENTED, COMMENTED",False,https://api.github.com/repos/rustdesk/rustdesk/issues/8991
8988,Update Italian language,"@rustdesk 

Please merge. Thanks.",closed,2024-08-07T19:11:19Z,2024-08-08T02:24:15Z,2024-08-08T02:24:15Z,,master,master,1,4,4,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8988
8987,Update ru.rs,,closed,2024-08-07T18:57:13Z,2024-08-08T02:24:28Z,2024-08-08T02:24:28Z,,master,master,1,4,4,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8987
8985,Use JNI MediaCodec-backed hardware codecs on Android (fix some waiting for image),"This is a companion change utilizing https://github.com/rustdesk-org/hwcodec/pull/12
",closed,2024-08-07T14:21:04Z,2024-08-08T03:53:49Z,2024-08-08T03:53:49Z,,master,hwcodec-android,1,4,0,1,30,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8985
8980,Update Ukrainian translation,Sync with #8977,closed,2024-08-07T10:20:03Z,2024-08-08T02:24:40Z,2024-08-08T02:24:40Z,,master,ukrainian-translation,1,4,4,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8980
8977,unlock with PIN,"* If not set, use admin password; if set, use custom unlock pin.
* At least 4 characters, encrypted.
* Set with gui or command line.
* Tested on win/mac/linux.


https://github.com/user-attachments/assets/a2c41b96-b591-4e61-a1ac-1f2cfcbf0c95



https://github.com/user-attachments/assets/4df65489-76f0-4384-b41a-d18f3c139d18


",closed,2024-08-07T02:20:12Z,2024-08-07T08:21:38Z,2024-08-07T08:21:38Z,,master,unlock_password,30,326,9,2,1,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8977
8974,Update ko.rs,Additional Korean translation,closed,2024-08-07T00:59:14Z,2024-08-07T02:12:43Z,2024-08-07T02:12:43Z,,master,master,1,47,47,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8974
8969,Set scale for rdp input.,Fix #8524 ,closed,2024-08-06T11:16:07Z,2024-08-10T10:29:37Z,,,master,fix/rdp-input-mouse,11,442,33,15,19,0,"rustdesk, Shylock-Hg, rustdesk, basilgello, basilgello, rustdesk, basilgello, Shylock-Hg, basilgello, Shylock-Hg, rustdesk, rustdesk, rustdesk, Shylock-Hg","COMMENTED, COMMENTED, COMMENTED, COMMENTED, COMMENTED, COMMENTED, COMMENTED, COMMENTED, COMMENTED, COMMENTED, COMMENTED, COMMENTED, COMMENTED, COMMENTED",True,https://api.github.com/repos/rustdesk/rustdesk/issues/8969
8968,"update sysinfo rlim_max, which causing debian 13 pkexec not work","https://github.com/rustdesk/rustdesk/issues/8719


https://github.com/user-attachments/assets/89523fab-cb4a-4e7d-a2e2-cf62d4156a64

",closed,2024-08-06T10:11:39Z,2024-08-06T10:19:35Z,2024-08-06T10:19:35Z,,master,update_sysinfo_rlim_max,2,3,3,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8968
8965,"refact: audio input, combobox instead of radio","
https://github.com/user-attachments/assets/39521e73-3d7e-4132-84fd-ee81460ab575

",closed,2024-08-06T07:47:18Z,2024-08-06T09:07:05Z,2024-08-06T09:07:05Z,,master,refact/audio_input_combobox,1,10,10,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8965
8964,fix build,,closed,2024-08-06T04:34:27Z,2024-08-06T04:36:39Z,2024-08-06T04:36:39Z,,master,fix_build,1,5,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8964
8963,尝试修改 ci 编译流程并配置临时打包签名文件,,closed,2024-08-06T02:40:03Z,2024-08-06T03:25:06Z,,,master,ci_runner,3,1474,1474,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8963
8961,"fix: reset voice call state, on conn","
### Bug

https://github.com/user-attachments/assets/21eb810b-685a-448f-a683-0cc1b0ba1aca

### Fixed

https://github.com/user-attachments/assets/1165d971-d1f0-4d8d-a6b4-158113daafad

",closed,2024-08-05T16:24:54Z,2024-08-05T16:28:31Z,2024-08-05T16:28:31Z,,master,fix/reset_voice_call_state_on_conn,1,2,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8961
8960,feat: audio asio,"https://github.com/rustdesk/rustdesk/issues/3762#issuecomment-1868437852

### Preview



https://github.com/user-attachments/assets/45a42f7b-5da4-47e5-98d6-e8752aeaab1e


### Changes

1. Fix. Reset voice call state on conn is established.

![image](https://github.com/user-attachments/assets/5d5ef20b-0499-46a6-8198-ed9244fbea86)

2. Asio support for windows. The inputs are suffixed with `(ASIO)`.
3. Add callbacks on exit. Because asio stream should be dropped before exiting process.

![image](https://github.com/user-attachments/assets/18c96c80-8394-4464-8d0a-c6b8f0a05633)


4. Remove unused ffi function `main_get_default_sound_input()`.
5. Remove dup code in `src/ui.rs` -> `src/ui_interface.rs`.

![image](https://github.com/user-attachments/assets/7c3f1392-8c4c-4886-bcca-84d8e1ac5c5c)

",closed,2024-08-05T15:04:06Z,2024-08-05T15:18:05Z,,,master,feat/audio_asio,10,218,80,1,1,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8960
8949,Refact/msi more install options,"1. Fix silent repair/upgrade error. `msiexec /i package.msi /qn` will cause incomplete installation.   
On other computers, this issue may even result in two versions, `1.3.0.1` and `1.3.0.2`, coexisting. The only workaround before the repair was to avoid ""repair/upgrade"" and instead just uninstall and then install.

https://github.com/user-attachments/assets/a356eb4f-300d-4051-9be6-980ad53a3866


https://github.com/user-attachments/assets/2537af4e-1ffc-4623-a534-af6e6f2b8dff


2. Add install options.

https://github.com/rustdesk/rustdesk/discussions/8829

https://github.com/user-attachments/assets/847d2851-3eba-41eb-9bf4-a23130deb2ae



https://github.com/user-attachments/assets/a04e5c86-8a84-4b14-99d2-054721e6c7a6




The options `CREATESTARTMENUSHORTCUTS` and `CREATEDESKTOPSHORTCUTS` support `1/0` or `Y/N`.

```
msiexec /i Package.msi /qn INSTALLFOLDER=""D:\Program Files\RustDesk"" CREATESTARTMENUSHORTCUTS=""0"" CREATEDESKTOPSHORTCUTS=""1"" /l*v install.log

msiexec /i Package.msi /qn INSTALLFOLDER=""D:\Program Files\RustDesk"" CREATESTARTMENUSHORTCUTS=""N"" CREATEDESKTOPSHORTCUTS=""Y"" /l*v install.log
```

**Priority:** 
```
UI (command line) > Previous options (registry values) -> Default values
```

",closed,2024-08-04T16:10:20Z,2024-08-05T09:49:48Z,2024-08-05T09:49:48Z,,master,refact/msi_more_install_options,11,209,46,12,4,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8949
8947,"set max audio buffer to 150ms, clear audio buffer if full","The device should have the capability to play a sufficient audio buffer during each period to meet the audio config, so the playback speed is not slow.

The audio delay is caused by network jitter. The controlled  side sends audio data every 10ms, but it often happens that multiple packets are sent together. During underrun periods, the controlling side plays extra silence data instead, resulting in the device playing more audio than the configured amount.

50 ms buffer length will cause frequent clear, 150 ms is ok in test. 

Clear cause short silence rather than noise.

![70ab8e3b215a688a039275532c373bc](https://github.com/user-attachments/assets/e52db119-1a03-491c-a691-c0cdc14d97fd)
",closed,2024-08-04T05:13:39Z,2024-08-04T08:11:00Z,2024-08-04T08:11:00Z,,master,opt_audio_delay,1,29,1,1,1,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8947
8944,"fix: custom client, msi, conn type","Remove json param `--custom-client-props`, use `conn-type` instead.",closed,2024-08-03T14:19:23Z,2024-08-03T14:29:30Z,2024-08-03T14:29:30Z,,master,fix/custom_client_msi_conn_type,1,7,14,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8944
8943,Guard parameters for universal apk,"Signed-off-by: Vasyl Gello <vasek.gello@gmail.com>
",closed,2024-08-03T11:33:56Z,2024-08-04T04:34:08Z,2024-08-04T04:34:08Z,,master,vcpkg-deps,1,45,6,2,2,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8943
8942,Fix copy step for universal apk,"Signed-off-by: Vasyl Gello <vasek.gello@gmail.com>
",closed,2024-08-03T10:57:11Z,2024-08-03T11:00:27Z,2024-08-03T11:00:27Z,,master,vcpkg-deps,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8942
8941,Build universal apk,"Signed-off-by: Vasyl Gello <vasek.gello@gmail.com>
",closed,2024-08-03T10:26:09Z,2024-08-03T10:39:12Z,2024-08-03T10:39:12Z,,master,vcpkg-deps,1,150,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8941
8939,Update Cargo.toml,"原版debug会报错，无法进行
我在https://github.com/a751116023/rust-sciter.git这个fork里做了修改，现在debug不报错了",closed,2024-08-03T03:01:56Z,2024-08-03T03:23:54Z,,,master,patch-1,1,1,1,1,2,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8939
8932,Use correct locale code for Ukrainian translation file name,"Rename Ukrainian translation file ua.rs to uk.rs to avoid confusion.    
This complements commits [2333ee2](https://github.com/rustdesk/rustdesk/commit/2333ee2c07c6a67ed6c58ccfbc50a3bee203f90d) and [b6035fb](https://github.com/21pages/rustdesk/commit/b6035fbbdfffb9d6a083e8754e786a8abaa3feaf) which fix issue [8293](https://github.com/rustdesk/rustdesk/issues/8923)",closed,2024-08-02T14:54:51Z,2024-08-02T14:58:45Z,2024-08-02T14:58:45Z,,master,rename-ua-to-uk,2,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8932
8930,"fix: clipboard cm ipc data, raw bytes",,closed,2024-08-02T13:09:09Z,2024-08-02T13:36:49Z,2024-08-02T13:36:49Z,,master,fix/clipboard_cm_raw_bytes,1,2,8,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8930
8926,vcpkg deps,"- **vcpkg: bump opus to 1.5.2**
- **vcpkg: actually use cached artifacts**
- **Print all vcpkg log files on errors**
",closed,2024-08-02T09:52:04Z,2024-08-02T10:43:30Z,2024-08-02T10:43:30Z,,master,vcpkg-deps,3,96,12,3,2,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8926
8925,update supportedLocales,https://github.com/rustdesk/rustdesk/issues/8923#issuecomment-2264673115,closed,2024-08-02T06:59:20Z,2024-08-02T07:12:48Z,2024-08-02T07:12:48Z,,master,update_supportedLocales,1,22,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8925
8921,Update Ukrainian translation,,closed,2024-08-01T18:33:39Z,2024-08-02T01:31:38Z,2024-08-02T01:31:38Z,,master,ukrainian-translation,1,41,41,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8921
8918,Bump Android NDK to r27,"Signed-off-by: Vasyl Gello <vasek.gello@gmail.com>
",closed,2024-08-01T13:01:18Z,2024-08-01T13:33:59Z,2024-08-01T13:33:59Z,,master,vcpkg-deps,1,1,1,1,1,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8918
8917,fix click cm audio permission button before auth,"1. When not authenticated, clicking the audio permission button on the cm will send audio data
2. Keep the cursor position code unchanged, because `show_remote_cursor` is false before auth, so subscription will not happen.
3. Keep the clipboard code unchanged, because the keyboard permission will also be determined in `try_sub_services`. If the clipboard permission is clicked before auth and the keyboard permission is clicked after auth, the clipboard service will not be subscribed.",closed,2024-08-01T08:11:50Z,2024-08-01T10:17:02Z,2024-08-01T10:17:02Z,,master,fix_cm_audio_perm,1,6,4,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8917
8914,Fix typo in RD copy lib step,,closed,2024-08-01T06:59:29Z,2024-08-01T07:09:33Z,2024-08-01T07:09:33Z,,master,backupable-apks,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8914
8913,"refact: msi, custom client props","https://github.com/rustdesk/rustdesk-server-pro/issues/339


### Tests

No service is created.

```shell
python preprocess.py --arp -d ../../libs/portable/rustdesk --app-name test1 --custom-client-props '{""connection-type"": ""outgoing""}'
```

Service is created.

```shell
python preprocess.py --arp -d ../../libs/portable/rustdesk --app-name test1

python preprocess.py --arp -d ../../libs/portable/rustdesk --app-name test1 --custom-client-props '{""connection-type"": ""incoming""}'
```

",closed,2024-08-01T06:20:44Z,2024-08-01T07:08:52Z,2024-08-01T07:08:52Z,,master,refact/msi_custom_client_props,3,46,7,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8913
8912,fix: usage of `actions/checkout@v3`,"CI uses `actions/checkout@v3`, which uses a `deprecated` version of `Node.js`.

This pull request fixes that.",closed,2024-07-31T22:50:40Z,2024-08-01T01:12:11Z,2024-08-01T01:12:11Z,,master,fix/usage-of-actions-checkout-v3,1,35,31,2,0,1,hamirmahal,COMMENTED,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8912
8907,flutter-buid: Parameterize Android builds for easier debug release switch in mirror repos,,closed,2024-07-31T09:44:22Z,2024-07-31T12:38:01Z,2024-07-31T12:38:00Z,,master,backupable-apks,2,52,7,1,18,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8907
8905,update repo to rustdesk-org,,closed,2024-07-31T09:10:42Z,2024-07-31T09:25:11Z,2024-07-31T09:25:11Z,,master,update_repo,6,18,18,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8905
8902,Fix mouse mismatch in gnome-wayland with scale.,Fix #8524,closed,2024-07-31T06:40:09Z,2024-08-02T08:54:22Z,,,master,fix/mouse-miss-match,3,67,9,2,0,0,,,True,https://api.github.com/repos/rustdesk/rustdesk/issues/8902
8901,Update ru.rs,,closed,2024-07-31T06:06:47Z,2024-07-31T06:16:55Z,2024-07-31T06:16:55Z,,master,master,1,3,3,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8901
8890,add libatomic1 to linux armv7 sciter depends (libsciter-gtk.so was not found),"
tested with arm32v7/debian container

![image](https://github.com/user-attachments/assets/5f67bbaf-5da8-4415-a5fc-9f37b456ff27)

![image](https://github.com/user-attachments/assets/d985da28-ccac-4deb-8660-3cb7314eb35c)
",closed,2024-07-30T06:47:44Z,2024-07-30T06:52:06Z,2024-07-30T06:52:06Z,,master,armv7_dep,1,7,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8890
8889,Fix cursor lost after locking screen,"#824 
Fix cursor lost after locking screen。
I find updateCursorPosition will emit after locking screen.IsConnIn2Secs func will return false.CursorModel.gotMouseControl is false.
Simaple way is update _checkPeerControlProtected func.
Better way is not emit updateCursorPosition.",closed,2024-07-30T06:22:43Z,2024-07-31T01:53:35Z,,,master,fix_cursor_lost_after_locking_screen,1,1,3,1,6,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8889
8888,Refact: simple changes,,closed,2024-07-30T04:43:15Z,2024-07-30T05:06:38Z,2024-07-30T05:06:37Z,,master,refact/simple,1,4,4,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8888
8887,test1,tet1,closed,2024-07-29T18:27:38Z,2024-07-29T18:29:38Z,,,master,master,3,27,27,4,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8887
8886,Fix typo on ja.rs,"""Strong"" is correctly translated as ""強力"" in Japanese.
""協力"" means ""Cooperation"".",closed,2024-07-29T16:24:28Z,2024-07-29T16:27:28Z,2024-07-29T16:27:28Z,,master,master,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8886
8885,"fix: clipboard, windows, controlled side, formats","Get clipboard contents from cm though ipc on Windows ""--server"", fallback directly get clipboard formats.

![image](https://github.com/user-attachments/assets/02d62a1f-89ec-4fed-9cea-8e74e0bf7d68)

#### Note

`1024*3` is used as the threshold to send raw in ipc for now. Maybe there's a better value.

![image](https://github.com/user-attachments/assets/80926021-5780-4386-8226-65dafd7eb9d8)


### Preview


https://github.com/user-attachments/assets/6b624251-0071-4f38-997d-fb6331bed1e8


https://github.com/user-attachments/assets/249cba58-4088-4e37-9eb3-aaacc32131e2


https://github.com/user-attachments/assets/339b418a-aa41-4d9f-a145-c2adc8a85be3

https://github.com/user-attachments/assets/13464dbc-bbdb-45dd-93af-b0792e04da89




",closed,2024-07-29T15:33:34Z,2024-07-30T03:35:39Z,2024-07-30T03:35:39Z,,master,fix/clipboard_windows_controlled_side,4,216,27,4,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8885
8881,"fix: clipboard, read as much as possible","https://github.com/rustdesk-org/arboard/pull/9

Read clibpard formats, ignore errors, to read as much formats as possible.

Because sometimes reading plain text is ok, but not the other formats. (on Windows). Maybe it depend on the system settings.

",closed,2024-07-29T12:48:18Z,2024-07-29T13:19:30Z,2024-07-29T13:19:30Z,,master,fix/clipboard_read_as_much_as_possible,1,4,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8881
8879,Create devcontainer.json,"""ghcr.io/itsmechlark/features/1password:1"": {}",closed,2024-07-29T09:26:05Z,2024-07-29T10:14:57Z,,,master,patch-1,1,5,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8879
8877,Update tw.rs and cn.rs,,closed,2024-07-29T07:33:02Z,2024-07-29T07:34:26Z,2024-07-29T07:34:26Z,,master,patch-1,2,9,9,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8877
8873,"fix: clipboard, set formats and enable option","1. Fix `update_text_clipboard_required()`, because it depends on `server_keyboard_enabled`

![image](https://github.com/user-attachments/assets/7f7aaed5-c215-467d-ace1-7dc21768cf35)

2. Fix set formats on Linux. Use a global variable to hold current clipboard content. Although it is currently possible to set the pasteboard under Linux, it is not correct.

![image](https://github.com/user-attachments/assets/9107d5c2-7be1-425e-81da-cbbfb268756a)
",closed,2024-07-29T06:02:37Z,2024-07-29T07:40:03Z,2024-07-29T07:40:02Z,,master,fix/clipboard_set_formats,2,25,16,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8873
8871,"fix: clipboard, on controlled side","1. Fix win clipboard as the controlled side. By moving `clipboard` from clipboard service to cm process.
2. Win, Linux installed version are tested. MacOS installed version is not tested because my ci build cannot run.
3. `arboard` is temporarily point to https://github.com/fufesou/arboard.


https://github.com/user-attachments/assets/8b11ce24-3883-445f-9756-c45996f218a3

### Issue

The only issue is Linux as the controlled side, HTML cannot be set to the clipboard. I'll fix later.

The previous version, clipboard service, does not have this issue.",closed,2024-07-28T21:26:45Z,2024-07-29T00:09:49Z,,,master,fix/clipboard_on_controlled_side,9,201,124,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8871
8870,Update de.rs,,closed,2024-07-28T12:59:03Z,2024-07-28T13:09:37Z,2024-07-28T13:09:37Z,,master,patch-29,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8870
8868,Refact: update file clipboard doc images ,,closed,2024-07-28T10:04:59Z,2024-07-28T11:33:00Z,2024-07-28T11:33:00Z,,master,refact/update_file_clipboard_doc_images,2,0,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8868
8867,refact: update crate tfc,"Win (fr-FR) -> Win,Linux,MacOS (en-US), map mode and translate mode are tested.
Normal keys, `Shift` + Others, Dead keys (`AltGr` + Others), Accet (`AltGr` + `7` + `e`) are tested.


### NOTE

The latest commit of https://github.com/rustdesk-org/The-Fat-Controller/commits/history/rebase_upstream_20240722 is not used
, because `is_aligned()` is not stable for rust `1.75`.

![image](https://github.com/user-attachments/assets/0ab28268-b6e0-451a-9ef9-fa15a5808785)


",closed,2024-07-28T08:58:32Z,2024-07-28T09:26:18Z,2024-07-28T09:26:18Z,,master,refact/update_crate_tfc,2,4,4,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8867
8866,Update trs,,closed,2024-07-28T08:52:25Z,2024-07-28T09:13:15Z,2024-07-28T09:13:15Z,,master,update-sk-cs-rs,2,6,6,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8866
8863,Update Italian language,"@rustdesk 

Please merge. Thanks.",closed,2024-07-28T07:01:27Z,2024-07-28T09:13:02Z,2024-07-28T09:13:02Z,,master,master,1,3,3,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8863
8862,use selectableText for some errors,"![rustdesk_7B0ENROQBJ](https://github.com/user-attachments/assets/b383b11a-06ae-4a3a-a54f-d3796a4ba57e)
![rustdesk_9GAZ2cXjYd](https://github.com/user-attachments/assets/97397a76-1dc5-41cc-9719-f97b04445555)
![rustdesk_5kL77OOsFw](https://github.com/user-attachments/assets/a3f1b800-201e-4912-96c8-ea03ab9b2606)
",closed,2024-07-28T03:12:43Z,2024-07-28T03:13:19Z,2024-07-28T03:13:19Z,,master,selectablText,1,4,3,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8862
8859,Use VCPKG_FORCE_SYSTEM_BINARIES in actual RD sciter build step,"Signed-off-by: Vasyl Gello <vasek.gello@gmail.com>
",closed,2024-07-27T17:40:02Z,2024-07-28T00:44:16Z,2024-07-28T00:44:16Z,,master,vcpkg-deps,1,2,2,1,3,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8859
8857,Try to detach /opt/artifacts from sciter,"Signed-off-by: Vasyl Gello <vasek.gello@gmail.com>
",closed,2024-07-27T14:48:18Z,2024-07-27T15:57:53Z,2024-07-27T15:57:53Z,,master,vcpkg-deps,1,1,1,1,6,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8857
8855,Add built CMake to PATH in actual RD build step,"Signed-off-by: Vasyl Gello <vasek.gello@gmail.com>
",closed,2024-07-27T09:46:17Z,2024-07-27T13:28:34Z,2024-07-27T13:28:34Z,,master,vcpkg-deps,1,32,22,1,1,0,"rustdesk, basilgello, basilgello, rustdesk, basilgello","COMMENTED, COMMENTED, COMMENTED, COMMENTED, COMMENTED",False,https://api.github.com/repos/rustdesk/rustdesk/issues/8855
8852,Limit cmake buildstep to 1 threads to check OOM,"Signed-off-by: Vasyl Gello <vasek.gello@gmail.com>
",closed,2024-07-27T08:28:11Z,2024-07-27T08:29:53Z,2024-07-27T08:29:53Z,,master,vcpkg-deps,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8852
8850,Try to fix sciter-armhf build,"* Bootstrap CMake 3.29.7 for ubuntu/bionic/armhf

* vcpkg executable now needs GCC 8 but all product binaries are still OK with GCC 7

* Remove res/vcpkg/linux.cmake

This change needs https://github.com/basilgello/cmake to be transferred to https://github.com/rustdesk-org
",closed,2024-07-27T07:00:22Z,2024-07-27T07:32:27Z,2024-07-27T07:32:27Z,,master,vcpkg-deps,2,20,78,1,22,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8850
8849,remove calling refreshCurrentUser when connect status become ready,"When refreshCurrentUser throw error, show check network in ab and group tab.

When network error occurs on refreshCurrentUser.

retry:

https://github.com/user-attachments/assets/c271fed8-4560-4fd0-a3b7-72ca330109e5

logout login without normal network

https://github.com/user-attachments/assets/08ff367d-ac34-405b-b7cc-4bb3e9de96bc

logout login with normal network 

https://github.com/user-attachments/assets/26abc740-b462-4822-a512-65291571106b

change server

https://github.com/user-attachments/assets/2371b8bf-1ff4-4bb7-83a2-48e9fbd29f23

",closed,2024-07-27T04:01:28Z,2024-07-28T02:15:09Z,2024-07-28T02:15:09Z,,master,netowrk_error,30,69,13,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8849
8848,avoid call refreshCurrentUser twice at startup,"refreshCurrentUser will be called at these 2 position:

1. runMainApp or runMobileApp in main.dart
2. when connect status is ready

Both of these two happens at startup, when connect status is ready and startup time < 5 seconds, not call refreshCurrentUser",closed,2024-07-27T01:47:43Z,2024-07-27T01:50:06Z,2024-07-27T01:50:06Z,,master,avoid_refresh_twice_at_startup,2,4,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8848
8844,fix: Get button style from theme,,closed,2024-07-26T09:59:25Z,2024-07-26T23:41:54Z,,,master,change_button_style_from_theme,1,3,6,1,0,0,"rustdesk, zuiyu1998","COMMENTED, COMMENTED",False,https://api.github.com/repos/rustdesk/rustdesk/issues/8844
8842,tab border for desktop subwindow,"
![image](https://github.com/user-attachments/assets/f41ff25b-e452-4ceb-b6bb-4bbbf6446674)


![1721963844752](https://github.com/user-attachments/assets/8fdf84bd-49cc-4018-a2d1-727551cf1ffd)
",closed,2024-07-26T03:17:38Z,2024-07-26T03:20:16Z,2024-07-26T03:20:16Z,,master,remote_tab_border,3,3,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8842
8841,Pzokid2 patch 1,,closed,2024-07-26T02:08:12Z,2024-07-26T02:09:54Z,,,master,pzokid2-patch-1,1,3,1469,2,1,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8841
8839,fix: remove getRadio todo and delete  contentPadding param,,closed,2024-07-26T01:53:01Z,2024-07-26T02:31:01Z,2024-07-26T02:31:01Z,,master,fix_get_radio_todo,1,1,5,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8839
8838,Update Italian language,"@rustdesk 

Please merge. Thanks.",closed,2024-07-25T20:01:12Z,2024-07-26T02:00:18Z,2024-07-26T02:00:18Z,,master,master,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8838
8836,"refact: embed crate mouce, uinput","
https://github.com/user-attachments/assets/1910c932-f36e-4e1e-a739-482daefa0168

",closed,2024-07-25T15:45:45Z,2024-07-28T09:27:09Z,2024-07-28T09:27:09Z,,master,refact/embed_crate_mouce_uinput,3,369,29,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8836
8834,fix: keep window pos after new conn,"https://github.com/rustdesk/rustdesk/discussions/8825

1. Keep window pos.  Check current session count before restore window postion.

<img width=""595"" alt=""1721915528830"" src=""https://github.com/user-attachments/assets/7ecaa088-2efb-455d-bde0-7ffb918a1f36"">


2. Do some init in StatefulWidget constructor. If try init in its `State` class, it may be too late. Because I see the init function is called after building the widget tree sometimes.


https://github.com/user-attachments/assets/c6e411a0-aea0-44b3-b814-2e43c2af5689



```
══╡ EXCEPTION CAUGHT BY WIDGETS LIBRARY ╞═══════════════════════════════════════════════════════════
The following message was thrown building Obx(has builder, dirty, state: ObxState#1fda9):
""RxString"" not found. You need to call ""Get.put(RxString())"" or ""Get.lazyPut(()=>RxString())""

The relevant error-causing widget was:
  Obx Obx:file:///D:/Projects/rust/rustdesk/flutter/lib/desktop/pages/remote_tab_page.dart:133:54

When the exception was thrown, this was the stack:
#0      GetInstance.find (package:get/get_instance/src/get_instance.dart:306:7)
#1      Inst.find (package:get/get_instance/src/extension_instance.dart:69:45)
#2      FingerprintState.find (package:flutter_hbb/common/shared_state.dart:145:42)
#3      _ConnectionTabPageState.build.<anonymous closure>.<anonymous closure>
(package:flutter_hbb/desktop/pages/remote_tab_page.dart:159:48)
```

### Bug


https://github.com/user-attachments/assets/0e5f474b-71b4-4c4e-b50b-b0575a1445c8



### Fixed



https://github.com/user-attachments/assets/b1d80ede-3612-41c3-92e9-fc5f21f50132

",closed,2024-07-25T13:46:38Z,2024-07-25T13:52:57Z,2024-07-25T13:52:57Z,,master,fix/keep_window_pos_after_new_conn,3,14,7,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8834
8827,"fix: trackpad, reverse horizontal scroll","1. Reverse mouse wheel besides trackpad.
2. Reverse horizontal scroll. Use Windows as the controlled side is changed. Linux and MacOS works find as the controlled side.  
    Only trackpad is tested.  
    Mouse is not tested. But according to https://github.com/rustdesk/rustdesk/issues/1169 and https://github.com/rustdesk/rustdesk/pull/8806.  Mouse is also reversed.",closed,2024-07-25T03:35:04Z,2024-07-25T06:44:58Z,2024-07-25T06:44:58Z,,master,fix/reverse_horizontal_scroll_trackpad,2,2,3,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8827
8820,"fix: mobile, conn page, jump on exiting remote","The connection page jumps after exiting the remote page.

Because it also exit fullscreen at that time.


",closed,2024-07-24T16:40:08Z,2024-07-24T16:43:14Z,2024-07-24T16:43:14Z,,master,fix/mobile_conn_page_jumps_on_exit_remote,1,6,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8820
8819,"fix: mobile, server page, jumps on loading","It's a little hard to record the issue. But it's easy to reproduce, just starting and stopping the service or swithcing pages.


https://github.com/user-attachments/assets/3f555451-e63f-4221-be3c-214c7a43cb43

",closed,2024-07-24T15:44:41Z,2024-07-24T16:13:23Z,2024-07-24T16:13:23Z,,master,fix/mobile_server_page_jumps_on_loading,3,44,27,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8819
8817,refact: init values from initState to Constractor,"1. Move some initializations from `initState` to the `Constractor`
2. Unbind global varibals with `bind.`",closed,2024-07-24T15:11:01Z,2024-07-25T02:45:51Z,2024-07-25T02:45:51Z,,master,refact/flutter_init_values,24,120,174,4,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8817
8815,"fix: video service, do not skip refresh message","Revert `video_service`, remove `LAST_REFRESH_TIME`. Do not skip refresh message.

The code is not the same as commit `c04f460bbdd3a4d9deb2200d82ac1bcbc3d4c101`

https://github.com/dignow/rustdesk/blob/c04f460bbdd3a4d9deb2200d82ac1bcbc3d4c101/src/server/video_service.rs

",closed,2024-07-24T13:57:20Z,2024-07-24T13:59:25Z,2024-07-24T13:59:25Z,,master,fix/video_service_do_not_skip_refresh_message,2,9,21,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8815
8814,refact: refresh on capture displays,"1. Refresh on capture changes on the control side. Message `CaptureDisplay`. And remove unnecessary refresh messages.
![image](https://github.com/user-attachments/assets/81a755bc-aeb7-4524-adce-ccae05274109)
2. Remove bad design of checking and skipping refresh event in a short time. `LAST_REFRESH_TIME`


### Note

![image](https://github.com/user-attachments/assets/35590f4a-9740-4f41-8a09-a7017db7369c)

The code is moved to the beginning of the loop, and the bail condition is removed.

![image](https://github.com/user-attachments/assets/ff347a69-226a-4d6a-be8f-7e07e8a9d68e)


### Preview

https://github.com/user-attachments/assets/9b1ee543-0ecd-4b5b-b081-970594e8252e


https://github.com/user-attachments/assets/3789bd90-6980-4571-8ab0-ebf2d995354a


https://github.com/user-attachments/assets/ae0d21db-a22b-4d56-8b74-4ee21a44b7f3

",closed,2024-07-24T13:23:12Z,2024-07-24T13:41:40Z,,,master,refact/refresh_on_capture_displays,4,23,54,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8814
8813,"fix: video service, last refresh time","Last refresh time is used to control any refresh reason for one display.


The only problem is:
1. There're multiple connections to one display.
2. A refresh.
3. B switch display or refresh, in 300ms.

The image in B's remote page will not refresh immediately.


Maybe it's better not skipping the refresh message.",closed,2024-07-24T11:13:17Z,2024-07-24T11:23:20Z,,,master,fix/video_service_last_refresh_time,1,8,4,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8813
8812,fix: video service,"1. Unset refresh flag if just refreshed.
2. Reduce the scope of the lock.",closed,2024-07-24T10:08:42Z,2024-07-24T10:41:52Z,2024-07-24T10:41:52Z,,master,fix/video_service_unset_refresh_if_just_refreshed,2,10,4,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8812
8810,"fix: siwtching display, clear last old image","### Bug

Uncheck option ""Use texture rendering"".

https://github.com/user-attachments/assets/9c4139df-dace-4841-87e0-8cdc806ad459



### Fixed



https://github.com/user-attachments/assets/b6569444-0101-461d-ab69-c0ae3910c486



### Changes

1. Clear last old image.
2. Try refresh after switching display.
3. Add an interval check before refresh video service.",closed,2024-07-24T09:28:36Z,2024-07-24T09:35:07Z,2024-07-24T09:35:07Z,,master,fix/switching_display_clear_old_image,4,40,3,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8810
8809,fix more bool options,"* fix more bool options
* hide sort ab tags because it's already sorted",closed,2024-07-24T09:15:29Z,2024-07-24T09:20:58Z,2024-07-24T09:20:58Z,,master,fix_more_option_judge,8,29,23,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8809
8807,fix: flutter remove setState in initState,"Flutter, remove setState() (include obx set value) in initState().

Or it may cause error like https://github.com/rustdesk/rustdesk/pull/8796 (Point 3).

**Note**:
1. No idea only the code in https://github.com/rustdesk/rustdesk/pull/8796 (Point 3)  `mobile` raise the error.
2. Maybe a better way for obx value is to set the value without adding the `GetStream`. But I cannot find the api.
",closed,2024-07-24T05:45:53Z,2024-07-24T06:00:49Z,2024-07-24T06:00:49Z,,master,fix/remove_setState_in_initState,12,69,31,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8807
8806,Fix wheel drection revesed,"#1169 fix  wheel drection revesed.
Windows pc is test.",closed,2024-07-24T04:55:41Z,2024-07-24T06:51:15Z,,,master,fix_wheel_direction_reversed,1,4,4,1,2,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8806
8805,fix: flutter remove setState in initState,"Flutter, remove `setState()` (include Obx set value) in `initState()`.

Or it may cause error like https://github.com/rustdesk/rustdesk/pull/8796 (Point 3).",closed,2024-07-24T03:52:02Z,2024-07-24T04:06:03Z,,,master,fix/remove_setState_in_initState,9,53,24,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8805
8804,Remove existing /opt/artifacts/vcpkg in sciter builds,"Signed-off-by: Vasyl Gello <vasek.gello@gmail.com>
",closed,2024-07-24T03:19:44Z,2024-07-24T03:23:49Z,2024-07-24T03:23:49Z,,master,vcpkg-deps,1,1,0,1,5,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8804
8803,Fix arm32 sciter build,"Signed-off-by: Vasyl Gello <vasek.gello@gmail.com>
",closed,2024-07-24T02:11:12Z,2024-07-24T02:16:25Z,2024-07-24T02:16:25Z,,master,vcpkg-deps,1,11,28,1,2,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8803
8801,Update de.rs,,closed,2024-07-23T21:39:48Z,2024-07-24T01:41:25Z,2024-07-24T01:41:25Z,,master,patch-28,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8801
8800,Update Italian language,"@rustdesk 

Please merge. Thanks.",closed,2024-07-23T19:27:31Z,2024-07-24T01:41:43Z,2024-07-24T01:41:43Z,,master,master,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8800
8796,"fix: mobile, query onlines, on active","1. Add `WidgetsBindingObserver` to detect if RustDesk is active, for querying online.
2. Always set last query peers in `_queryOnlines()` to avoid wrong check of `setEquals(_curPeers, _lastQueryPeers)` (`true`).
![image](https://github.com/user-attachments/assets/76e49d52-526b-4ed5-bba7-096fc3241b34)
3. Avoid error 
![image](https://github.com/user-attachments/assets/d8505f02-ebee-4ce6-acfb-63dfa001af5b)

```
the framework builds parent widgets before children, which means a dirty descendant will always be
built. Otherwise, the framework might not visit this widget during this build phase.
The widget on which setState() or markNeedsBuild() was called was:
  ObxValue<RxList<dynamic>>
The widget which was currently being built when the offending call was made was:
  Container

The relevant error-causing widget was:
  Container
  Container:file:///home/ubuntu/workspace/rust/rustdesk/flutter/lib/common/widgets/peer_tab_page.dart:117:18

When the exception was thrown, this was the stack:
#0      Element.markNeedsBuild.<anonymous closure> (package:flutter/src/widgets/framework.dart:5042:9)
#1      Element.markNeedsBuild (package:flutter/src/widgets/framework.dart:5054:6)
#2      State.setState (package:flutter/src/widgets/framework.dart:1223:15)
#3      ObxState._updateTree (package:get/get_state_manager/src/rx_flutter/rx_obx_widget.dart:43:7)
#4      GetStream._notifyData (package:get/get_rx/src/rx_stream/get_stream.dart:47:21)
#5      GetStream.add (package:get/get_rx/src/rx_stream/get_stream.dart:97:5)
#6      NotifyManager.addListener.<anonymous closure> (package:get/get_rx/src/rx_types/rx_core/rx_impl.dart:158:40)
#7      GetStream._notifyData (package:get/get_rx/src/rx_stream/get_stream.dart:47:21)
#8      GetStream.add (package:get/get_rx/src/rx_stream/get_stream.dart:97:5)
#9      RxObjectMixin.value= (package:get/get_rx/src/rx_types/rx_core/rx_impl.dart:105:13)
#10     _PeerSortDropdownState.initState (package:flutter_hbb/common/widgets/peer_tab_page.dart:877:22)
```",closed,2024-07-23T13:51:42Z,2024-07-23T15:28:03Z,2024-07-23T15:28:03Z,,master,fix/mobile_query_onlines,3,35,14,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8796
8795,fix hide ab tag when custom client startup,"https://github.com/rustdesk/rustdesk/discussions/8794

not custom: 'Y', ''
custom: 'Y', 'N'
should not use isNotEmpty",closed,2024-07-23T13:14:59Z,2024-07-23T13:35:05Z,2024-07-23T13:35:05Z,,master,fix_hide_ab_tag,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8795
8792,fix nextRgba not called when switching to texture render,"Because rgba buffer render doesn't support multi display, when switch to multi display, it is possible that `rgba.valid` has been set to valid but `nextRgab` is not called, when switching back to single display, `rgba.valid` is still true.


`nextRgba` not called when switching to texture render.
![0b909f43d1e2a2782e72af066600d6a](https://github.com/user-attachments/assets/23f081c1-a10d-48ae-89ee-94d665e091b0)



It happens at the end of the video.

https://github.com/user-attachments/assets/9a6c605f-6a30-45c9-94ac-66dff91fc133

",closed,2024-07-23T09:48:23Z,2024-07-24T04:06:17Z,2024-07-24T04:06:17Z,,master,fix_rgba_valid,3,21,23,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8792
8784,"Update ja.rs and Add ""About Rustdesk""","The reason for adding ""About Rustdesk"" is that the order of ""About"" and ""RustDesk"" changes in some languages.
",closed,2024-07-23T00:47:51Z,2024-07-23T00:58:48Z,2024-07-23T00:58:48Z,,master,master,30,663,636,3,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8784
8782,"refact: msi, revision version",https://github.com/rustdesk/rustdesk-server-pro/issues/314,closed,2024-07-22T14:15:39Z,2024-07-22T15:37:25Z,2024-07-22T15:37:25Z,,master,refact/msi_revision_version,1,10,0,4,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8782
8779,remove end slash when setting server config,"https://github.com/rustdesk/rustdesk-server-pro/issues/299

https://github.com/user-attachments/assets/7470488d-7603-449d-bfe7-8147e2c8e9c5

",closed,2024-07-22T09:09:47Z,2024-07-22T09:11:32Z,2024-07-22T09:11:32Z,,master,server_config_end_slash,1,10,3,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8779
8778,fix custom client show ip whiltelist warning,"https://rustdesk.com/docs/en/self-host/client-configuration/advanced-settings/#whitelist

If whiltelist is not set, whiltlist is still `""""`, 

https://github.com/user-attachments/assets/60e481c7-cc72-4a6d-899f-bca9e807e11a

",closed,2024-07-22T07:59:35Z,2024-07-22T09:00:29Z,2024-07-22T09:00:29Z,,master,fix_whitelist,3,10,10,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8778
8777,Update ca.rs - Added new translations into Catalan and a few corrections,Added new translations into Catalan and a few corrections,closed,2024-07-21T20:19:58Z,2024-07-22T01:58:04Z,2024-07-22T01:58:04Z,,master,master,1,198,198,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8777
8776, Update ca.rs - Added several new translations and corrected the word for tags,Added several new translations for catalan and corrected the word for tags,closed,2024-07-21T19:03:34Z,2024-07-21T19:16:23Z,,,master,master,0,0,0,0,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8776
8774,fix: nixos's headless mode.,"Headless Mode runs well except the cli command `--password` and so on.

It detects if the software was installed in /usr

However nixos move all file to /nix/store. Let's support it as well.",closed,2024-07-21T09:01:40Z,2024-07-21T09:05:32Z,2024-07-21T09:05:32Z,,master,master,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8774
8772,fix: move some crates to rustdesk-org,,closed,2024-07-20T15:11:42Z,2024-07-20T15:49:40Z,2024-07-20T15:49:40Z,,master,fix/use_remove_crates_of_fufesou,12,27,35,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8772
8764,vcpkg deps,,closed,2024-07-19T19:22:28Z,2024-07-23T15:31:36Z,2024-07-23T15:31:36Z,,master,vcpkg-deps,29,1859,24,7,30,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8764
8759,buildin options and add to mobile,Tested each option on mobile and desktop.,closed,2024-07-19T09:35:03Z,2024-07-19T15:55:52Z,2024-07-19T15:55:52Z,,master,buildin_options,14,114,38,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8759
8758,Update ja.rs,,closed,2024-07-19T05:36:29Z,2024-07-19T15:56:39Z,2024-07-19T15:56:39Z,,master,master,2,634,633,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8758
8757,"fix: keyboard, linux, repeated keys, #6793","Try fix https://github.com/rustdesk/rustdesk/issues/6793

## Desc

### Long press key events

windows, macos: `down, down, down ... up`
linux: `down, up, down, up ...`


### Key simulation

windows, macos: `down, sleep 3 seconds, up` -> `one key`
linux: `down, sleep 3 seconds, up` -> `repeated keys`

### Fix

Send key events `down+up` when sending non-modifier keys, controlled side `Linux`.

```rust
            if _peer == OS_LOWER_LINUX {
                ....
            }
```

## Preview

https://github.com/user-attachments/assets/6dbebb70-215d-49db-b536-412b61e4068a

![image](https://github.com/user-attachments/assets/4095794c-38d5-4326-bec3-6502d41b96cf)

![1721361045209](https://github.com/user-attachments/assets/318d01c2-0142-4944-9c10-9dca014a7ab2)

## More

This commit will cause additional `release/up` events when releasing the keys.
We can do more checks to avoid these additional messages. But it's not necessary.

",closed,2024-07-19T03:53:38Z,2024-07-19T16:42:49Z,2024-07-19T16:42:49Z,,master,fix/6793_keyboard_linux_repeated_keys,2,34,14,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8757
8753,"fix: windows, headless, not work after exiting RDP","Just comment the following code.

```rust
    if displays.is_empty() && crate::platform::desktop_changed() {
        return Ok(displays);
    }
```

### Reproduce

The remote side should be headless, RustDesk installed.

1. RDP connect and disconnect.
2. Connect through RustDesk.
3. Error with ""No displays"".

It cannot be reproduced everytime. But the `crate::platform::desktop_changed()` is true when the above error occurs.
",closed,2024-07-18T13:29:06Z,2024-07-18T14:23:46Z,2024-07-18T14:23:46Z,,master,fix/windows_headless_when_no_windows_session,1,17,4,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8753
8752,fix custom client settings tab visibility,"only control with tabKeys

https://github.com/user-attachments/assets/c63230a7-721f-43e5-af95-cd7044b4c839


https://github.com/user-attachments/assets/a2b6c0c4-8454-4b9c-8cc1-63da230a901e

",closed,2024-07-18T12:08:19Z,2024-07-18T14:27:32Z,2024-07-18T14:27:32Z,,master,fix_settings_tab_visibility,2,33,18,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8752
8751,Revert vcpkg ffmpeg,https://github.com/21pages/rustdesk/actions/runs/9990633075/job/27611806595,closed,2024-07-18T11:58:44Z,2024-07-18T14:28:36Z,2024-07-18T14:28:36Z,,master,revert_vcpkg_ffmpeg,20,15,1577,9,7,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8751
8750,fix missing retry,"https://github.com/rustdesk/rustdesk/discussions/8748#discussioncomment-10081038


Introduced by https://github.com/rustdesk/rustdesk/commit/c268a0ab145fabff8c08ab3a2736b54cfd730a7d, that commit replaced the manual retry button to auto reconnect retry button.

Manual retry button
![cd03a08f190abc1400323312579b218](https://github.com/user-attachments/assets/8050f524-6b98-436a-9589-b973d25193ce)


![7ceedaa3338f8f7f4597a6fe93b6e8a](https://github.com/user-attachments/assets/502f14df-8435-4d2f-838e-7762048c9a42)

Auto reconnect button



https://github.com/user-attachments/assets/23c799b3-139d-40ad-835c-b689c0cc6e30







",closed,2024-07-18T09:10:45Z,2024-07-18T09:16:25Z,2024-07-18T09:16:25Z,,master,fix_missing_retry,1,25,13,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8750
8749,"fix: desktop settings, disconnect, timeout","https://github.com/rustdesk/rustdesk/discussions/8748#discussioncomment-10080822




https://github.com/user-attachments/assets/b5145b6f-58fa-44ea-a311-429585298be8

",closed,2024-07-18T07:49:28Z,2024-07-18T07:57:36Z,2024-07-18T07:57:36Z,,master,fix/desktop_settings_disconnect_timeout,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8749
8747,"fix linux ffmpeg link, still link ffmpeg in hwcodec","Current nightly `rustdesk-1.2.7-x86_64.deb` is only 18.5M, ffmpeg is not linked.",closed,2024-07-18T05:10:35Z,2024-07-18T05:18:21Z,2024-07-18T05:18:21Z,,master,link,2,6,3,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8747
8746,"fix: macos, remove unused workaround",,closed,2024-07-18T02:26:23Z,2024-07-18T02:38:15Z,2024-07-18T02:38:15Z,,master,fix/macos_remove_unused_workaround,2,2,12,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8746
8744,"fix linux armv7 ffmpeg arch, linux x64 sciter add hwcodec feature",https://github.com/21pages/rustdesk/actions/runs/9975956169/job/27566979411,closed,2024-07-17T13:58:42Z,2024-07-17T14:37:05Z,2024-07-17T14:37:05Z,,master,armv7_ffmpeg,4,14,8,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8744
8742,enable hwcodec feature for linux sciter,,closed,2024-07-17T13:00:28Z,2024-07-17T13:05:38Z,,,master,hwcodec,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8742
8738,"fix: macos subwindow frozen, try another workaround",,closed,2024-07-17T10:55:12Z,2024-07-17T11:13:03Z,2024-07-17T11:13:03Z,,master,fix/remove_useless_workaround,3,9,8,1,2,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8738
8737,Update README-JP.md and ja.rs,,closed,2024-07-17T10:04:24Z,2024-07-17T11:11:04Z,2024-07-17T11:11:04Z,,master,master,2,218,199,4,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8737
8735, arm linux remove cuda-llvm option,https://github.com/21pages/rustdesk/actions/runs/9971204064/job/27551770243,closed,2024-07-17T08:23:54Z,2024-07-17T09:19:21Z,2024-07-17T09:19:21Z,,master,arm_linux_remove_nvcodec,2,6,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8735
8733,"feat: clipboard, multi formats","Support multi clipboard formats.

Update crates `arboard` and `clipboard-master`.

## Changes

1. Bump to `1.3.0`, to distinguish the nightly(`1.2.7`) . Since clipboard use the RustDesk version to decide message to send.
2. Support `text`, `rtf`, `html`, `png`, `svg` .
3. Refact clipboard service, from `repeat()` to `run()`.
4. Send clipboard data array when `1.3.0` -> `1.3.0`.  
  Send text clipboard data when `1.3.0` -> `1.2.6`.  
  Send text clibpoard if the peer side is mobile.  

    So I introduced a new filed `my_platform`  in `LoginRequest` to check if peer is mobile.

5. Use a special format `dyn.com.rustdesk.owner` to indicate current clipboard data is set by RustDesk.  

    **Note**: The special format **must not** be used by other applications. Or we cannot check if the data is set by RustDesk. Or RustDesk may skip the clipboard data when checking if should send.
 
6. Remove **`OLD_CLIPBOARD_DATA`**.   Fix https://github.com/rustdesk/rustdesk/issues/7321
   We can send the clipboard data everytime when the clipboard is updated.
   We need to check the `dyn.com.rustdesk.owner` format to know if current clipboard data should be ignored.

7. There're many deletions in `Cargo.lock` because `resvg` is removed in `arboard`. 
8. Clipboard only sync contents from the control side to the controlled side, like mstsc.


## Preview


https://github.com/user-attachments/assets/84b032f8-ca9b-41b4-9568-e16b6bd15362


## Tests

| no | control side | controlled side | result    |
|:------:|:------:|:------:|:------:|
|   1   |   Windows   |   MacOS   |  ✅  |
|   2   |   Windows   |   Linux X11   | ✅   |
|   3   |   Windows   |   Linux Wayland   |  ✅  |
|   4   |   MacOS   |   Windows   |  ✅  |
|   5   |   MacOS   |   Linux X11   |  ✅  |
|   6   |   MacOS   |   Linux  Wayland  |  ✅  |
|   7   |   Linux X11   |   Windows   |  ✅  |
|   8   |   Linux X11  |   MacOS   |  ✅  |
|   9   |   Linux Wayland   |   Windows   |  ✅  |
|   10   |   Linux Wayland  |   MacOS   |  ✅  |
|   11  |   Windows   |   Android   |  ✅  |
|   12   |   Android   |   Windows   |  ✅  |
|   13   |   1.3.0   |   1.2.6   |  ✅  |
|   14   |   1.2.6   |   1.3.0   |  ✅  |

Initial clipboard synchronization between 1.3.0 and 1.2.6 is not stable.
",closed,2024-07-17T07:25:28Z,2024-07-28T09:26:54Z,2024-07-28T09:26:54Z,,master,feat/clipboard_multi_formats,20,617,648,1,2,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8733
8732,"Revert ""try fix arm64 linux ci and publish error log (#8730)""","setup a selfhost and will fix it later

https://github.com/21pages/rustdesk/actions/runs/9968443060/job/27543799625

This reverts commit a4565bf0da99b21d8ba3e38cad5e75118b79921d.",closed,2024-07-17T05:08:42Z,2024-07-17T05:35:32Z,2024-07-17T05:35:32Z,,master,ffmpeg_arm64_linux,1,0,28,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8732
8731,"fix: macos, load multi dylib instances","Multiple dylib instances will cause some global instances to be invalid.

eg. lazy_static objects in rust side, will be created more than once.



https://github.com/user-attachments/assets/800258ea-de61-42f4-ace8-b16b5fad68b7

",closed,2024-07-17T03:42:45Z,2024-07-17T03:49:11Z,2024-07-17T03:49:11Z,,master,fix/macos_multi_dylib_instance,1,7,3,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8731
8730,try fix arm64 linux ci and publish error log,"FFmepg can be built on arm64 ubuntu vm, possible reason is that the condition of nvcodec can't be satisfied. 
If this pr doesn't work, nvcodec can be removed on arm linux.
Please rerun nightly build and remove published error log when ci is ok.",closed,2024-07-17T03:37:52Z,2024-07-17T03:40:50Z,2024-07-17T03:40:50Z,,master,try_fix_arm_ci,1,28,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8730
8729,"fix: try workaround, macos, subwindow, frozen","Simulate `hide&show` events on creating new window with a delay. Not sure if `300ms` is a good choice.

### Maybe another workaround

Add ci for macos

```yaml
      - name: Workaround for flutter issue
        shell: bash
        run: |
          cd ""$(dirname ""$(which flutter)"")""
          # https://github.com/flutter/flutter/issues/133533
          sed -i -e 's/_setFramesEnabledState(false);/\/\/_setFramesEnabledState(false);/g' ../packages/flutter/lib/src/scheduler/binding.dart
          grep -n '_setFramesEnabledState(false);' ../packages/flutter/lib/src/scheduler/binding.dart
```

It may consume a little more CPU when hide the window.
",closed,2024-07-17T01:40:49Z,2024-07-17T01:55:46Z,2024-07-17T01:55:46Z,,master,fix/try_workaround_macos_window_frozen,3,16,3,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8729
8726,F-Droid: enable hwcodec for future builds,"Signed-off-by: Vasyl Gello <vasek.gello@gmail.com>
",closed,2024-07-16T08:31:44Z,2024-07-16T08:35:10Z,2024-07-16T08:35:10Z,,master,fdroid-buildscript,1,2,4,1,2,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8726
8725,remove unused vcpkg ffmpeg code,,closed,2024-07-16T07:44:56Z,2024-07-16T07:46:20Z,2024-07-16T07:46:20Z,,master,vcpkg,5,12,195,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8725
8724,install ffmpeg lib with vcpkg,"* Use vcpkg to install ffmpeg and build sdk from source, so no prebuild lib in hwcodec.
* Link ffmpeg in rustdesk directly, ffmpeg can be used as basic library.
* For windows developers, `VCPKG_DEFAULT_HOST_TRIPLET` env need to be set to `x64-windows-static` during installation.
* Most code in `res/vcpkg/ffmpeg` is from https://github.com/microsoft/vcpkg/tree/2024.06.15/ports/ffmpeg
* Tested windows/mac/linux/android, still work",closed,2024-07-16T05:15:13Z,2024-07-16T07:10:24Z,2024-07-16T07:10:24Z,,master,vcpkg,21,1743,9,1,9,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8724
8717,"mobile virtual display, resolution menu, proxy setting","1. Merge code of mobile and desktop virtual display menu.
2. Mobile add seperate resolution menu, only support the simplest changing resolutions.
3. Android add proxy setting

https://github.com/user-attachments/assets/4231f89e-6ce2-455a-80fb-6b8dc45bf611

https://github.com/user-attachments/assets/83fecca6-c594-4c83-b3e7-a5600c74a8cb

",closed,2024-07-15T09:34:20Z,2024-07-15T10:53:14Z,2024-07-15T10:53:14Z,,master,more_mobile_menu,7,297,217,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8717
8715,fix lan peers batch deletion,"This only happens in lan peers. `peers.map((p) async {})` is not sync and peers are loaded before deletion.

```
let mut peers = config::LanPeers::load().peers;
peers.retain(|x| x.id != id);
```

https://github.com/user-attachments/assets/ec4d84fd-57e8-4555-b26e-540816e2159b


https://github.com/user-attachments/assets/8af5255c-3a16-405f-9304-be4691d8d63b

",closed,2024-07-15T01:21:07Z,2024-07-15T02:47:19Z,2024-07-15T02:47:19Z,,master,fix,1,4,4,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8715
8714,remove Instant sub,"This fixes a --server crash when connecting to Windows that has just booted and has no monitor.

Tested lan discovery, still work.

![063159e7a1e80d22daa3e98499e721c](https://github.com/user-attachments/assets/d2e3e698-ebe2-4482-a5e6-de88e9d3f610)
",closed,2024-07-14T23:51:18Z,2024-07-15T02:49:09Z,2024-07-15T02:49:09Z,,master,sub_duration,3,18,10,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8714
8712,"refact: macos, hide&show on leaving view","
Try workaround https://github.com/rustdesk/rustdesk/issues/8548

No side effects are found.

https://github.com/user-attachments/assets/ae2fb31b-c220-4000-89a6-a56e2ceb58d3

",closed,2024-07-14T16:03:44Z,2024-07-15T02:50:54Z,2024-07-15T02:50:54Z,,master,refact/macos_hide_show_on_leaving_view,2,5,1,1,19,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8712
8709,fix: build ios,,closed,2024-07-14T06:31:55Z,2024-07-14T07:05:57Z,2024-07-14T07:05:57Z,,master,fix/build_ios,3,16,13,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8709
8708,feat: clipboard multi formats,"Support multi clipboard formats.

Update crates `arboard` and `clipboard-master`.

## Changes

1. Support `text`, `rtf`, `html`, `png`, `svg` .
2. Refact clipboard service, from `repeat()` to `run()`.
3. Send clipboard data array when `1.3.0` -> `1.3.0`.  
  Send text clipboard data when `1.3.0` -> `1.2.6`.  
  Send text clibpoard if the peer side is mobile.  

    So I introduced a new filed `my_platform`  in `LoginRequest` to check if peer is mobile.

4. Use a special format `dyn.com.rustdesk.owner` to indicate current clipboard data is set by RustDesk.  

    **Note**: The special format **must not** be used by other applications. Or we cannot check if the data is set by RustDesk. Or RustDesk may skip the clipboard data when checking if should send.
 
5. Remove **`OLD_CLIPBOARD_DATA`**.   Fix https://github.com/rustdesk/rustdesk/issues/7321
   We can send the clipboard data everytime when the clipboard is updated.
   We need to check the `dyn.com.rustdesk.owner` format to know if current clipboard data should be ignored.

6. There're many deletions in `Cargo.lock` because `resvg` is removed in `arboard`. 
7. Clipboard only sync contents from the control side to the controlled side, like mstsc.


## Preview


https://github.com/user-attachments/assets/84b032f8-ca9b-41b4-9568-e16b6bd15362


## Tests

| no | control side | controlled side | result    |
|:------:|:------:|:------:|:------:|
|   1   |   Windows   |   MacOS   |  ✅  |
|   2   |   Windows   |   Linux X11   | ✅   |
|   3   |   Windows   |   Linux Wayland   |  ✅  |
|   4   |   MacOS   |   Windows   |  ✅  |
|   5   |   MacOS   |   Linux X11   |  ✅  |
|   6   |   MacOS   |   Linux  Wayland  |  ✅  |
|   7   |   Linux X11   |   Windows   |  ✅  |
|   8   |   Linux X11  |   MacOS   |  ✅  |
|   9   |   Linux Wayland   |   Windows   |  ✅  |
|   10   |   Linux Wayland  |   MacOS   |  ✅  |
|   11  |   Windows   |   Android   |  ✅  |
|   12   |   Android   |   Windows   |  ✅  |
|   13   |   1.3.0   |   1.2.6   |  ✅  |
|   14   |   1.2.6   |   1.3.0   |  ✅  |

Initial clipboard synchronization between 1.3.0 and 1.2.6 is not stable.




",closed,2024-07-14T06:13:24Z,2024-07-14T15:21:04Z,,,master,feat/clipboard_multi_formats,20,620,649,5,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8708
8707,mobile view mode menu,"https://github.com/rustdesk/rustdesk/discussions/8689 

* Add view mode menu to mobile, disable the same menus as desktop
* Display forbidden cursor when not in view mode && no keyboard permission && not display remote cursor
* Hide keyboard/mouse bottom buttons when keyboard is disabled
* Fixe not listen keyboard permission change in some widgets
* Changing resolution and http proxy settings are missing for mobile devices, will be added if needed.

https://github.com/user-attachments/assets/2de11649-3b6e-487a-8e9d-fb79ff1b477c

",closed,2024-07-14T02:44:47Z,2024-07-14T07:04:36Z,2024-07-14T07:04:35Z,,master,mobile_view_mode,4,91,37,1,2,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8707
8705,fix: mouse forward back,"Fix forward and back buttons on Windows.

https://github.com/rustdesk/rustdesk/issues/1169


https://github.com/user-attachments/assets/256e2db0-ed60-49b1-8c40-8c97d7b7a22c




## TODOs

1. Add support on Wayland (uinput) . Need to add support in Crate `mouce` first.",closed,2024-07-13T16:24:05Z,2024-07-13T19:49:16Z,2024-07-13T19:49:16Z,,master,fix/mouse_forward_back,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8705
8703,refact: seperate audio device for voice call,"Do not use ""audio-input"" for voice call.

## Desc

Add new audio input variable in audio service.
This variable takes effect only during voice call, it has higher priority of the ""audio-input"" option.

This variable is not an option, because it may be better to always use the default input as the voice call initial input.

```rust
lazy_static::lazy_static! {
    static ref VOICE_CALL_INPUT_DEVICE: Arc::<Mutex::<Option<String>>> = Default::default();
}
```

### Set

This variable is set when starting a voice call or set the input device on voice call menu.

```rust
fn set_voice_call_input_device()
```

### Get

This variable is got to show curren input device when showing the voice call selecting menu.

```rust
pub fn get_voice_call_input_device(is_cm: bool) -> String {
    if is_cm {
        match crate::ipc::get_config(""voice-call-input"") {
            Ok(Some(device)) => device,
            _ => """".to_owned(),
        }
    } else {
        crate::audio_service::get_voice_call_input_device().unwrap_or_default()
    }
}
```

### Reset

This variable is reset when ending voice call or connection.

```rust
crate::audio_service::set_voice_call_input_device(None, true);
```

## Preview

No much preview, because it's audio.

https://github.com/user-attachments/assets/9727d90d-7c64-4af8-b2e0-0d1730e7051f

",closed,2024-07-13T13:13:11Z,2024-07-13T20:07:02Z,2024-07-13T20:07:02Z,,master,refact/seperate_audio_device_for_voice_call,9,162,74,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8703
8701,F-Droid buildscript: fix review points,"- **build_fdroid: Move sudo-deps back to f-droid spec**
- **build_fdroid.sh: Fix review points by Licaon_Kter**
",closed,2024-07-13T08:52:49Z,2024-07-13T12:46:05Z,2024-07-13T12:46:05Z,,master,fdroid-buildscript,1,80,31,1,1,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8701
8700,"fix: restore audio input device, after voice call","

https://github.com/user-attachments/assets/98780e9b-aa57-4b7d-8137-eee9144d1dcf



https://github.com/user-attachments/assets/b9fb6d90-eb5f-4139-894b-e16f9dee5dcd

",closed,2024-07-13T06:55:41Z,2024-07-13T07:00:13Z,,,master,fix/restore_audio_input_device_after_voice_chat,2,30,8,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8700
8693,refact: unwrap offstage for cursor paint,"Remove `Offstage` wrap for cusor paint.

Cusor paint consums some calculations. Use Simple `Offstage()` may save some calculations.
",closed,2024-07-12T16:34:20Z,2024-07-12T16:44:08Z,2024-07-12T16:44:08Z,,master,refact/unwrap_offstage_for_cursor_paint,2,7,7,1,1,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8693
8692,Update flutter-build.yml,,closed,2024-07-12T15:26:35Z,2024-07-12T15:28:35Z,,,master,patch-1,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8692
8690,fix: unable to close on fullscreen,"https://github.com/rustdesk/rustdesk/issues/8688


## Desc

The bug is introduced here.

![image](https://github.com/user-attachments/assets/97c4f527-d20e-427e-b06d-578cb8688752)


Because `WindowActionPanel` handles window events.

https://github.com/rustdesk/rustdesk/blob/1d59a7fe5fe8acb8f13ffe02eedc291625c60eea/flutter/lib/desktop/widgets/tabbar_widget.dart#L469


https://github.com/rustdesk/rustdesk/blob/1d59a7fe5fe8acb8f13ffe02eedc291625c60eea/flutter/lib/desktop/widgets/tabbar_widget.dart#L622

With the changes above, `WindowActionPanel` is not built when `stateGlobal.showTabBar` is false.

It not a good idea to bind the window events with `WindowActionPanel`.

So I just move `MultiWindowListener` and `WindowListener` from  `WindowActionPanel` to `DesktopTab `.

```flutter
class _DesktopTabState extends State<DesktopTab>
    with MultiWindowListener, WindowListener {
}
```",closed,2024-07-12T13:54:47Z,2024-07-12T14:04:11Z,2024-07-12T14:04:11Z,,master,fix/unable_to_close_on_fullscreen,1,221,178,1,1,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8690
8683,videotoolbox ram codec,"* h265 encoding: the second frame always fails, use repeat encoding to achieve real-time encoding
* h264 encoding: Not supported because encoding fails too frequently, about 50%, with one failure followed by another success.
* h264/h265 decoding: No issues found.
* Does not support dynamically changing the bitrate and changing the quality by resetting the encoder.
* Checking hardware codec is same as Windows

1 fps video test, real time encode

https://github.com/user-attachments/assets/74d5a744-c77f-4da5-ad62-a642d12b193b

1 fps video test, real time decode

https://github.com/user-attachments/assets/1c412e07-4fe2-4baa-9f97-1b010f24c3eb

 changing the quality by resetting the encoder

https://github.com/user-attachments/assets/5370c40e-de6e-4047-9c9f-e755b9afc509




",closed,2024-07-12T03:04:44Z,2024-07-12T03:08:51Z,2024-07-12T03:08:51Z,,master,vt,6,22,21,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8683
8680,"fix: ubuntu 18.04, service, Exec format error","Try fix `rustdesk.service` on Ubuntu 18.04 or some other OSs.


https://github.com/rustdesk/rustdesk-server-pro/issues/298#issuecomment-2222910431",closed,2024-07-11T14:27:01Z,2024-07-11T15:13:41Z,2024-07-11T15:13:41Z,,master,fix/ubuntu18.04_service_exec_format_error,1,6,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8680
8677,"feat: android, controlled side, clipboard text","Suppport clipboard text update when using Android as the controlled side.


https://github.com/rustdesk/rustdesk/assets/13586388/70e8c2f4-77a9-4b73-a3a6-708192625532

",closed,2024-07-11T03:57:44Z,2024-07-11T04:02:19Z,2024-07-11T04:02:19Z,,master,feat/android_controlled_side_clipboard_text,1,20,4,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8677
8674,"feat: android, controlled side, clipboard text","Suppport clipboard text update when using Android as the controlled side.


https://github.com/rustdesk/rustdesk/assets/13586388/70e8c2f4-77a9-4b73-a3a6-708192625532

",closed,2024-07-10T16:39:40Z,2024-07-11T03:26:34Z,,,master,feat/android_controlled_side_clipboard_text,1,20,4,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8674
8673,"Revert ""feat: clipboard, multi format""",Reverts rustdesk/rustdesk#8672,closed,2024-07-10T16:36:22Z,2024-07-10T16:36:29Z,2024-07-10T16:36:29Z,,master,revert-8672-feat/clipboard_multi_format,10,501,376,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8673
8672,"feat: clipboard, multi format","Support multiple clipboard formats.

## Preview

### Linux -> MacOS

https://github.com/rustdesk/rustdesk/assets/13586388/fb789f47-3b36-4346-a781-38b6691f687d


### Win -> MacOS


https://github.com/rustdesk/rustdesk/assets/13586388/68acb32e-3443-43af-a55d-106d4a7a9a27



### Win -> x11


https://github.com/rustdesk/rustdesk/assets/13586388/34ebee7d-fb5a-4d35-b947-2a3d8d2c0731



### Win -> Wayland

https://github.com/rustdesk/rustdesk/assets/13586388/9c793dd6-21bd-4ad9-89a0-54d1952d83c0

### Win -> Android

https://github.com/rustdesk/rustdesk/assets/13586388/a86ee2cd-2142-48aa-b918-b5a1eb422372

### 1.2.7 -> 1.2.6 ( 1.2.6 -> 1.2.7 is also tested )



https://github.com/rustdesk/rustdesk/assets/13586388/99072e91-bb47-4192-9ef4-c77912d3f852


## Desc

1. There're many deletions in `Cargo.lock` because `resvg` is removed in `arboard`. 
2. Send clipboard data array when `1.2.7` -> `1.2.7`.  
  Send text clipboard data when `1.2.7` -> `1.2.6`.  
  Send text clibpoard if the peer side is mobile.  

    So I introduced a new filed `my_platform`  in `LoginRequest` to check if peer is mobile.

3. Use a special format `dyn.com.rustdesk.owner` to indicate current clipboard data is set by RustDesk.  

    **Note**: The special format **must not** be used by other applications. Or we cannot check if the data is set by RustDesk. Or RustDesk may skip the clipboard data when checking if should send.
 
4. Remove **`OLD_CLIPBOARD_DATA`**.  
   We can send the clipboard data everytime when the clipboard is updated.
   We need to check the `dyn.com.rustdesk.owner` format to know if current clipboard data should be ignored.

## TODO

Support text clipboard when using mobile as the controlled side.

",closed,2024-07-10T13:18:50Z,2024-07-10T16:05:26Z,2024-07-10T16:05:26Z,,master,feat/clipboard_multi_format,10,376,501,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8672
8664,fix wayland Display::all() comment,,closed,2024-07-09T11:49:07Z,2024-07-09T14:10:39Z,2024-07-09T14:10:39Z,,master,comment,2,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8664
8660,add custom client option to allow remote cm modification,"https://github.com/rustdesk/rustdesk/issues/7425 


https://github.com/rustdesk/rustdesk/assets/14891774/0d339a78-5448-4d15-93a0-dd099faa557b

",closed,2024-07-09T07:11:59Z,2024-07-09T07:19:16Z,2024-07-09T07:19:16Z,,master,allow-remote-cm-modification,3,22,6,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8660
8659,Fix review points on F-Droid submission,"- **Factor out F-Droid buildscript**
- **build_fdroid: Move sudo-deps back to f-droid spec**
",closed,2024-07-09T06:24:00Z,2024-07-09T06:36:05Z,2024-07-09T06:36:05Z,,master,fdroid-buildscript,1,4,38,1,1,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8659
8652,"fix: obx, no rx value","Fix


![image](https://github.com/rustdesk/rustdesk/assets/13586388/adaf0b3c-097f-4485-8f55-a32c4a7410bb)
",closed,2024-07-08T13:43:37Z,2024-07-08T13:51:16Z,2024-07-08T13:51:16Z,,master,fix/obx_no_rx,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8652
8645,Update Italian language,"@rustdesk 

Please merge. Thanks.",closed,2024-07-08T11:58:23Z,2024-07-08T11:59:29Z,2024-07-08T11:59:29Z,,master,master,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8645
8640,"main window add block mask, cm add keyboard block","* block window body only so user can still click minimize button.
* cm doesn't show mask
* Remove focusable Offstage in tabbar_widget.dart

https://github.com/rustdesk/rustdesk/assets/14891774/52ca201e-fc4e-4f1c-94e8-14b3ffb69039

",closed,2024-07-08T08:39:50Z,2024-07-08T12:08:05Z,2024-07-08T12:08:05Z,,master,block,4,162,135,1,1,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8640
8637,wayland not call check_get_displays_changed_msg,"For wayland, call Display::all() in video service will cause block.

block, even crash here, https://github.com/rustdesk/rustdesk/blob/0bb4d43e9ea9d9dfb9c46c8d27d1a97cd0ad6bea/libs/scrap/src/wayland/pipewire.rs#L235

[wayland.webm](https://github.com/rustdesk/rustdesk/assets/14891774/6b2257f7-3c46-4249-bb3f-d2d5200ddeb1)
",closed,2024-07-08T03:39:33Z,2024-07-09T10:01:30Z,2024-07-09T10:01:30Z,,master,wayland_not_call_display_all,2,11,1,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8637
8634,Translation ,,closed,2024-07-08T01:43:38Z,2024-07-08T04:10:02Z,2024-07-08T04:10:02Z,,master,patch-3,2,11,11,3,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8634
8628,Update el.rs,,closed,2024-07-06T03:30:00Z,2024-07-06T03:35:29Z,2024-07-06T03:35:29Z,,master,master,1,33,33,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8628
8625,Move F-Droid build script to RustDesk source tree,,closed,2024-07-05T18:06:22Z,2024-07-09T03:45:08Z,2024-07-09T03:45:08Z,,master,fdroid-buildscript,5,600,3,1,9,0,rustdesk,COMMENTED,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8625
8615,feat: clipboard svg,"### Preview


https://github.com/rustdesk/rustdesk/assets/13586388/b1d895ef-e548-4cb8-85d5-165a1d299e18


https://github.com/rustdesk/rustdesk/assets/13586388/4d0c2aa8-eab1-468d-868a-617e3e46e145


https://github.com/rustdesk/rustdesk/assets/13586388/25975929-14c9-4fda-bd16-ae25c6d805a3


### Desc

1. Use `FAKE_SVG_WIDTH` to mark svg data for image.
2. Some applications like inkscape will set both svg, text in clibpard when copying. We must prevent text to be sent after the image svg data, otherwise, the peer side cannot paste the image data.  
  a. We can't check the content of svg and text. The may be different.
  b. We can't get text when before updating the `old` value. The text may not be updated until a moment later, even the svg content is updated.

So `is_last_plain` is introduced.

 


",closed,2024-07-04T23:53:42Z,2024-07-05T01:30:59Z,2024-07-05T01:30:59Z,,master,feat/clipboard_svg,2,337,35,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8615
8613,Update AppImageBuilder-x86_64.yml,,closed,2024-07-04T18:18:52Z,2024-07-04T18:20:13Z,,,master,master,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8613
8612,"Revert ""feat: clipboard svg""",Reverts rustdesk/rustdesk#8608,closed,2024-07-04T13:31:11Z,2024-07-04T13:31:19Z,2024-07-04T13:31:19Z,,master,revert-8608-feat/clipboard_svg,2,35,337,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8612
8611,Update bg.rs,"Added more translated parts, some might need more context to be more accurate",closed,2024-07-04T09:25:10Z,2024-07-04T12:21:06Z,2024-07-04T12:21:06Z,,master,patch-3,1,253,253,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8611
8610,Update ru.rs,,closed,2024-07-04T08:06:32Z,2024-07-04T12:21:18Z,2024-07-04T12:21:18Z,,master,master,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8610
8609,Update es.rs,New terms added,closed,2024-07-04T08:04:48Z,2024-07-04T12:21:28Z,2024-07-04T12:21:28Z,,master,master,1,11,11,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8609
8608,feat: clipboard svg,"
### Preview

https://github.com/rustdesk/rustdesk/assets/13586388/0559f9d0-35ba-4324-9505-7dcd25ddee73


https://github.com/rustdesk/rustdesk/assets/13586388/2367a71d-4221-446c-8e33-eacd787c5e5e


### Desc

1. Use `FAKE_SVG_WIDTH` to mark svg data for image.
2. Some applications like inkscape will set both svg, text in clibpard when copying. We must prevent text to be sent after the image svg data, otherwise, the peer side cannot paste the image data.  
  a. We can't check the content of svg and text. The may be different.
  b. We can't get text when before updating the `old` value. The text may not be updated until a moment later, even the svg content is updated.

So `is_last_plain` is introduced.

 


",closed,2024-07-04T07:59:01Z,2024-07-04T13:23:09Z,2024-07-04T13:23:08Z,,master,feat/clipboard_svg,2,337,35,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8608
8605,clear unwrap,Clear unwrap since 31cec1a896e805d804f992e3d4b87db90928b6ac (Wed May 31 18:50:52 2023 +0800) .,closed,2024-07-04T06:37:31Z,2024-07-04T12:18:53Z,2024-07-04T12:18:53Z,,master,fix/clear_unwrap,11,54,42,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8605
8603,fix Ukrainian keyboard secial letter keys,"

https://github.com/rustdesk/rustdesk/assets/13586388/b98c51e5-0e43-4f5b-9ff2-b72832019209



https://github.com/rustdesk/rustdesk/issues/8599",closed,2024-07-04T04:14:51Z,2024-07-04T12:20:25Z,2024-07-04T12:20:25Z,,master,fix/keyboard_Ukrainian,1,16,3,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8603
8597,Add basque language,,closed,2024-07-03T19:26:10Z,2024-07-05T01:30:07Z,2024-07-05T01:30:07Z,,master,feature/basque,2,638,0,2,2,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8597
8595,update sk && cz tr,,closed,2024-07-03T17:44:54Z,2024-07-04T03:43:10Z,2024-07-04T03:43:10Z,,master,update-sk-cz-lang,2,4,4,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8595
8591,Update lv.rs,,closed,2024-07-03T12:37:54Z,2024-07-03T12:40:58Z,2024-07-03T12:40:58Z,,master,patch-1,1,11,11,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8591
8585,vcpkg: sort triplets and restore local opus port for 1.5.1,"- **ci/flutter-build: Sort out triplets in job matrices**
- **Restore local port for opus 1.5.1**
",closed,2024-07-03T09:47:18Z,2024-07-03T09:57:58Z,2024-07-03T09:57:58Z,,master,vcpkg-deps,4,110,14,2,6,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8585
8583,Fix F-Droid version file workflow,,closed,2024-07-03T08:27:15Z,2024-07-03T09:12:21Z,2024-07-03T09:12:21Z,,master,tag-version-file,1,5,4,1,3,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8583
8582,Bump vcpkg baseline to 2024.06.15,"- **res/vcpkg: drop old opus port overlay**
- **res/vcpkg: bump aom to 3.9.1**
- **res/vcpkg: bump libvpx to 1.14.1**
- **Bump vcpkg baseline to 2024.06.15**
",closed,2024-07-03T07:49:14Z,2024-07-03T07:53:18Z,2024-07-03T07:53:18Z,,master,vcpkg-deps,2,4,4,5,4,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8582
8580,linux x11 rgb565 capture,"https://github.com/rustdesk/rustdesk/issues/8503

tested other physical platforms, not effected.

![rgb565_before](https://github.com/rustdesk/rustdesk/assets/14891774/886cf17e-1ba2-4321-aa47-9c66f0a1e7d8)

[rgb565_after.webm](https://github.com/rustdesk/rustdesk/assets/14891774/c2d07b2a-e3d5-403d-af77-871c378c5431)
",closed,2024-07-03T04:55:10Z,2024-07-03T06:20:41Z,2024-07-03T06:20:41Z,,master,xcb,7,165,45,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8580
8577,Update de.rs,,closed,2024-07-02T19:25:33Z,2024-07-03T03:56:00Z,2024-07-03T03:56:00Z,,master,patch-27,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8577
8576,Update Italian language,"@rustdesk 

Please merge. Thanks.",closed,2024-07-02T17:08:51Z,2024-07-03T03:55:47Z,2024-07-03T03:55:47Z,,master,master,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8576
8574,conflict,,closed,2024-07-02T13:13:22Z,2024-07-02T13:14:03Z,,,master,master,30,94,70,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8574
8570,fix: build ios,"https://github.com/kornelski/rust-security-framework/pull/204

```
ld: Undefined symbols:
     _kSecMatchSubjectWholeString, referenced from:
         security_framework::item::ItemSearchOptions::search::he568de2b0004b0c0 in liblibrustdesk.a[872](security_framework-88ef6afe340eb2ab.security_framework.e4562ffe63567184-cgu.0.rcgu.o)
```

TODO:

There's also a warning after commit [2116fec20b5a2165df97e329c156baf308668efc](https://github.com/fufesou/rustdesk/commit/2116fec20b5a2165df97e329c156baf308668efc#diff-2e9d962a08321605940b5a657135052fbcef87b5e360662bb527c96d9a615542). No idea how to fix it. But it does not stop building.
```
ld: warning: Could not find or use auto-linked framework 'CoreAudioTypes': framework 'CoreAudioTypes' not found
```",closed,2024-07-02T06:49:02Z,2024-07-02T07:37:45Z,2024-07-02T07:37:45Z,,master,fix/build_ios,1,3,3,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8570
8566,remove unnecessary special treatment when only use permanent passwrod but no password set,"https://www.reddit.com/r/rustdesk/comments/1dsix97/login_error_connection_not_allowed_ubuntu_client/

1. remove special treatment when only use permanent passwrod but no password set, it has no need and `Connection not allowd` prompt make user confusing
2. When only use permanent password is chosen and the permanent password is empty, pop up the set-password dialog, if still not set in the dialog, back to the old choice
3. Add cancel confirm for 2fa and telegram bot

prompt

https://github.com/rustdesk/rustdesk/assets/14891774/f6f87d25-78ea-4517-b24e-0dccee2ba823


https://github.com/rustdesk/rustdesk/assets/14891774/ac12c4ea-8134-4ba8-80f6-5c935ea9b5ec


https://github.com/rustdesk/rustdesk/assets/14891774/c3736eea-0051-4443-b0c2-c191d0ccfb32


password

https://github.com/rustdesk/rustdesk/assets/14891774/50fd0558-315a-4374-9460-2d8a85a5f557


https://github.com/rustdesk/rustdesk/assets/14891774/28032313-5a57-4f38-a0c4-e90211d80e17


2fa confirm

https://github.com/rustdesk/rustdesk/assets/14891774/388ed600-f1b2-4cf2-8db7-ea9749edb844

",closed,2024-07-02T04:47:59Z,2024-07-02T06:32:23Z,2024-07-02T06:32:23Z,,master,opt,30,132,11,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8566
8561,"fix: win, clipboard image","The window must belong to the current thread for clipboard-master.

https://learn.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-getmessage#:~:text=The%20window%20must%20belong%20to%20the%20current%20thread.


https://github.com/rustdesk/rustdesk/assets/13586388/351c4904-802e-45e6-857d-43b19c4ea48d

",closed,2024-07-01T14:32:04Z,2024-07-01T16:46:55Z,2024-07-01T16:46:55Z,,master,fix/win_clipboard_image,1,16,14,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8561
8560,try fix linux arm64 build,"https://github.com/rustdesk/rustdesk/pull/8545

![image](https://github.com/rustdesk/rustdesk/assets/14891774/980c7306-1878-4aad-a303-25fc61b55a92)
",closed,2024-07-01T13:05:06Z,2024-07-01T16:19:18Z,2024-07-01T16:19:18Z,,master,fix_ci,1,3,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8560
8559,Update de.rs,,closed,2024-07-01T12:37:57Z,2024-07-01T16:18:54Z,2024-07-01T16:18:54Z,,master,patch-26,1,8,8,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8559
8556,"fix: clipboard data, decompress, buf too small","Fix ""Decompress buffer is too small"" error for clipboard image.


https://github.com/rustdesk/rustdesk/assets/13586388/05ed8c9b-91b1-43b5-94a5-3e8fe819a1aa


## TODO

Clipboard listener does not work on Windows.

https://github.com/rustdesk/rustdesk/blob/0ab500c27c7dba7865cb2426af639c14c3c2afcc/src/clipboard.rs#L355

The listener's window cannot receive any message in RustDesk. Though it works fine in its demo.",closed,2024-07-01T08:58:43Z,2024-07-01T16:18:38Z,2024-07-01T16:18:38Z,,master,fix/clipboard_data_decompress_buffer_to_small,2,5,27,5,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8556
8555,"res/vcpkg: Bump aom to 3.9.1, opus to 1.5.1 and libvpx to 1.14.1","Attempt to build with latest ports
",closed,2024-07-01T08:35:25Z,2024-07-03T06:12:20Z,2024-07-03T06:12:20Z,,master,vcpkg-deps,10,28,151,3,23,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8555
8550,add type to all Getx put/get/delete/isRegistered,"![044fc72abdb55a2f2a115042b42c203](https://github.com/rustdesk/rustdesk/assets/14891774/d8f23b8b-6701-44cf-b94b-41693a1e0a66)

fix show forbidden cursor when keyboard enabled.

https://github.com/rustdesk/rustdesk/assets/14891774/9897859e-f912-42ec-8023-67a6c6d8a4df

https://github.com/rustdesk/rustdesk/assets/14891774/7dcfa4e7-f760-453e-ac62-8d253332e93d

",closed,2024-06-30T13:19:53Z,2024-06-30T13:24:18Z,2024-06-30T13:24:18Z,,master,fix_getx_type,8,62,60,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8550
8545,ci for linux x86_64 sciter deb and flatpak,"https://github.com/21pages/rustdesk/actions/runs/9736627585

Tested flutter/sciter linux x64 deb/flatpak, will test arm64 and try test armv7 in docker when offical nightly is ready.

https://github.com/rustdesk/rustdesk/assets/14891774/7934a071-494d-4b45-b661-027015453e6f

https://github.com/rustdesk/rustdesk/assets/14891774/2bc8cbf8-8a0a-47b9-8760-30d76f38a498

",closed,2024-06-30T09:24:09Z,2024-07-01T03:01:36Z,2024-07-01T03:01:35Z,,master,sciter_ci,2,45,17,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8545
8543,fix ci,"
https://github.com/rustdesk/rustdesk/assets/14891774/5035560a-5794-48b7-ad07-f44adb442bf5

",closed,2024-06-30T05:43:52Z,2024-06-30T05:54:40Z,2024-06-30T05:54:40Z,,master,fix_ci,3,18,10,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8543
8538,"fix: linux, arboard::new(), retry",,closed,2024-06-29T17:09:37Z,2024-06-29T17:13:45Z,2024-06-29T17:13:45Z,,master,fix/linux_arboard_new_retry,1,15,15,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8538
8537,"fix: win, virtual display, privacy mode","Fix todo here https://github.com/rustdesk/rustdesk/pull/8531

### Preview

https://github.com/rustdesk/rustdesk/assets/13586388/50d36d9a-5de3-44e3-99ee-ecdd1fa2c5db

### Desc

Remove the following code. The code is used to restore the display settings. 

```rust
        Self::restore_displays(&self.displays);
        Self::restore_displays(&self.virtual_displays);
        allow_err!(Self::commit_change_display(0));
```

Both the above code and restoring the registry value (of `SYSTEM\CurrentControlSet\Control\GraphicsDrivers`) can restore the display settings.

The registry value is backup before turning on privacy mode. And will restore on
1. Turning off privacy mode
2. Restarting the server (If crash)
3. Disconnecting

If run both code, the server may send `switch display` (from video service) and `sync peer info` (from display service).

If the display settings are changed in both ways at the same time, the client might not process the message correctly.

",closed,2024-06-29T16:42:10Z,2024-06-29T16:44:11Z,2024-06-29T16:44:11Z,,master,fix/win_virtual_display_privacy_restore,1,3,32,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8537
8536,Update cs tr,,closed,2024-06-29T14:24:21Z,2024-06-29T14:26:07Z,2024-06-29T14:26:06Z,,master,update-cs-rs,1,8,8,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8536
8535,Update sk tr,,closed,2024-06-29T14:14:20Z,2024-06-29T14:16:41Z,2024-06-29T14:16:41Z,,master,update-sk-rs,1,8,8,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8535
8534,"fix, shared memory size uses the max resolution of all displays",The case of setting a monitor inserted later as the primary monitor is not taken into account,closed,2024-06-29T13:47:21Z,2024-06-29T13:50:22Z,2024-06-29T13:50:22Z,,master,fix,2,8,3,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8534
8533,Update ru.rs,,closed,2024-06-29T13:37:46Z,2024-06-29T13:41:09Z,2024-06-29T13:41:09Z,,master,master,1,6,6,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8533
8532,Update winget-releaser to latest,,closed,2024-06-29T13:14:54Z,2024-06-29T13:17:11Z,2024-06-29T13:17:11Z,,master,patch-1,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8532
8531,"fix: win, multi-display settings changed","https://www.reddit.com/r/rustdesk/comments/1dr07wx/rustdesk_changes_my_multimonitor_layout_upon/

## Bug


https://github.com/rustdesk/rustdesk/assets/13586388/48435e6d-9384-4362-b719-72f0615daa87



1. Windows, multi-display, as the controlled side.
2. Connect
3. Turn on privacy mode, with mode 2.
4. Turn off privacy mode.

Then the display settings are continues changed when connect & disconnect.


## Fixed

Clear the displays data after restoring, to avoid repeated settings.


https://github.com/rustdesk/rustdesk/assets/13586388/86b30413-6a70-4cc8-afd9-285bd8ff6489



## TODO

![image](https://github.com/rustdesk/rustdesk/assets/13586388/c3e661f0-80d2-4c94-883f-c80ba51ec8bb)

Display positions and sizes do not match the real ones.


",closed,2024-06-29T12:05:34Z,2024-06-29T12:16:22Z,2024-06-29T12:16:22Z,,master,fix/multi_display_settings_changed_on_disconn,1,2,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8531
8530,RustDesk -> xDesk,,closed,2024-06-29T11:57:04Z,2024-06-29T12:14:41Z,,,master,master,1,18,18,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8530
8527,fix switch to primary display but can't see UAC,"How to reproduce: elevate at primary display -> switch to another display -> trigger UAC -> switch to primary display -> can't see UAC


https://github.com/rustdesk/rustdesk/assets/14891774/d1a25ff7-f57b-40c7-ab14-aef6fc094239


https://github.com/rustdesk/rustdesk/assets/14891774/7dd0649e-7326-435d-a31c-00aeff80b433

",closed,2024-06-29T09:10:46Z,2024-06-29T09:14:09Z,2024-06-29T09:14:09Z,,master,fix,1,9,8,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8527
8526,"fix: mobile more actions, check version 1.2.7",The peer version must be greater than `1.2.7` to support more mobile actions.,closed,2024-06-29T03:48:50Z,2024-06-29T03:50:41Z,2024-06-29T03:50:41Z,,master,fix/mobile_more_actions_check_version,2,3,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8526
8525,portable service only run on primary display,"Make elevation works for multiple displays

UAC only on primary display, and mouse doesn't require on the same display. Still works if changing primary display in settings.


https://github.com/rustdesk/rustdesk/assets/14891774/7326bfc2-e77b-49f0-97ad-17eea447510f


https://answers.microsoft.com/en-us/windows/forum/all/uac-showing-up-off-the-primary-monitor-how-do-i/ec5eba23-8ddc-4baa-b47d-049cdee4c9f5

https://learn.microsoft.com/en-us/openspecs/windows_protocols/ms-gpsb/9ad50fd3-4d8d-4870-9f5b-978ce292b9d8

",closed,2024-06-29T02:47:55Z,2024-06-29T06:17:25Z,2024-06-29T06:17:25Z,,master,portable_service_run_on_primary_display,30,83,105,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8525
8522,Upgrade arboard,"Upgrade [`arboard`](https://crates.io/crates/arboard) to `3.4.0`.

Arboard server and client side are tested on Win, Mac, Linux.


### CAUTION

`get_text()` on Linux has no timeout in `arboard`, it may block.

So this function must not be called in the main thread.

See the comments in `src/common.rs` for more details.

### Changes

https://github.com/fufesou/arboard/compare/feat/x11_set_conn_timeout...1Password:arboard:v3.4.0

https://github.com/1Password/arboard/blob/master/CHANGELOG.md#:~:text=Reverted%20timeout%20behavior


",closed,2024-06-28T15:11:14Z,2024-06-28T15:15:33Z,2024-06-28T15:15:33Z,,master,refact/update_arboard,3,173,91,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8522
8521,fix extracted process window not foreground,"1. The parent process sets the child process through `AllowSetForegroundWindow`. If the child process has the environment `SET_FOREGROUND_WINDOW`, call `SetForegroundWindow`.
2. Sometimes `install` and `run without install` can't create foreground processes and force them to be the foreground. (In fact hard to reproduce with latest flutter version.)
3. Show loading only when override extracted files.

https://github.com/rustdesk/rustdesk/assets/14891774/7898bf15-5c03-4bef-a92b-88ab55ea56a3

https://github.com/rustdesk/rustdesk/assets/14891774/ee932225-f17f-4ddc-9c46-916416b3b755

https://github.com/rustdesk/rustdesk/assets/14891774/17fd1669-7047-402e-b25d-ef7ecd3886d6

https://github.com/rustdesk/rustdesk/assets/14891774/ba2bb28e-b491-4c19-b2a0-229bf6f8583d

https://github.com/rustdesk/rustdesk/assets/14891774/08a796ab-2825-4c20-b5aa-855c069c167e


",closed,2024-06-28T10:44:50Z,2024-06-28T14:36:29Z,2024-06-28T14:36:29Z,,master,foreground_extracted_ui,5,113,14,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8521
8520,Update Italian language,"@rustdesk 

Please merge. Thanks.
",closed,2024-06-28T07:28:02Z,2024-06-28T08:28:44Z,2024-06-28T08:28:44Z,,master,master,1,3,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8520
8512,"refact: mobile more actions, divider","
https://github.com/rustdesk/rustdesk/assets/13586388/624cc514-60ac-42a0-9675-5a821dda13d2

",closed,2024-06-27T16:06:59Z,2024-06-27T16:57:16Z,2024-06-27T16:57:16Z,,master,refact/mobile_more_actions_divider,2,71,63,1,1,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8512
8510,"refact: mobile min cursor size, 12",,closed,2024-06-27T14:47:39Z,2024-06-27T15:19:38Z,2024-06-27T15:19:38Z,,master,refact/mobile_min_cursor_size_12,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8510
8508,remove dpiAware from manifest in ci for self-extracted executable,,closed,2024-06-27T14:20:19Z,2024-06-27T14:23:25Z,2024-06-27T14:23:25Z,,master,portable-loading-dpi,1,2,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8508
8504,wakelock not block system sleep,"https://github.com/rustdesk/rustdesk/discussions/8473 

tested on windows/mac, sleep flag not work on my linux pc.

",closed,2024-06-27T12:05:04Z,2024-06-27T12:09:51Z,2024-06-27T12:09:51Z,,master,wakelock,1,4,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8504
8502,Update Italian language,"@rustdesk 

Please merge. Thanks.",closed,2024-06-27T09:55:11Z,2024-06-27T10:10:41Z,2024-06-27T10:10:41Z,,master,master,1,8,5,2,2,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8502
8498,deleted,拉取1.2.6最新版本,closed,2024-06-27T07:49:42Z,2024-06-27T07:50:53Z,,,master,master,3,8,8,5,1,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8498
8497,Update ru.rs,,closed,2024-06-27T07:00:22Z,2024-06-27T07:04:53Z,2024-06-27T07:04:53Z,,master,master,1,5,5,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8497
8496,Feat/android more actions,"

https://github.com/rustdesk/rustdesk/assets/13586388/6c51f651-68d0-48d2-a1d0-3946ebc120bd


https://github.com/rustdesk/rustdesk/assets/13586388/f27628d1-49c6-4054-8431-07be08a91835

",closed,2024-06-27T05:24:07Z,2024-06-27T05:28:05Z,2024-06-27T05:28:05Z,,master,feat/android_more_actions,30,337,14,4,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8496
8494,Refact/android input changed notify clients,"Notify input permission on Android (controlled). No need to reconnect to get new permission.


https://github.com/rustdesk/rustdesk/assets/13586388/3b9ed753-4d7a-4765-a9e0-7b0e55082597

",closed,2024-06-27T04:46:46Z,2024-06-27T05:05:45Z,2024-06-27T05:05:45Z,,master,refact/android_input_changed_notify_clients,5,31,0,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8494
8493,Feat/android more actions,"


https://github.com/rustdesk/rustdesk/assets/13586388/6c51f651-68d0-48d2-a1d0-3946ebc120bd


https://github.com/rustdesk/rustdesk/assets/13586388/f27628d1-49c6-4054-8431-07be08a91835

",closed,2024-06-27T04:41:53Z,2024-06-27T05:12:59Z,,,master,feat/android_more_actions,30,337,33,3,0,0,rustdesk,CHANGES_REQUESTED,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8493
8492,not use nwg default features,"default features is ""all""",closed,2024-06-27T03:54:39Z,2024-06-27T04:11:08Z,2024-06-27T04:11:08Z,,master,nwg_no_default_feature,2,2,49,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8492
8491,"refact: android, input control changed, notify clients","Notify input permission on Android (controlled). No need to reconnect to get new permission.


https://github.com/rustdesk/rustdesk/assets/13586388/b835e992-6905-430d-b8d4-e5579e306fad

",closed,2024-06-27T01:50:50Z,2024-06-27T01:51:48Z,,,master,refact/android_input_changed_notify_clients,4,23,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8491
8490,windows portable loading ui,"
https://github.com/rustdesk/rustdesk/assets/14891774/324d4923-1886-423f-927f-5b278a40e1a1

",closed,2024-06-27T01:19:44Z,2024-06-27T03:04:55Z,2024-06-27T03:04:55Z,,master,portable-loading,6,303,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8490
8489,feat: android volume and power actions,"
https://github.com/rustdesk/rustdesk/assets/13586388/624ecdb4-88c0-4986-8496-ff2ede926681


https://github.com/rustdesk/rustdesk/assets/13586388/ca587767-486f-4389-9d52-fc9fb6a1f708

",closed,2024-06-27T01:17:51Z,2024-06-27T02:49:40Z,,,master,feat/android_more_actions,11,252,8,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8489
8481,"fix: mobile cursor, check null",`preDefaultCursor.image` may be ready after sometime (decoding pre-default image data).,closed,2024-06-26T11:43:10Z,2024-06-26T11:49:53Z,2024-06-26T11:49:52Z,,master,fix/check_cursor_image_null,1,5,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8481
8480,add Belarusian locale,,closed,2024-06-26T10:45:35Z,2024-06-26T12:32:05Z,2024-06-26T12:32:05Z,,master,master,2,629,0,29,4,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8480
8478,fix: android cursor scale,"Mobile cursor, scale with canvas.

<img width=""420"" alt=""84004a6e9a4f51b173b43770c1b5702"" src=""https://github.com/rustdesk/rustdesk/assets/13586388/5ab6779a-78de-469d-9353-3203d4cfdad9"">

<img width=""420"" alt=""84004a6e9a4f51b173b43770c1b5702"" src=""https://github.com/rustdesk/rustdesk/assets/13586388/680d1ab0-6ab3-40e9-b329-dc8fb43b3f1c"">

<img width=""420"" alt=""84004a6e9a4f51b173b43770c1b5702"" src=""https://github.com/rustdesk/rustdesk/assets/13586388/5995b37d-2486-4ba3-82f5-eaa0ebd0bb1b"">
",closed,2024-06-26T07:58:18Z,2024-06-26T10:42:08Z,2024-06-26T10:42:08Z,,master,fix/android_cursor_scale,1,15,5,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8478
8471,"fix: ios keyboard, composing input",Fix ios soft keyboard composing input strings.,closed,2024-06-25T16:09:04Z,2024-06-25T16:24:57Z,2024-06-25T16:24:57Z,,master,fix/ios_keyboard_composing,1,63,28,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8471
8470,"fix: wrong use of Instant sub, just after booting","https://github.com/rustdesk/rustdesk/issues/8462

`Instant::now() - period * 2` will cause crash or dead lock on windows if the os is just booted.

https://doc.rust-lang.org/std/time/struct.Instant.html#:~:text=QueryPerformanceCounter

The following pictures show that the process is locked when `Instant(27.65) - Duration(60)`

<img width=""950"" alt=""84004a6e9a4f51b173b43770c1b5702"" src=""https://github.com/rustdesk/rustdesk/assets/13586388/3b3fb5c7-c373-4092-bebc-c07ee2351935"">

<img width=""776"" alt=""83ce0ca6d0dcbc4b769b67d70b072af"" src=""https://github.com/rustdesk/rustdesk/assets/13586388/31d25d53-de1d-440d-8bfa-c77ee8741904"">
",closed,2024-06-25T11:56:25Z,2024-06-25T12:33:38Z,2024-06-25T12:33:38Z,,master,fix/instance_sub_on_booted,1,5,4,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8470
8469,"fix, check video_queue len rather than len when refresh",`len` is max len of all display queues.,closed,2024-06-25T09:37:43Z,2024-06-25T10:30:32Z,2024-06-25T10:30:32Z,,master,fps,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8469
8468,"if fps is adjusted below 30, not set fps to 30 when changing image quality","before: set fps to 30 when changing to non-custom quality

https://github.com/rustdesk/rustdesk/assets/14891774/fcaf6287-4e98-46f6-b7f9-a7a1ac6fae6f

after: not changing fps if adjusted fps is below 30 

https://github.com/rustdesk/rustdesk/assets/14891774/9760734f-a95b-44d0-b278-4ec0cd9eddf3

https://github.com/rustdesk/rustdesk/assets/14891774/d9834530-1c3a-47fc-99b0-bed5e71fafa0

",closed,2024-06-25T08:37:15Z,2024-06-25T09:25:50Z,2024-06-25T09:25:50Z,,master,fps,3,12,9,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8468
8465,"fix: mobile, chat menu, hide after tapping","
https://github.com/rustdesk/rustdesk/assets/13586388/314c2b51-4fbf-4b10-84d0-4baef7e4cc4a

",closed,2024-06-24T16:26:47Z,2024-06-24T16:31:41Z,2024-06-24T16:31:41Z,,master,fix/mobile_auto_close_chat_menu,1,5,3,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8465
8464,"fix: ios, chat window position, wrong member value","
https://github.com/rustdesk/rustdesk/assets/13586388/5ca9ab7e-4d8a-485a-a6df-ea2d9e61539e

We may need to add types to the `get` function. Otherwise Flutter may not be able to infer errors for the type.",closed,2024-06-24T14:54:54Z,2024-06-24T14:56:13Z,2024-06-24T14:56:13Z,,master,fix/ios_chat_window_position,1,9,9,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8464
8455,fix multi display fps control,"* Calculating fps without distinguish displays, using 1 fps control, because the controlled end controls fps for all displays through 1 FPS variable.
* Since all display decoding frames are in one `start_video_audio_threads`, when there are `N` displays, the max video frames received in one second are `fps * N`, so the calculated fps should be divided by `N`, then the max video frames received in one second are `fps`. Because the actual display count is not obvious in rust, When no video frame is received within 5 seconds, the display is considered inactive and only the active display is used as the dividend.

**Multi display before fix**: the limited fps is not divided by 2 and the lengths of video queue increase. 

https://github.com/rustdesk/rustdesk/assets/14891774/5f94a41b-31e4-4ab7-8c6a-7c27f319edfe

**Multi display after fix**: the limited fps is divided by 2 and  the lengths of video queue are zero. 
Test in the video: 
* open new display->fps divided by 2
* pause video->fps restored
* start video->fps divided by 2
*  close display->fps restored

https://github.com/rustdesk/rustdesk/assets/14891774/e2dd7cd5-16a8-4cd0-b57b-5bbf55c56dd4

**one display** : make  h264 decoding slower manualy and switching between h264 and h265

https://github.com/rustdesk/rustdesk/assets/14891774/5f3a2f02-0b25-47a1-8f7d-be00ef153a0f

",closed,2024-06-24T10:25:54Z,2024-06-24T11:41:15Z,2024-06-24T11:41:15Z,,master,multi_display_fps,3,133,98,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8455
8453,Update Ukrainian translation,,closed,2024-06-24T09:06:14Z,2024-06-24T09:32:00Z,2024-06-24T09:32:00Z,,master,ukrainian-translation,1,5,5,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8453
8450,update cs.rs,,closed,2024-06-23T08:54:35Z,2024-06-23T10:05:06Z,2024-06-23T10:05:06Z,,master,update-czech-language,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8450
8449,update sk.rs,,closed,2024-06-23T08:53:20Z,2024-06-23T10:05:28Z,2024-06-23T10:05:28Z,,master,update-slovak-language,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8449
8447,fix: mobile actions hide and mobile theme,"
https://github.com/rustdesk/rustdesk/assets/13586388/95346f23-4db5-4b20-b64f-2ae7f4fc0071

",closed,2024-06-23T03:23:59Z,2024-06-23T03:26:15Z,2024-06-23T03:26:15Z,,master,fix/mobile_actions_hide_and_mobile_theme,2,4,6,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8447
8446,"fix: mobile actions, position","1. Remember mobile actions and chat window positions, in local config settings.
2. Remember ""show mobile actions"", in local config settings.


https://github.com/rustdesk/rustdesk/assets/13586388/617dc449-efe2-4c9d-9fbb-ca60207744ee

",closed,2024-06-23T03:04:49Z,2024-06-23T03:06:47Z,2024-06-23T03:06:47Z,,master,fix/mobile_action_pos,8,164,48,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8446
8444,Update tw.rs,,closed,2024-06-22T20:30:05Z,2024-06-23T01:09:08Z,2024-06-23T01:09:08Z,,master,patch-2,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8444
8443,Update de.rs,,closed,2024-06-22T12:47:11Z,2024-06-22T12:51:34Z,2024-06-22T12:51:34Z,,master,patch-25,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8443
8442,Update ru.rs,,closed,2024-06-22T12:00:07Z,2024-06-22T12:05:56Z,2024-06-22T12:05:56Z,,master,master,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8442
8441,"quality monitor, delay displays as 0 when fps is 0","flutter:

https://github.com/rustdesk/rustdesk/assets/14891774/7b2a4159-a83f-4456-9cb9-7cd733ccd430

sciter:

https://github.com/rustdesk/rustdesk/assets/14891774/28d981f2-b668-45d1-ad6b-eb1fc403f04f

fix sciter fps not update when new fps is 0.

",closed,2024-06-22T01:10:55Z,2024-06-22T01:39:03Z,2024-06-22T01:39:02Z,,master,quality_monitor,2,9,7,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8441
8440,"fix: android, no voice call under android 11","No voice call menu under android 11.

![image](https://github.com/rustdesk/rustdesk/assets/13586388/2dacaa0a-05fd-4edf-b302-7f859ab16a89)
",closed,2024-06-21T22:48:54Z,2024-06-22T00:10:54Z,2024-06-22T00:10:54Z,,master,fix/android_no_voice_call_under_11,4,37,17,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8440
8439,Update Italian language,"@rustdesk 

Please merge. Thanks.",closed,2024-06-21T19:22:48Z,2024-06-22T00:11:09Z,2024-06-22T00:11:09Z,,master,master,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8439
8437,Develop,,closed,2024-06-21T14:52:13Z,2024-06-21T14:53:52Z,,,master,develop,3,633,648,3,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8437
8436,fix typo,,closed,2024-06-21T11:26:13Z,2024-06-21T15:58:01Z,2024-06-21T15:58:01Z,,master,fix,2,4,4,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8436
8435,"add enable directx option, android software encoding half resolution option","1. add option enable directx capture screen, default true

![be25615004be7a33315219960e30571](https://github.com/rustdesk/rustdesk/assets/14891774/46e4cf00-fced-4c1e-9781-f06011b51d47)

![1718965133095](https://github.com/rustdesk/rustdesk/assets/14891774/02ac1b26-248b-4f8d-a6e0-e812a95628ea)


2. add option android software encoding half scale, and wait for isStart flag to be true befoe check scale. video service run and startCapture is called at the same time, isStart can be false when check scale, and isStart is checked when call stopCapture and startCapture.
 
default

https://github.com/rustdesk/rustdesk/assets/14891774/f0e80a0d-dd13-47df-b583-e4a4b9351638

disable half scale resolution

https://github.com/rustdesk/rustdesk/assets/14891774/71a6aa1e-b3bc-4822-8f5d-061786e48ead

when isStart is late to be set (fixed by wait)

https://github.com/rustdesk/rustdesk/assets/14891774/a2d4b73a-fe18-4ce1-90a0-d6b1ee21646a

![wait-isStart](https://github.com/rustdesk/rustdesk/assets/14891774/4a8a7aea-7cc5-4e69-8cec-077225bb560e)

",closed,2024-06-21T09:48:05Z,2024-06-21T10:54:32Z,2024-06-21T10:54:32Z,,master,gdi_option,30,88,25,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8435
8434,"fix: android prompt ""Failed to stop voice call"" on conn ended","https://github.com/rustdesk/rustdesk/issues/8432 

### Bug desc

1. `onVoiceCallClosed()` returns `false` when `Build.VERSION.SDK_INT < Build.VERSION_CODES.R`.
It should return true, because the voice call was not started.
2. The flutter should reset the voice call status to `VoiceCallStatus.notStarted` on conn end.

We should always call `onVoiceCallClosed()` if using Android and end the connection.
The inner logic of voice call should check if it was started.
",closed,2024-06-21T07:20:52Z,2024-06-21T08:43:54Z,2024-06-21T08:43:54Z,,master,fix/android_end_voice_call,3,11,14,5,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8434
8429,"fix: android, two finger pan, scale","Android, fix focal point on remote side when scaling.


https://github.com/rustdesk/rustdesk/assets/13586388/f669d397-1c8e-4c3e-90a4-41655e0a07ca

",closed,2024-06-21T00:20:24Z,2024-06-21T01:07:32Z,2024-06-21T01:07:32Z,,master,fix/android_two_fingpan_scale,2,10,11,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8429
8427,"fix: android, touch mode, one finger pan, start pos","Simple workaround for the issue that the first pan event is sent a long time after the start event.
Then the dragging start position is wrong.

Use `_cacheLongPressPositionTs()` to check if `onOneFingerPanStart()` is just after `onLongPressDown()`.

TODOs:

1. The `onOneFingerPanStart()` cannot be triggered if press and moving very fast. But this may not affect the user experience too much
",closed,2024-06-20T14:12:23Z,2024-06-20T14:21:14Z,2024-06-20T14:21:14Z,,master,fix/workaround_android_touch_mode_one_finger_pan_start_pos,2,15,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8427
8426,"fix: android, touch mode, correct cursor input, on soft keyboard shows","Only update adjust for keyboard on `onTapDown & onTapUp` events.

### Bug preview


https://github.com/rustdesk/rustdesk/assets/13586388/56fe5a4b-340a-49a5-a8c6-f84db7dba0f6

### Fixed preview


https://github.com/rustdesk/rustdesk/assets/13586388/4f791657-f02c-47d4-87d8-a324273f532e





## TODOs:

1. ""Press & Drag"" events are not will detected. 

The following two events will be triggered on ""Press & Drag"". But `onOneFingerPanStart()` may be triggerred a little late. Then the start position is wrong. User have to press a little longer to make sure the dragging start position is correct.

https://github.com/rustdesk/rustdesk/blob/master/flutter/lib/common/widgets/remote_input.dart#L146

https://github.com/rustdesk/rustdesk/blob/master/flutter/lib/common/widgets/remote_input.dart#L224

2. There's an offset after holding and moving cursor in touch mode.


https://github.com/rustdesk/rustdesk/assets/13586388/bc54702e-3076-4ced-bec5-1017fc08d886



3. The soft keyboard Soft keyboard ""show&hide"" cannot be detected by UI sometimes.
",closed,2024-06-20T14:08:43Z,2024-06-20T14:18:57Z,2024-06-20T14:18:57Z,,master,fix/android_touchmode_correct_cursor_pos,2,19,15,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8426
8425,"android, secure keyboard on remote input","https://github.com/flutter/flutter/issues/139143

https://github.com/flutter/flutter/issues/146540",closed,2024-06-20T12:15:58Z,2024-06-20T12:20:32Z,2024-06-20T12:20:32Z,,master,fix/android_secure_keyboard,1,5,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8425
8422,"update hwcodec, use ms as pts like vpx","tested all codecs, not much difference but more reasonable, and sdk codecs didn't set pts before.",closed,2024-06-20T05:55:04Z,2024-06-20T05:57:56Z,2024-06-20T05:57:56Z,,master,pts,5,24,17,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8422
8421,"Revert ""fix: android, touch mode, move cursor""",Reverts rustdesk/rustdesk#8419,closed,2024-06-20T04:17:07Z,2024-06-20T04:22:36Z,2024-06-20T04:22:36Z,,master,revert-8419-fix/android_touch_mode_cursor_pos,3,21,74,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8421
8419,"fix: android, touch mode, move cursor","Only update adjust for keyboard on `onTapDown & onTapUp` events.

### Bug preview


https://github.com/rustdesk/rustdesk/assets/13586388/56fe5a4b-340a-49a5-a8c6-f84db7dba0f6

### Fixed preview


https://github.com/rustdesk/rustdesk/assets/13586388/b983ed24-5f12-432f-9390-6c63630f27fd


## TODOs:

1. ""Press & Drag"" events are not will detected. 

The following two events will be triggered on ""Press & Drag"". But `onOneFingerPanStart()` may be triggerred a little late. Then the start position is wrong. User have to press a little longer to make sure the dragging start position is correct.

https://github.com/rustdesk/rustdesk/blob/master/flutter/lib/common/widgets/remote_input.dart#L146

https://github.com/rustdesk/rustdesk/blob/master/flutter/lib/common/widgets/remote_input.dart#L224

2. The soft keyboard Soft keyboard ""show&hide"" cannot be detected by UI sometimes.
",closed,2024-06-19T23:57:48Z,2024-06-20T00:29:08Z,2024-06-20T00:29:08Z,,master,fix/android_touch_mode_cursor_pos,3,74,21,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8419
8414,"linux install service, stop service before start","If the stop-service option before installation is ""Y"", after installation --sever is also started up. When clicking to start service, restart --server to make it read the config file, otherwise the service can't be started util --server is restarted.

[before.webm](https://github.com/user-attachments/assets/30feefb9-20bf-4e7c-a81f-ae68dc2fe2e6)

[after.webm](https://github.com/user-attachments/assets/3dcf1c4b-5ab8-4d8b-9225-18ad43336943)

",closed,2024-06-19T08:14:19Z,2024-06-19T08:29:40Z,2024-06-19T08:29:40Z,,master,linux,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8414
8410,fix sleep duration when receive ipc close,"unit is second

[linux.webm](https://github.com/rustdesk/rustdesk/assets/14891774/6d72bc73-2233-4f9a-9a72-ad74b3cb82c9)
",closed,2024-06-19T06:00:10Z,2024-06-19T06:02:13Z,2024-06-19T06:02:13Z,,master,linux,1,2,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8410
8409,"fix: android, touch mode, soft keyboard, no pointer events","Block touch events on `KeyHelpTools`.

### Bug preview


https://github.com/rustdesk/rustdesk/assets/13586388/24d9d45c-b808-4772-923a-bfac77333446

### Fixed preview


https://github.com/rustdesk/rustdesk/assets/13586388/caa9b51d-9cd0-4a5b-a5db-bf68620079f9



TODOs:

1. Mobile touch mode, compute the correct position for touch mode.

![image](https://github.com/rustdesk/rustdesk/assets/13586388/6d342fdb-d7e0-4120-ba08-0909398e988d)

We want to move cursor to `A`, but we send the position of `A'`, while the cursor is moved to `B`.

a. There's an offset of cursor and image when soft keyboard is shown up.
b. We use local position, but user wants to move the cursor according remote coordination.


2. Soft keyboard ""show&hide"" cannot be detected by UI sometimes.
",closed,2024-06-19T03:55:52Z,2024-06-19T07:58:23Z,2024-06-19T07:58:23Z,,master,fix/android_touch_mode_softkey_translucent_pointer,3,88,5,3,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8409
8407,fix ci,,closed,2024-06-19T02:00:06Z,2024-06-19T02:12:10Z,2024-06-19T02:12:10Z,,master,test,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8407
8401,"fix get mac display scale, find screen from display id","
https://github.com/rustdesk/rustdesk/assets/14891774/4e449d95-62e7-4db4-8d2f-da275b5b7d42

",closed,2024-06-18T11:25:41Z,2024-06-18T11:37:16Z,2024-06-18T11:37:15Z,,master,mac_scale,1,8,8,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8401
8400,update ru.rs,,closed,2024-06-18T11:02:01Z,2024-06-18T11:36:33Z,2024-06-18T11:36:32Z,,master,master,1,15,15,8,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8400
8398,Update ru.rs,,closed,2024-06-18T09:06:32Z,2024-06-18T09:08:44Z,2024-06-18T09:08:44Z,,master,master,1,35,35,3,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8398
8394,Update translation,"* Add translation for `tw.rs`

* Add spacing for `cn.rs`",closed,2024-06-18T01:52:36Z,2024-06-18T01:54:03Z,2024-06-18T01:54:03Z,,master,patch-1,2,7,7,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8394
8393,sync get option in android setting,"
https://github.com/rustdesk/rustdesk/assets/14891774/92d6a38f-0330-4643-9b30-c493eb3c8dd3

",closed,2024-06-18T00:26:30Z,2024-06-18T00:29:10Z,2024-06-18T00:29:10Z,,master,android_setting,4,28,88,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8393
8389,"update hwcodec, remove AVCodecParserContext","It was used to decode different resolution with same decoder, but may cause crash.",closed,2024-06-17T15:47:34Z,2024-06-17T15:53:43Z,2024-06-17T15:53:43Z,,master,hwcodec,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8389
8388,refact: ci build debug,"deb, dmg, aarch64.apk, win-sciter, win-flutter are tested for  https://github.com/fufesou/rustdesk/releases/tag/nightly

### Preview

https://github.com/fufesou/rustdesk/releases/tag/nightly-debug

### segment fault

dmg crashes with segfault. Native build works fine.

The nightly build of dmg rustdesk's release page works fine.

The segfault is not introduced by this commit.

The nightly build of dmg in 21pages' release page also crashes segfault in my machine.

I've also reverted commit in 2024-06-16, the built dmg also crashes with segfault.

",closed,2024-06-17T14:51:01Z,2024-06-17T15:13:09Z,,,master,refact/ci_build_debug,5,341,135,1,1,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8388
8383,Update lv.rs,,closed,2024-06-17T09:26:07Z,2024-06-17T09:31:38Z,2024-06-17T09:31:38Z,,master,patch-8,1,4,4,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8383
8378,fix mobile ab/group not update when login with 2fa/email,"
https://github.com/rustdesk/rustdesk/assets/14891774/7533ac48-62b1-4adb-a27b-411fb54e7de1

",closed,2024-06-17T02:29:39Z,2024-06-17T02:35:58Z,2024-06-17T02:35:58Z,,master,ab,1,6,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8378
8377,New terms added,,closed,2024-06-16T18:21:14Z,2024-06-17T02:36:11Z,2024-06-17T02:36:11Z,,master,master,1,6,6,6,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8377
8376,make mobile ab dropdown button text vertical center,"




https://github.com/rustdesk/rustdesk/assets/14891774/1b17caca-58df-4df9-9b6a-d0cc2b666f73

",closed,2024-06-16T15:34:38Z,2024-06-16T15:41:40Z,2024-06-16T15:41:40Z,,master,opt,1,3,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8376
8374,opt android ab ui,"* multiline error banner
* mobile remove ab permission icons due to hard to press
* center ab dropdown button text
* pullAb/pullGroup is called after login finish completely, I will reproduce and check code  after this pr.


https://github.com/rustdesk/rustdesk/assets/14891774/7ba614c7-758b-47e2-befe-3f27881d7b5f

https://github.com/rustdesk/rustdesk/assets/14891774/10f59b04-a59c-4a02-aa99-6c1b9c8e1df4

",closed,2024-06-16T14:58:28Z,2024-06-16T15:13:46Z,2024-06-16T15:13:46Z,,master,android_ab,2,30,22,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8374
8373,fix: build on higher version of linux (pam),"https://github.com/1wilkens/pam-sys/issues/27

https://github.com/fufesou/pam/commit/3a2aaa6e07b176d8e2d66a5eec38d2ddb45f009f

https://github.com/fufesou/pam-sys/commit/3337c9bb9a9c68d7497ec8c93cad2368c26091b7


",closed,2024-06-16T14:31:57Z,2024-06-16T14:37:14Z,2024-06-16T14:37:14Z,,master,fix/build_pam_on_some_linux,1,2,3,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8373
8370,Update ru.rs,,closed,2024-06-16T06:58:15Z,2024-06-16T07:14:45Z,2024-06-16T07:14:45Z,,master,master,1,5,5,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8370
8368,mac scale factor of each screen,"Each screen has an independent BackingScaleFactor

before change: scale factor is same with main screen, and may change when after click.

https://github.com/rustdesk/rustdesk/assets/14891774/2fbba55e-4568-4824-b9b1-7c632e99a87d

after change:  scale factor is same with setting

https://github.com/rustdesk/rustdesk/assets/14891774/0e597ef5-28c6-4257-bfe7-11d0cd891ebb

",closed,2024-06-16T03:55:32Z,2024-06-16T04:01:41Z,2024-06-16T04:01:41Z,,master,mac_scale,3,9,5,1,1,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8368
8365,update cs.rs,,closed,2024-06-15T08:00:04Z,2024-06-15T08:03:42Z,2024-06-15T08:03:42Z,,master,update-czech-language,1,4,4,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8365
8364,update sk.rs,,closed,2024-06-15T07:58:17Z,2024-06-15T08:03:56Z,2024-06-15T08:03:56Z,,master,update-slovak-translation,1,4,4,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8364
8353,"fix: non texture, multi window, switch display","Fix non texture, multi window, swiching display or new session.

The multi-displays session use texture render. There're some issues while switching display.

### Bug preview


https://github.com/rustdesk/rustdesk/assets/13586388/9f29e81b-9af6-48eb-81db-8b3cc9716685



### Fixed preview


https://github.com/rustdesk/rustdesk/assets/13586388/3649b2e9-7a7d-4f35-9b57-3e77b056b73e

",closed,2024-06-14T09:49:11Z,2024-06-14T09:55:03Z,2024-06-14T09:55:03Z,,master,fix/non_texture_multi_window,5,57,58,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8353
8352,Update Italian language,"@rustdesk 

Please merge. Thanks.",closed,2024-06-14T09:38:15Z,2024-06-14T09:39:24Z,2024-06-14T09:39:24Z,,master,master,1,4,4,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8352
8349,"fix: desktop, remote toolbar, remember collapse","Desktop remote toolbar, show on connection, as a peer option. **Pin** is still a local option.

https://github.com/rustdesk/rustdesk/assets/13586388/4f9b57f9-dfaf-4e13-95f3-7403cb8af952

",closed,2024-06-13T15:51:39Z,2024-06-13T16:28:59Z,2024-06-13T16:28:59Z,,master,fix/desktop_remote_toolbar_remember_collapse,4,31,38,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8349
8348,fix: check if contains display only on multiple sessions,"1. Remove redundant `h.renderer.map_display_sessions.read().unwrap()`
2. Only check if session contains display when using mulitple ui sessions.",closed,2024-06-13T15:19:29Z,2024-06-13T15:22:03Z,2024-06-13T15:22:03Z,,master,fix/check_push_rgba_only_on_desktop,1,10,10,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8348
8347,"fix: desktop, remote toolbar autohide","Fix remote toolbar, autohide.

### Fixed preview

https://github.com/rustdesk/rustdesk/assets/13586388/e8a03357-1ba5-418e-b9e5-b4b33342e802


### Bug desc

Remote toolbar is created and destory more than one time. 
The destory(dispose) function will cause the autohide not working.

When refreshing the toolbar widget, the new widget is created and then the old widget is disposed.

After adding some print in `_RemoteToolbarState`

```
debugPrint('REMOVE ME ======================== _RemoteToolbarState [${identityHashCode(this)}] initState');
debugPrint('REMOVE ME ========================  _RemoteToolbarState [${identityHashCode(this)}] dispose');
debugPrint('REMOVE ME ====================== _RemoteToolbarState [${identityHashCode(this)}] build');
```

I can see

```
flutter: REMOVE ME ======================== _RemoteToolbarState [965824738] initState
flutter: REMOVE ME ====================== _RemoteToolbarState [965824738] build
flutter: REMOVE ME ======================== _RemoteToolbarState [52152775] initState
flutter: REMOVE ME ====================== _RemoteToolbarState [52152775] build
flutter: REMOVE ME ========================  _RemoteToolbarState [965824738] dispose
flutter: REMOVE ME ======================== _RemoteToolbarState [325133259] initState
flutter: REMOVE ME ====================== _RemoteToolbarState [325133259] build
flutter: CustomTouchGestureRecognizer init
flutter: REMOVE ME ========================  _RemoteToolbarState [52152775] dispose
flutter: CustomTouchGestureRecognizer init
flutter: REMOVE ME ======================== _RemoteToolbarState [887362112] initState
flutter: REMOVE ME ====================== _RemoteToolbarState [887362112] build
flutter: CustomTouchGestureRecognizer init
flutter: REMOVE ME ========================  _RemoteToolbarState [325133259] dispose
```

",closed,2024-06-13T12:53:01Z,2024-06-13T13:04:00Z,2024-06-13T13:04:00Z,,master,fix/remote_toolbar_autohide,2,19,8,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8347
8346,Update de.rs,,closed,2024-06-13T12:26:14Z,2024-06-13T13:01:24Z,2024-06-13T13:01:24Z,,master,patch-24,1,4,4,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8346
8345,add missing call of androidUpdatekeepScreenOn,,closed,2024-06-13T11:19:21Z,2024-06-13T11:24:38Z,2024-06-13T11:24:38Z,,master,fix,1,1,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8345
8344,android keep screen on option,"It's used when service is on.
* When rustdesk is in background,  floating window is used to keep screen on, so it's depends on floating window.
* When rustdesk is in foreground, current screen is always on, change it to be consistent with the settings.

https://github.com/rustdesk/rustdesk/assets/14891774/964b0f2f-0ed9-41a4-85d3-1976ded35de8

",closed,2024-06-13T10:18:48Z,2024-06-13T10:30:29Z,2024-06-13T10:30:29Z,,master,wakelock,30,251,9,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8344
8343,Refact/multi window soft rendering,"1. Flutter image pant, support multi ui sessions.  for images merging, force texture render.

https://github.com/rustdesk/rustdesk/discussions/8304

https://github.com/rustdesk/rustdesk/assets/13586388/f4076f63-ef41-46b4-ae89-6a07eac08e49



https://github.com/rustdesk/rustdesk/assets/13586388/fc45ca04-c5d0-4f3f-a2cc-e2d8e3976bb6


2. Always add an offset to the new connection window. Otherwise the second window may cover the frist one if they are connected to the same peer.

![image](https://github.com/rustdesk/rustdesk/assets/13586388/fb10e290-c581-4864-8b58-02ddb8e9756e)

3. Add new ffi method `sessionStartWithDisplays()` and remove `sessionTryAddDisplay()`.  
Because `sessionStart()` immediately return a stream, but the `session_start()` on rust side is called async (later). So we need to pass `displays` in `session_start()` instead of call `sessionTryAddDisplay()`. To make sure the stream on rust side is ready before the first image arrives.  

![image](https://github.com/rustdesk/rustdesk/assets/13586388/2b42b025-5f40-4bc7-ac44-e6185a3b35f8)


I've tested the flutter stream will not loose events.
  a. The base test example https://github.com/fzyzcjy/flutter_rust_bridge/tree/v1.80.1/frb_example/pure_dart . 
  b. Remove all test codes other than https://github.com/fzyzcjy/flutter_rust_bridge/blob/v1.80.1/frb_example/pure_dart/dart/lib/main.dart#L249
  c. Add `await Future.delayed(Duration(seconds: 3));` here https://github.com/fzyzcjy/flutter_rust_bridge/blob/9904bc6ce4a9433c035141d931f7bc69c83655ab/frb_dart/lib/src/basic.dart#L109

Then rust will push events first. Flutter will try receive events after 3 seconds. All events can be received.



",closed,2024-06-13T09:33:56Z,2024-06-13T10:03:41Z,2024-06-13T10:03:41Z,,master,refact/multi_window_soft_rendering,10,160,82,10,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8343
8338,"fix: try fix, macos, flutter, focus changed, no reponse","Update pub `rustdesk_desktop_multi_window` for https://github.com/rustdesk-org/rustdesk_desktop_multi_window/pull/14


### related issues

https://github.com/flutter/flutter/issues/133533

https://github.com/MixinNetwork/flutter-plugins/issues/289#issuecomment-1817665239

",closed,2024-06-13T02:41:06Z,2024-06-13T02:42:50Z,2024-06-13T02:42:50Z,,master,fix/try_fix_macos_flutter_focus_changed_no_response,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8338
8333,"try fix cursor id, int.parse, exceeds limit","
### Preview


https://github.com/rustdesk/rustdesk/assets/13586388/6da02310-a16c-4594-b772-15c88e228e5f

### Bug

I cannot reproduce.

See logs in https://github.com/rustdesk/rustdesk/issues/8320.

`id` is original `u64`, it may exceeds int limit flutter.  https://dart.dev/language/built-in-types#numbers  . I have no idea where ""18446744071749110741"" comes from, but no need to dig further.

`BigInt` may be a choice.
But no need to use `int`, `String` is ok.

```
[ERROR:flutter/runtime/dart_vm_initializer.cc(41)] Unhandled Exception: FormatException: Positive input exceeds the limit of integer
18446744071749110741
#0      int._handleFormatError (dart:core-patch/integers_patch.dart:121)
#1      int._parseRadix (dart:core-patch/integers_patch.dart:186)
#2      int._parse (dart:core-patch/integers_patch.dart:98)
#3      int.parse (dart:core-patch/integers_patch.dart:60)
#4      FfiModel.updateLastCursorId (package:flutter_hbb/models/model.dart:976)
#5      FfiModel.startEventListener.<anonymous closure> (package:flutter_hbb/models/model.dart:285)
#6      FFI.start.<anonymous closure>.<anonymous closure> (package:flutter_hbb/models/model.dart:2495)
#7      FFI.start.<anonymous closure> (package:flutter_hbb/models/model.dart:2523)
#8      _RootZone.runUnaryGuarded (dart:async/zone.dart:1594)
#9      _BufferingStreamSubscription._sendData (dart:async/stream_impl.dart:339)
#10     _BufferingStreamSubscription._add (dart:async/stream_impl.dart:271)
#11     _SyncStreamControllerDispatch._sendData (dart:async/stream_controller.dart:784)
#12     _StreamController._add (dart:async/stream_controller.dart:658)
#13     _StreamController.add (dart:async/stream_controller.dart:606)
#14     _AsyncStarStreamController.add (dart:async-patch/async_patch.dart:76)
#15     FlutterRustBridgeBase.executeStream (package:flutter_rust_bridge/src/basic.dart)
<asynchronous suspension>
#16     FFI.start.<anonymous closure> (package:flutter_hbb/models/model.dart:2453)
<asynchronous suspension>

flutter: onPointDownImage PointerDeviceKind.mouse
flutter: addAllowedPointer
flutter: PointerUpEvent
[ERROR:flutter/runtime/dart_vm_initializer.cc(41)] Unhandled Exception: FormatException: Positive input exceeds the limit of integer
18446744071749110741
#0      int._handleFormatError (dart:core-patch/integers_patch.dart:121)
#1      int._parseRadix (dart:core-patch/integers_patch.dart:186)
#2      int._parse (dart:core-patch/integers_patch.dart:98)
#3      int.parse (dart:core-patch/integers_patch.dart:60)
#4      FfiModel.updateLastCursorId (package:flutter_hbb/models/model.dart:976)
#5      FfiModel.startEventListener.<anonymous closure> (package:flutter_hbb/models/model.dart:288)
#6      FFI.start.<anonymous closure>.<anonymous closure> (package:flutter_hbb/models/model.dart:2495)
#7      FFI.start.<anonymous closure> (package:flutter_hbb/models/model.dart:2523)
#8      _RootZone.runUnaryGuarded (dart:async/zone.dart:1594)
#9      _BufferingStreamSubscription._sendData (dart:async/stream_impl.dart:339)
#10     _BufferingStreamSubscription._add (dart:async/stream_impl.dart:271)
#11     _SyncStreamControllerDispatch._sendData (dart:async/stream_controller.dart:784)
#12     _StreamController._add (dart:async/stream_controller.dart:658)
#13     _StreamController.add (dart:async/stream_controller.dart:606)
#14     _AsyncStarStreamController.add (dart:async-patch/async_patch.dart:76)
#15     FlutterRustBridgeBase.executeStream (package:flutter_rust_bridge/src/basic.dart)
<asynchronous suspension>
#16     FFI.start.<anonymous closure> (package:flutter_hbb/models/model.dart:2453)
<asynchronous suspension>
```",closed,2024-06-12T16:31:24Z,2024-06-12T16:34:24Z,2024-06-12T16:34:24Z,,master,fix/try_fix_cursor_id_int_exceeds_limit,1,15,11,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8333
8332,Update pl.rs,,closed,2024-06-12T14:45:55Z,2024-06-12T14:46:09Z,,,master,master,0,0,0,0,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8332
8327,disable hardware encoding if encoding fails too many times,,closed,2024-06-12T13:12:31Z,2024-06-12T15:37:51Z,2024-06-12T15:37:51Z,,master,hwcodec,6,45,11,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8327
8325,"hwcodec, only process that start ipc server start check process","* Check process send config to ipc server, other process get config from ipc server. Process will save config to toml, and the toml will be used if the config is none on windows.

* When start check process: ipc server process start or option changed from disable to enable

* When get config: main window start or option changed from disable to enable, start_video_audio_threads.

* Only windows implements signature, which is used to mark whether the gpu software and hardware information changes. 
  - After reboot, the signature doesn't change. 
  -  https://asawicki.info/news_1773_how_to_programmatically_check_graphics_driver_version, use dxgi way to get software version, it's not consistent with the visible driver version. 
  - After updating intel driver with small version change, the signature doesn't change, 
  - After updating nvidia driver with big version change, the signature changes.
  -  Linux doens't use toml file.",closed,2024-06-12T09:52:38Z,2024-06-12T12:40:35Z,2024-06-12T12:40:35Z,,master,hwcodec_ipc,10,389,206,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8325
8323,Update lv.rs,,closed,2024-06-12T09:15:25Z,2024-06-12T09:20:29Z,2024-06-12T09:20:29Z,,master,patch-7,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8323
8316,comments,,closed,2024-06-11T16:35:04Z,2024-06-11T16:53:54Z,2024-06-11T16:53:54Z,,master,fix/audio_rechannel_len,1,2,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8316
8315,fix: audio rechannel len,"Fix `rechannel_len` for opus encoder.

`frame_size` should be `sample_rate_0 as usize / 100; // 10 ms`. So after `crate::common::audio_resample()`, the data len is `sample_rate as usize / 100`.

eg:

```
SupportedStreamConfig { channels: 2, sample_rate: SampleRate(44100), buffer_size: Range { min: 64, max: 2048 }, sample_format: I32 }
```

then

```
sample_rate_0: 44100
sample_rate: 24000
device_channel: 2
encode_channel: 2
```

`rechannel_len` must be 882. After `crate::common::audio_resample()`, the data is 480, the same to `24000 / 100 * 2`.

If we use `let frame_size = sample_rate as usize / 100; // 10 ms`, the data will be 240, which is too short for opus encoder, and will always reutrn `OPUS_BAD_ARG`.   https://github.com/xiph/opus/blob/2554a89e02c7fc30a980b4f7e635ceae1ecba5d6/src/opus_encoder.c#L725",closed,2024-06-11T15:42:46Z,2024-06-11T16:32:10Z,2024-06-11T16:32:10Z,,master,fix/audio_rechannel_len,1,3,1,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8315
8312,refact: multi_window_soft_rendering,"1. Flutter image pant, support multi ui sessions.  for images merging, force texture render.

https://github.com/rustdesk/rustdesk/discussions/8304

https://github.com/rustdesk/rustdesk/assets/13586388/f4076f63-ef41-46b4-ae89-6a07eac08e49



https://github.com/rustdesk/rustdesk/assets/13586388/fc45ca04-c5d0-4f3f-a2cc-e2d8e3976bb6


2. Always add an offset to the new connection window. Otherwise the second window may cover the frist one if they are connected to the same peer.
<img width=""589"" alt=""1718106508106"" src=""https://github.com/rustdesk/rustdesk/assets/13586388/fb10e290-c581-4864-8b58-02ddb8e9756e"">



",closed,2024-06-11T08:08:08Z,2024-06-12T03:16:48Z,,,master,refact/multi_window_soft_rendering,8,79,56,6,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8312
8307,"fix: peer option, individual_windows, use 'N' instead of ''","Explicitly set `'N'` instead of `''` for `displays_as_individual_windows` and `use_all_my_displays_for_the_remote_session`.

Because `''` will cause the config loader to read the default values.

### Bug


https://github.com/rustdesk/rustdesk/assets/13586388/e312fc25-ea7d-4de6-a7d6-9957f74070bf

### Fixed


https://github.com/rustdesk/rustdesk/assets/13586388/8985ed27-c856-459e-aae6-e69eb4cc2886

",closed,2024-06-10T14:54:29Z,2024-06-10T15:01:55Z,2024-06-10T15:01:55Z,,master,fix/peer_option_displays_as_individual_windows,2,3,3,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8307
8305,use sihost.exe as fallback for run_as_user if no explorer.exe,"https://github.com/rustdesk/rustdesk/issues/8193

* There is no relevant information, but I found that each session has a unique sihost.exe, and the user name of the process is consistent with the user name of the session, and after using the task manager to kill this process, it will automatically restart. Checking sessionUserName=siHostUserName may be unnecessary, but since there is no evidence, check it anyway.
* GetFallbackUserPid is called only when explorer.exe does not exist.
* ProcessHacker shows that the tokens of explorer.exe and sihost.exe are the same.


https://github.com/rustdesk/rustdesk/assets/14891774/ebba9606-f01c-4a91-afef-1e3cc2ab4830

",closed,2024-06-10T12:18:08Z,2024-06-10T12:29:53Z,2024-06-10T12:29:53Z,,master,no_explorer,2,147,3,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8305
8303,"fix: custom client, option to bool","Fix option to boolean when option is empty.

",closed,2024-06-09T17:29:05Z,2024-06-10T03:01:39Z,2024-06-10T03:01:39Z,,master,fix/custom_client_options_option2bool,8,32,30,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8303
8302,"fix: custom client, options, option2bool()","1. Fix https://github.com/rustdesk/rustdesk/issues/8299 

![image](https://github.com/rustdesk/rustdesk/assets/13586388/2886add9-5559-46ea-952c-fa39169f70ac)

![image](https://github.com/rustdesk/rustdesk/assets/13586388/977244d3-746b-4d44-859f-f4e33d4bb7a6)


2. Fix other palces, `""allow-""` and `""enable-""` option, value to bool.
",closed,2024-06-09T14:39:57Z,2024-06-09T16:11:59Z,2024-06-09T16:11:59Z,,master,fix/custom_client_options_option2bool,8,45,7,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8302
8300,"fix: custom client, cm permisssions",https://github.com/rustdesk/rustdesk/issues/8299,closed,2024-06-09T13:39:02Z,2024-06-09T13:45:28Z,,,master,fix/custom_client_cm_permissions,3,22,1,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8300
8298,upload sysinfo when username is not empty,"https://github.com/rustdesk/rustdesk/discussions/8031
username is empty in login screen",closed,2024-06-09T08:03:58Z,2024-06-09T11:50:08Z,,,master,sysinfo_username,1,5,0,1,1,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8298
8295,is_ipc_file_exist quote Config::ipc_path,,closed,2024-06-08T13:40:25Z,2024-06-08T13:56:47Z,2024-06-08T13:56:47Z,,master,ipc,1,4,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8295
8294,fix nt_terminate_process missing CloseHandle,,closed,2024-06-08T13:05:04Z,2024-06-08T13:15:01Z,2024-06-08T13:15:01Z,,master,fix,1,2,0,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8294
8293,Update Ukrainian translation,,closed,2024-06-08T11:35:58Z,2024-06-08T12:51:06Z,2024-06-08T12:51:06Z,,master,ukrainian-translation,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8293
8291,"no explorer.exe, judge by pid retrived from cpp",,closed,2024-06-08T08:36:00Z,2024-06-08T08:50:35Z,2024-06-08T08:50:35Z,,master,opt,2,17,25,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8291
8290,not close connection if failed to start cm due to no explorer.exe,"https://github.com/rustdesk/rustdesk/issues/8193

https://github.com/rustdesk/rustdesk/assets/14891774/c7a17043-8763-4480-9487-cf97455e8720


If we use other processes, as least user id need to be checked.
",closed,2024-06-08T07:49:34Z,2024-06-08T08:11:51Z,2024-06-08T08:11:51Z,,master,run_as_user,2,30,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8290
8289,"fix kill occupied ipc process, find with enumerate, kill with NtTerminateProcess","https://github.com/rustdesk/rustdesk/pull/8086
* Reproduced the issue --server started in a loop, the user process did't have title, couldn't be connected to and taskkill not work
* Test whether ipc is opccupied with enumerating named pipe. std::path::Path:::exist may be ok, but at that time not work, maybe given wrong path parameter.
* Kill process with NtTerminateProcess successfully.
* There is a way to find the exact process which occupies the ipc in https://github.com/winsiderss/systeminformer
* Tested install, stop/start service, reboot.",closed,2024-06-08T05:01:17Z,2024-06-08T06:09:16Z,2024-06-08T06:09:16Z,,master,kill_occupy_ipc,5,112,48,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8289
8286,Update de.rs,,closed,2024-06-07T22:31:34Z,2024-06-08T01:43:50Z,2024-06-08T01:43:50Z,,master,patch-23,1,3,3,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8286
8285,update cs.rs,,closed,2024-06-07T16:17:21Z,2024-06-08T01:43:32Z,2024-06-08T01:43:32Z,,master,update-czech-language,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8285
8284,update sk.rs,,closed,2024-06-07T16:15:46Z,2024-06-08T01:43:18Z,2024-06-08T01:43:17Z,,master,sk-language-update,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8284
8283,Merge,,closed,2024-06-07T14:02:59Z,2024-06-07T14:03:14Z,,,master,master,6,169,17,28,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8283
8282,Update Italian language,"@rustdesk 

Please merge. Thanks.",closed,2024-06-07T12:39:46Z,2024-06-07T12:48:19Z,2024-06-07T12:48:19Z,,master,master,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8282
8281,Update ru.rs,,closed,2024-06-07T06:49:46Z,2024-06-07T07:49:52Z,2024-06-07T07:49:52Z,,master,master,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8281
8280,"refact: Wayland, not support multiple displays","1. Comment `args.insert(""multiple"".into(), Variant(Box::new(true)));` to disable multi displays selection.
2. Revert https://github.com/rustdesk/rustdesk/pull/8277 since no need to check if is Wayland.
3. The rest changes are just format.

https://github.com/rustdesk/rustdesk/assets/13586388/d77d96a2-1e6a-4e67-9428-3e5b595c876b

",closed,2024-06-07T02:55:37Z,2024-06-07T04:59:42Z,2024-06-07T04:59:42Z,,master,refact/Wayland_do_not_support_multi_displays_selection,3,21,19,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8280
8279,add floating window setting,"* Set `disable-floating-window` in client ui, it shows enabled when option is enabled and has floating window permission.
* Remove ignore battery setting because not work properly on every device.
* When the phone orientation changes, make the Y coordinate change proportionally, when changing back, the floating window position is still the original one.
* Add custom client option `floating-window-untouchable` to make the click event pass through the floating window automically. Set it untouchable automically when `floating-window-transparency` is 0. After being set to 'untouchable', the position of the floating window cannot be changed, and the system may automatically set the floating window to be semi-transparent. However, this feature may not work in a small number of applications, such as the GitHub app.
* On my phone, floating window size 16 no works and 32 works, so keep the size range [32, 320]

https://github.com/rustdesk/rustdesk/assets/14891774/db5e99f7-69c7-4a17-bc47-4cfce6e162fa

",closed,2024-06-07T02:37:50Z,2024-06-07T03:04:18Z,2024-06-07T03:04:18Z,,master,android_floating_window,30,121,14,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8279
8277,"refact: Wayland, do not show multi displays","https://github.com/rustdesk/rustdesk/assets/13586388/93d9f0a1-d4d9-4c86-99c5-f98c99c2b60c


TODOs:
1. The second connection (store the token -> disconnect -> connect) always connect to the same display.
    **IMPORTANT BUG**: If one person only choose the 2nd display to share, the first display should not be shared at all.


https://github.com/rustdesk/rustdesk/assets/13586388/8cef4bdc-a977-4607-9b48-112b836caa8f



2. Show the primary display if multiple displays are selected.
3. Support multiple displays.",closed,2024-06-06T17:23:40Z,2024-06-07T01:54:50Z,2024-06-07T01:54:50Z,,master,refact/Wayland_do_not_show_multi_displays,2,4,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8277
8276,fix: Wayland not support multi displays,"Wayland does not support switching display from the control side for now.


https://github.com/rustdesk/rustdesk/assets/13586388/6c2da5e5-d178-4c4c-b1f5-36932985a5e3


TODOs:

It's better to choose the primary display when there're multi displays.",closed,2024-06-06T16:37:00Z,2024-06-06T17:04:51Z,,,master,fix/Wayland_no_support_multi_displays,30,60,19,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8276
8275,"fix: peer menu, hidden by wrong check","https://github.com/rustdesk/rustdesk/issues/8274

All if with `isWebDesktop` and `isWeb` are checked, the others are right.",closed,2024-06-06T16:18:59Z,2024-06-06T16:20:55Z,2024-06-06T16:20:55Z,,master,fix/peer_menu_rename,1,3,3,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8275
8272,vram avoid always fallback to gdi,"If fallback to gdi three times in a row, set vram encoding not available to avoid switch in a loop. Test with random fallback gdi manually.

Related log: https://github.com/rustdesk/rustdesk/issues/8193#issuecomment-2141045678

",closed,2024-06-06T09:49:31Z,2024-06-06T14:52:31Z,2024-06-06T14:52:31Z,,master,vram_fallback_gdi,2,20,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8272
8268,android floating window,"* The floating window shows when the service is on.
* It helps avoid services being killed by the system.

https://github.com/rustdesk/rustdesk/issues/6192

[floating-window.webm](https://github.com/rustdesk/rustdesk/assets/14891774/ef38476b-a3c3-467c-89f4-dc76def5698d)

https://rustdesk.com/docs/en/self-host/client-configuration/advanced-settings/
Custom client config of picture below:

`floating-window-svg=<?xml version=""1.0"" standalone=""no""?><!DOCTYPE svg PUBLIC ""-//W3C//DTD SVG 1.1//EN"" ""http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd""><svg t=""1717559129252"" class=""icon"" viewBox=""0 0 1024 1024"" version=""1.1"" xmlns=""http://www.w3.org/2000/svg"" p-id=""4248"" xmlns:xlink=""http://www.w3.org/1999/xlink"" width=""32"" height=""32""><path d=""M950.857143 512c0 242.285714-196.571429 438.857143-438.857143 438.857143S73.142857 754.285714 73.142857 512 269.714286 73.142857 512 73.142857s438.857143 196.571429 438.857143 438.857143z"" fill=""#1296db"" p-id=""4249""></path></svg>`
`floating-window-transparency=10`
`disable-floating-window=N`
`floating-window-size=240`

![01da1e41bd06e290fee599dfac50fc8](https://github.com/rustdesk/rustdesk/assets/14891774/49eedfae-c281-4301-bd3b-81f4543ca4ab)

# Other

* Becase `translate` has only one `new_string`, and `with_local_frame_returning_local` leak it for return, so remove `with_local_frame_returning_local`
",closed,2024-06-05T14:37:13Z,2024-06-05T15:11:44Z,2024-06-05T15:11:44Z,,master,android_floating_window,13,432,32,1,1,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8268
8267,Is incoming only,,closed,2024-06-05T10:18:03Z,2024-06-05T10:18:58Z,,,master,isIncomingOnly,14,441,1467,6,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8267
8266,"fix rustPointerInput jni parameter declaration, call new_string in with_local_frame","`call_main_service_set_by_name` is tested through `is_hardware_codec`, changing screen size
`call_main_service_get_by_name` is tested through `screen size`, get display size
`translate` is tested through `Do you accept` notification

https://github.com/rustdesk/rustdesk/assets/14891774/5ce15650-0ce8-4e2d-bf2d-21a34ef926ea

![translate](https://github.com/rustdesk/rustdesk/assets/14891774/aebc91f3-60f7-460a-bee9-ca1be3765de7)
",closed,2024-06-05T10:00:36Z,2024-06-05T10:09:02Z,2024-06-05T10:09:02Z,,master,fix,2,50,38,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8266
8262,Update lv.rs,,closed,2024-06-05T06:31:08Z,2024-06-05T10:44:47Z,2024-06-05T10:44:47Z,,master,patch-6,1,3,3,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8262
8261,fix: setMovable only on macos,,closed,2024-06-05T04:44:54Z,2024-06-05T06:52:57Z,2024-06-05T06:52:57Z,,master,fix/setMovable_only_on_macos,3,34,3,4,1,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8261
8253,Update 03/06/2024,,closed,2024-06-03T13:53:59Z,2024-06-03T13:54:42Z,,,master,master,4,8,165,5,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8253
8248,msgbox responds to numpadEnter as submit,,closed,2024-06-03T03:18:17Z,2024-06-03T03:19:35Z,2024-06-03T03:19:35Z,,master,fix,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8248
8242,fix: macos tab drag,"
https://github.com/rustdesk/rustdesk/assets/13586388/941ed7c7-e07f-4f31-992e-7e6bc040387d


Restoring window positions tests ok.
",closed,2024-06-02T02:51:08Z,2024-06-02T02:56:29Z,2024-06-02T02:56:29Z,,master,fix/macos_tab_drag,3,21,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8242
8240,"fix: macos, terminate, close main then remote windows","
Cannot exit application if close main window first.

https://github.com/rustdesk/rustdesk/assets/13586388/a4e67df5-4d5a-4234-94f9-b25987141972


No idea why `Future.delayed` is needed, but it works.",closed,2024-06-02T01:01:14Z,2024-06-02T02:35:54Z,2024-06-02T02:35:54Z,,master,fix/macos_terminate,1,8,2,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8240
8238,"fix: macos, fullscreen, remove mimimize button","MacOS is unable to [`miniaturize()`](https://developer.apple.com/documentation/appkit/nswindow/1419426-miniaturize) in fullscreen state.

<img width=""198"" alt=""1717248054322"" src=""https://github.com/rustdesk/rustdesk/assets/13586388/d1fda1e8-b7dd-4399-97c2-87888ac06588"">
",closed,2024-06-01T13:23:04Z,2024-06-01T13:28:36Z,2024-06-01T13:28:36Z,,master,fix/macos_remove_minimize_btn_when_fullscreen,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8238
8237,"fix: close all windows, obfuscated window id","1. Fix closing all window types with all windows.

![image](https://github.com/rustdesk/rustdesk/assets/13586388/cc112e62-71d3-477c-81df-968fb682616d)

2. Remove unused function `destroyWindow()`.",closed,2024-06-01T12:47:11Z,2024-06-01T13:28:03Z,2024-06-01T13:28:03Z,,master,fix/close_all_windows,1,4,18,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8237
8236,refact: mobile actions,"Mobile actions widget, zoom with the image.

### Before

https://github.com/rustdesk/rustdesk/assets/13586388/d8e6af6d-f499-4e5c-94a8-e56d6fbf3f26




### After


https://github.com/rustdesk/rustdesk/assets/13586388/02ceeccf-8128-4a91-9f47-aef97ee5ac66

",closed,2024-06-01T10:27:33Z,2024-06-01T12:23:58Z,2024-06-01T12:23:58Z,,master,refact/mobile_actions,4,109,59,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8236
8235,windows replace uni with cmd to start up main window after installation,"This is to avoid uni link not working

**Test**
The main window can pop up after installation, when stopping the service, or when starting the service.
The install directory is `C:\Program Files\RustDesk` so it works with empty spaces in the `exe`.

https://github.com/rustdesk/rustdesk/assets/14891774/f6145008-81d9-48ef-8a49-f9e71f1ef955


https://github.com/rustdesk/rustdesk/assets/14891774/bfa09e32-3570-47ff-b162-e5fe56d742a0


https://github.com/rustdesk/rustdesk/assets/14891774/473ca72d-7b6f-498f-8287-521374e8d72b

**Other change**
The install window's title  is changed to ""appname - Install"" to distinguish it from the main application window.
",closed,2024-06-01T09:36:03Z,2024-06-01T12:28:21Z,2024-06-01T12:28:21Z,,master,replace_startup_uni,3,16,7,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8235
8234,Add text,,closed,2024-06-01T07:00:59Z,2024-06-01T07:01:46Z,,,master,add-text,11,60,141,18,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8234
8228,"fix: tab, disable dragging","
https://github.com/rustdesk/rustdesk/assets/13586388/7e9c3b89-afe7-4b48-b0f0-085781ad3da1

",closed,2024-05-31T15:45:33Z,2024-05-31T16:10:18Z,2024-05-31T16:10:18Z,,master,fix/tab_disable_drag,1,5,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8228
8220,"update hwcodec, fix wrong gop, which causes FFmpeg nvenc vram encode delay","gop was set to u32::max (int -1) mistakely.

Test all the other desktop encoders, all latency free.",closed,2024-05-31T04:15:10Z,2024-05-31T08:44:19Z,2024-05-31T08:44:19Z,,master,hwcodec,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8220
8219,android broadcast display changed immediately when change scale,"This only improve the the situation of changing scale，doesn't fix waiting for image.

![image](https://github.com/rustdesk/rustdesk/assets/14891774/ae172c65-18d4-454f-8000-d855b9cdd7b5)
![Screenshot from 2024-05-31 10-00-19](https://github.com/rustdesk/rustdesk/assets/14891774/d833b439-7ac5-48cc-b0d1-501ad3693713)
",closed,2024-05-31T02:01:26Z,2024-05-31T08:44:42Z,2024-05-31T08:44:42Z,,master,notify_android_scale,1,12,6,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8219
8215,"fix, mac hwcodec decoding align use `dst_align`","Mac rgba texture render uses align 64, hwcodec use `dst_align` when convert yuv to rgba

**before**:
![image](https://github.com/rustdesk/rustdesk/assets/14891774/d0d54da5-e321-4668-a1a8-019f445a70a7)

**after**:
![image](https://github.com/rustdesk/rustdesk/assets/14891774/3bfc7478-6687-47fe-9f75-4e08c045ed26)

### other test:
on windows: `nv12->i420 -> bgra` is quicker than `nv12 -> bgra`; on linux, direct conversion is quicker, both same result as before.

1920x1080:
**windows:**
![image](https://github.com/rustdesk/rustdesk/assets/14891774/f8eb39b2-9443-4850-a14c-0d515a3ac8fe)

**linux:**
![Screenshot from 2024-05-30 22-18-10](https://github.com/rustdesk/rustdesk/assets/14891774/0640eb5c-d920-4a12-a845-d885765163d3)

",closed,2024-05-30T13:38:17Z,2024-05-30T15:40:25Z,2024-05-30T15:40:25Z,,master,fix_mac_hwcodec_decode_align,7,114,246,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8215
8214,Update Italian language,"@rustdesk 

Please merge. Thanks.",closed,2024-05-30T08:56:25Z,2024-05-30T08:57:14Z,2024-05-30T08:57:14Z,,master,master,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8214
8210,Update translations,Add additional hint for `texture_render_tip` to let user know that it may be an option to fix issue.,closed,2024-05-30T06:41:05Z,2024-05-30T07:09:12Z,2024-05-30T07:09:12Z,,master,tw-lang,3,4,4,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8210
8208,update cs.rs,,closed,2024-05-29T19:39:30Z,2024-05-30T00:33:32Z,2024-05-30T00:33:32Z,,master,cs-rs,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8208
8207,update sk.rs,,closed,2024-05-29T19:37:38Z,2024-05-30T00:30:54Z,2024-05-30T00:30:54Z,,master,sk-rs,1,2,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8207
8205,Block all incoming connections,,closed,2024-05-29T12:53:53Z,2024-05-29T12:54:30Z,,,master,v1.2.3-disable-server,1,7,26,1,0,0,,,True,https://api.github.com/repos/rustdesk/rustdesk/issues/8205
8204,not show paste menu when mobile control mobile,"https://github.com/rustdesk/rustdesk/issues/8203

**control mobile**
![29748b1ace5ca9ad5f6b4e897d27d92](https://github.com/rustdesk/rustdesk/assets/14891774/93a103e6-1e37-48f3-a49b-ba659dd68d7e)

**control desktop**
![e11cff81359745c5ff40f84a6c2dbd8](https://github.com/rustdesk/rustdesk/assets/14891774/2ae5bc7b-da2c-48ef-be28-991faf5b18c4)
",closed,2024-05-29T11:59:29Z,2024-05-29T12:38:56Z,2024-05-29T12:38:56Z,,master,fix,1,4,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8204
8202,"fix: flutter image pub, version 3 to 4, get bytes","Fix forbidden cursor png.

`image: ^4.0.17` has `numChannels`, it must be 4 before getting real `bgra` data.

### Bug




https://github.com/rustdesk/rustdesk/assets/13586388/52fb19b2-a152-4ae7-9ad1-375ee2c1584f




### Fixed


https://github.com/rustdesk/rustdesk/assets/13586388/a4f16334-912e-44e8-aaca-33999f9babdd
",closed,2024-05-29T11:04:25Z,2024-05-29T11:10:15Z,2024-05-29T11:10:15Z,,master,fix/image_pub_3to4_getBytes,1,9,2,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8202
8201,Add missing french language tips,,closed,2024-05-29T09:45:51Z,2024-05-29T11:10:47Z,2024-05-29T11:10:47Z,,master,french-language-tips,1,15,15,2,3,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8201
8199,Translation missing,"![Toggle](https://github.com/rustdesk/rustdesk/assets/37781396/01475df8-0ec3-45e0-8ce6-26db1bf622e3)
",closed,2024-05-29T09:06:28Z,2024-05-29T09:11:13Z,2024-05-29T09:11:13Z,,master,patch-22,1,1,1,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8199
8198,french translations,This contains missing french translations,closed,2024-05-29T08:37:23Z,2024-05-29T08:52:40Z,2024-05-29T08:52:40Z,,master,french-language,1,19,19,2,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8198
8195,Update Ukrainian UI translation,,closed,2024-05-29T07:05:35Z,2024-05-29T07:07:37Z,2024-05-29T07:07:37Z,,master,ukrainian-translation,1,4,4,1,0,0,,,False,https://api.github.com/repos/rustdesk/rustdesk/issues/8195
